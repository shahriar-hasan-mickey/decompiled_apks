{"version":3,"sources":["../../src/pages/manage-credit-account01/manage-credit-account01.module.ts","../../src/pages/manage-credit-account01/manage-credit-account01.ts"],"names":[],"mappings":"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","file":"32.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ManageCreditAccount01Page } from './manage-credit-account01';\n\n@NgModule({\n  declarations: [\n    ManageCreditAccount01Page,\n  ],\n  imports: [\n    IonicPageModule.forChild(ManageCreditAccount01Page),\n  ],\n\n  entryComponents: [\n    ManageCreditAccount01Page\n  ]\n})\nexport class ManageCreditAccount01PageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/manage-credit-account01/manage-credit-account01.module.ts","import {Component} from '@angular/core';\nimport {AlertController, IonicPage, NavController, NavParams} from 'ionic-angular';\nimport {TokenServiceProvider} from \"../../providers/token-service/token-service\";\nimport {LocalStorageProvider} from \"../../providers/local-storage/local-storage\";\nimport {MaskTokenProvider} from \"../../providers/mask-token/mask-token\";\nimport {CryptoParamUtilProvider} from \"../../providers/crypto-param-util/crypto-param-util\";\nimport {ITransferServiceProvider} from \"../../providers/i-transfer-service/i-transfer-service\";\nimport {GoogleAnalyticsProvider} from \"../../providers/google-analytics/google-analytics\";\n\n\n@IonicPage()\n@Component({\n  selector: 'page-manage-credit-account01',\n  templateUrl: 'manage-credit-account01.html',\n})\nexport class ManageCreditAccount01Page {\n\n  manageCreditAccError = \"\";\n  accountNo = \"\";\n  listSize=0;\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public tokenService: TokenServiceProvider,\n              public storage: LocalStorageProvider,\n              public maskTokenUtil: MaskTokenProvider,\n              public cryptoUtil: CryptoParamUtilProvider,\n              public iTransferService: ITransferServiceProvider,\n              public alertCtrl : AlertController,\n              public gaProvider : GoogleAnalyticsProvider) {\n\n    this.initCreditAccount();\n  }\n\n  initCreditAccount= function () {\n    let appData = this.storage.retrieveFromStorage(\"appData\");\n    let unMaskRefToken = this.maskTokenUtil.getUnMaskVal(appData.refreshToken);\n    this.tokenService.getNewToken(unMaskRefToken)\n      .then(data => {\n        this.onNewTokenGenComplete(data);\n      });\n\n  };\n\n  onNewTokenGenComplete = function (data) {\n\n    if (data.status == 0) {\n      this.navCtrl.setRoot('ExpirePage');\n    }\n\n    else {\n      let appData = this.storage.retrieveFromStorage(\"appData\");\n      let unMaskToken = this.maskTokenUtil.getUnMaskVal(appData.token);\n      this.iTransferService.fetchCreditAccountList(unMaskToken, appData.userId, appData.appId)\n        .then(data => {\n          this.onFetchCreditAccountListComplete(data);\n        });\n    }\n  };\n\n  onFetchCreditAccountListComplete = function (data) {\n    if (data.statusCode == 1)\n    {\n      this.creditAccDetails = data.object;\n      this.destAccList = this.creditAccDetails.beans;\n      this.maxSubscriptions = this.creditAccDetails.maxSubscriptions;\n      this.listSize=this.destAccList.length;\n\n    }\n\n    else if (data.statusCode == 0)\n    {\n      this.manageCreditAccError = data.note;\n    }\n\n    else\n    {\n      this.manageCreditAccError = \"System Error Contact with Administrator.\";\n    }\n  };\n\n  goToAddCreditAccountAction = function () {\n\n    let currentSubs = this.destAccList.length;\n    let maxSubs = this.maxSubscriptions;\n    if (currentSubs >= maxSubs) {\n      this.manageCreditAccError = \"You have no more subscription left.\";\n    }\n    else {\n      this.navCtrl.push('AddCreditAccount01Page');\n    }\n  };\n\n  deleteCreditAccount = function (listItem) {\n    this.accountNo = listItem.subscriptionValue;\n    this.manageCreditAccError=\"\";\n\n    let radioAlert = this.alertCtrl.create();\n    radioAlert.setTitle('Confirm Delete');\n    radioAlert.setCssClass(\"alertLogCss\");\n    radioAlert.setMessage(\"<center>Are you sure you want to delete Account - <strong>\" + listItem.subscriptionValue)+'</strong></center>';\n    radioAlert.addButton('Cancel');\n    radioAlert.addButton({\n      text: 'OK',\n      handler: data => {\n        let appData = this.storage.retrieveFromStorage(\"appData\");\n        let unMaskRefToken = this.maskTokenUtil.getUnMaskVal(appData.refreshToken);\n        this.tokenService.getNewToken(unMaskRefToken)\n          .then(data => {\n            this.onNewTokenGenCompleteForDelete(data);\n          });\n      }\n    });\n    radioAlert.present();\n    setTimeout(() => {\n      radioAlert.dismiss();\n    }, 30000);\n  };\n\n  onNewTokenGenCompleteForDelete = function (data) {\n\n    if (data.status == 0) {\n      this.navCtrl.push('ExpirePage');\n    }\n\n    else {\n      let appData = this.storage.retrieveFromStorage(\"appData\");\n      let unMaskToken = this.maskTokenUtil.getUnMaskVal(appData.token);\n      let encSrcAccNo = this.cryptoUtil.getEncryptVal(this.accountNo);\n      this.iTransferService.deleteCreditAccount(unMaskToken, appData.userId, appData.appId,encSrcAccNo)\n        .then(data => {\n          this.onDeleteCreditAccountListComplete(data);\n        });\n    }\n  };\n\n  onDeleteCreditAccountListComplete = function (data) {\n    if (data.statusCode == 1)\n    {\n      let radioAlert = this.alertCtrl.create();\n      radioAlert.setTitle('Success');\n      radioAlert.setCssClass(\"alertLogCss\");\n      radioAlert.setMessage(\"<center>Credit Account successfully Deleted.</center>\");\n      radioAlert.addButton({\n        text: 'OK',\n        handler: data => {\n         this.initCreditAccount();\n        }\n      });\n      radioAlert.present();\n      setTimeout(() => {\n        radioAlert.dismiss();\n      }, 20000);\n\n    }\n\n    else if (data.statusCode == 0)\n    {\n      this.manageCreditAccError = data.note;\n    }\n\n    else\n    {\n      this.manageCreditAccError = \"System Error Contact with Administrator.\";\n    }\n  };\n\n  ionViewDidLoad() {\n    // console.log('ionViewDidLoad ManageCreditAccount01Page');\n    this.gaProvider.startTrackerWithId(\"Manage Credit Account\");\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/manage-credit-account01/manage-credit-account01.ts"],"sourceRoot":""}