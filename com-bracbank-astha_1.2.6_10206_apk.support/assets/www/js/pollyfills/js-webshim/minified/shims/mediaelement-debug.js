!function(e,t){"use strict";function r(e,r,o,n){var s,a,i=t.Deferred(),c=t("#wsmediatestcontainer"),d=t("<div />").css({width:320,height:120,"float":"left"}),l=t(document.createElement(n.nodeName)).attr({src:e.src,"data-type":r,controls:"controls",preload:"none"}),p=function(){l.pause(),setTimeout(function(){d.remove(),t("video, audio",c).length||c.remove()},9),setTimeout(function(){i.resolve()},99)},u=function(t){var r=l.prop("duration"),n=l.prop("currentTime");r&&r>5?n>0&&5>n?p():("ended"==t.type||n>=r-1)&&(e.decode[o].endJump=!0,p()):p()},m=function(r){if(clearTimeout(s),r)if("loadedmetadata"==r.type){if("swf"==o)try{e.decode[o]=l.getShadowElement().find("object, embed")[0].api_get("meta")}catch(r){}(!e.decode[o]||t.isEmptyObject(e.decode[o]))&&(e.decode[o]={duration:l.prop("duration"),height:l.prop("videoHeight"),width:l.prop("videoWidth")}),e.decode[o].success=!0}else e.decode[o]={error:l.prop("error"),mediaError:l.data("mediaerror"),success:!1};else e.decode[o]={success:!1,timeout:!0};setTimeout(function(){l.play()},9),l.on("ended timeupdate",u),clearTimeout(a),setTimeout(p,300)};return c.length||(c=t('<div id="wsmediatestcontainer" />').css({position:"fixed",top:0,left:0,right:0,padding:10,zIndex:9999999999}).prependTo("body")),l.on("mediaerror loadedmetadata",m).appendTo(d),"native"==o&&l.on("error",m),d.appendTo(c),s=setTimeout(m,4e4),a=setTimeout(function(){l.prop("muted",!0),l.play()},200),l.mediaLoad(),i}function o(o,n){var s=[],a=o.declaredContainer||o.computedContainer||o.headerContainer||"",i=e.cfg.mediaelement.preferFlash;return p&&n.element.canPlayType(a)?(e.cfg.mediaelement.preferFlash=!1,s.push(r(o,a,"native",n))):o.decode["native"]={success:!1,notsupported:!0},l&&!/youtube|rtmp/i.test(a)&&-1!=d.swfMimeTypes.indexOf(a)?(e.cfg.mediaelement.preferFlash=!0,s.push(r(o,a,"swf",n))):o.decode.swf={success:!1,notsupported:"video/youtube"!=a},e.cfg.mediaelement.preferFlash=i,t.when.apply(t,s)}function n(e,r){var n=t.Deferred(),s=function(){f||(f++,t(h).off("finish",s),o(e,r).always(function(){n.resolve(),f--,t(h).trigger("finish")}))};f?t(h).on("finish",s):s(),e.decode.promise=n.promise()}function s(e,r){var o,s={src:t.prop(e,"src"),attrSrc:t.trim(t.attr(e,"src")),declaredType:t.attr(e,"type")||t(e).attr("data-type")||"",errors:{},decode:{"native":{},swf:{}}};s.declaredContainer=s.declaredType.split(";")[0].trim();try{s.computedContainer=d.getTypeForSrc(s.src,r.nodeName)}catch(a){s.computedContainer=""}if(s.src.indexOf(u))s.cors=!0;else try{s.headerType="",s.headers={},o=t.ajax({url:s.src,type:"head",success:function(){s.headerType=o.getResponseHeader("Content-Type")||"",/^\s*application\/octet\-stream\s*$/i.test(s.headerType)&&(s.headerType="",s.errors.octetStream="octetStream"),s.headerContainer=t.trim(s.headerType.split(";")[0]),["Location","Content-Type","Content-Length","Accept-Ranges","Content-Disposition","Content-Encoding"].forEach(function(e){s.headers[e]=o.getResponseHeader(e)||""})},error:function(e,t,r){s.httpError=t,s.httpErrorText=r}}),s.ajax=o}catch(a){}return n(s,r),s}function a(e){var r,o=[],n=[],a=t("source",e.element),i=[],c=t.Deferred(),d=0,l=function(){d++,d>1&&c.resolve()};return t.prop(e.element,"src")&&(r=s(e.element,e),r.attrMode=!0,r.typeNotRequired=!0,o.push(r)),a.each(function(t){var r=s(this,e);r.typeNotRequired=!!(t&&t>=a.length-1),o.push(r),r.ajax&&n.push(r.ajax),r.decode.promise&&i.push(r.decode.promise)}),e.srces=o,t.when.apply(t,i).always(l),t.when.apply(t,n).done(l).fail(function(){setTimeout(l,200)}),c.promise()}function i(e){t.each(m,function(t,r){var o,n=!1,s=r.message||t;r.srcTest?(r.srcTest.poster&&(o=r.test(e.poster,e),o&&("string"==typeof o?e.poster.errors[t]=o:(e.poster.errors[t]=s,n=!0))),r.srcTest.srces&&e.srces.forEach(function(a){o=r.test(a,e),o&&("string"==typeof o?a.errors[t]=o:(a.errors[t]=s,n=!0))})):n=r.test(e),n&&e.errors.push({message:s,level:r.level,name:t})}),e.errors.sort(function(e,t){return e.level>t.level}),void(e.errors.length?e.errors.forEach(function(e){var t="log";void(console.error&&console.warn&&(e.level<3?t="error":e.level<4&&(t="warn")))}):void 0)}function c(e){var r={element:e,nodeName:e.nodeName.toLowerCase(),errors:[],poster:{src:t.prop(e,"poster"),attrSrc:t.trim(t.attr(e,"poster")),errors:{}},mediaError:t.prop(e,"error"),wsError:t(e).data("mediaerror")},o=a(r),n=function(){i(r)};o.always(n)}if(window.console){var d=e.mediaelement,l=swfmini.hasFlashPlayerVersion("10.0.3"),p=e.support.mediaelement,u=location.protocol+"//"+location.hostname,m={urlInValid:{level:1,test:function(){var e=/^[a-z0-9\,\.\:\/\-_\;\?#\+\*\!\(\)\$\;\&\=\+]+$/i;return function(t){return t.src&&!e.test(t.src)}}(),srcTest:{poster:1,srces:1},message:"URL has invalid characters. Remove any special characters and mutated vowels."},noHeaderTest:{level:5,test:function(e){return"video/youtube"!=e.computedContainer&&!e.ajax&&!e.httpError},srcTest:{srces:1},message:"Could not run HTTP network tests (cross-domain) for all sources. Check manually."},hasNoTypeAttribute:{level:4,test:function(e){return!e.declaredType&&!e.typeNotRequired},srcTest:{srces:1},message:"The source element has no type attribute specified. Browser needs to download file before testing compatibility. Add a proper type attribute."},couldNotComputeTypeDeclaredTypeAbsent:{level:1,test:function(e){return!e.computedContainer&&!e.declaredType},srcTest:{srces:1},message:"The source element has no type attribute specified and the extensions seems unknown. Add a proper type attribute."},httpError:{level:2.5,test:function(e){return!e.ajax||e.decode.swf.success||e.decode["native"].success?"not testable":!(!e.httpError||e.httpErrorText)},srcTest:{srces:1},message:"There was an unknown http error. Check source/URL."},fileEncoding:{test:function(){return"This test does not test file encoding, framerate compatibility, moov index, encoding profiles. So there is room to fail!"},srcTest:{srces:1}},explicitHttpError:{level:1,test:function(e){return!e.ajax||e.decode.swf.success||e.decode["native"].success?"not testable":!!e.httpErrorText},srcTest:{srces:1},message:"There was a http error. Check source/URL."},charsetInContentType:{level:2.5,test:function(e){return!e.ajax||e.httpError?"not testable":e.headerType&&/charset=/i.test(e.headerType)},srcTest:{srces:1},message:"Content-Type header of media file sends charset. Remove charset information."},explicitTypeMix:{level:3,test:function(e){return e.declaredContainer&&e.headerType?e.headerType!=e.declaredType:"not testable"},srcTest:{srces:1},message:"Content-Type header and attribute type do not match. Set same and proper type value."},noContentType:{level:2.5,test:function(e){return e.ajax&&!e.httpError?!e.headerType:"not testable"},srcTest:{srces:1},message:"Content-Type header for media file is either empty or application/octet-stream."},noContentLength:{level:3,test:function(e){return e.ajax&&!e.httpError?!e.headers["Content-Length"]:"not testable"},srcTest:{srces:1},message:"Content-Length header for media file does not send value."},noRange:{level:3,test:function(e){return e.ajax&&!e.httpError?!e.headers["Accept-Ranges"]:"not testable"},srcTest:{srces:1},message:"Accept-Ranges header for media file does not send value. Make sure server supports Range requests in bytes"},explicitNoRange:{level:2.5,test:function(e){return e.ajax&&!e.httpError?"none"==e.headers["Accept-Ranges"]:"not testable"},srcTest:{srces:1},message:"Server does not support Range requests. Make sure server supports Range requests in bytes"},doubleEncoded:{level:1,test:function(e){return e.ajax&&!e.httpError?/[defalte|gzip]/i.test(e.headers["Content-Encoding"]):"not testable"},srcTest:{srces:1},message:"Content of media file is encoded with gzip/defalte. Make sure to not encode it. It's already encoded."},mediaAttachment:{level:1,test:function(e){return e.ajax&&!e.httpError?/attach/i.test(e.headers["Content-Disposition"]):"not testable"},srcTest:{srces:1},message:"Content-Disposition header wants media file to be downloaded, but not to be played."},badTypeMix:{level:1,test:function(e,t){var r,o,n=!1,s=e.declaredContainer||e.computedContainer,a=e.headerContainer;return a&&s?a!=s&&(r=-1!=d.swfMimeTypes.indexOf(s),o=-1!=d.swfMimeTypes.indexOf(a),r!=o&&(n=!0),!n&&t.element.canPlayType&&(r=!!t.element.canPlayType(s),o=!!t.element.canPlayType(a),r!=o&&(n=!0))):n="not testable",n},srcTest:{srces:1},message:"Content-Type header and attribute type do not match and are quite different. Set same and proper type value."},typeMix:{level:2.5,test:function(e,t){var r,o,n=!1;return!e.headerContainer&&e.declaredContainer&&e.computedContainer&&e.computedContainer!=e.declaredContainer&&(r=-1!=d.swfMimeTypes.indexOf(e.computedContainer),o=-1!=d.swfMimeTypes.indexOf(e.declaredContainer),r!=o&&(n=!0),!n&&t.element.canPlayType&&(r=!!t.element.canPlayType(e.computedContainer),o=!!t.element.canPlayType(e.declaredContainer),r!=o&&(n=!0))),n},srcTest:{srces:1},message:"Computed type and declared type are different. Needs manual check."},hasNoPlayableSrc:{level:1,test:function(e){var r=!1;return t.each(e.srces,function(t,o){var n=o.declaredContainer||o.computedContainer,s=o.headerContainer||n;return-1!=d.swfMimeTypes.indexOf(n)?(r=!0,!1):e.element.canPlayType&&e.element.canPlayType(n)&&e.element.canPlayType(s)?(r=!0,!1):void 0}),!r},message:"Mediaelement has no source to be played in browser or by plugin. Use at least a video/mp4 source."},endJump:{level:2.5,test:function(e){return e.decode.swf.endJump||e.decode["native"].endJump},srcTest:{srces:1},message:"src jumped to end too soon. Check negative timestamps"},swfTimeout:{level:3,test:function(e){return e.decode.swf.timeout},srcTest:{srces:1},message:"Could not run decode tests. Maybe moovposition is on end?"},moovPosition:{level:2,test:function(e){return e.decode.swf.moovposition?e.decode.swf.moovposition>300:!1},srcTest:{srces:1}},tabletDecode:{level:2,test:function(e){var r=!1,o=!1;return l&&t.each(e.srces,function(e,t){var n=t.decode.swf;return"videocodecid"in n&&(r=!0),"avc1"!=n.videocodecid||n.avclevel>31||n.height*n.width>921600?void 0:(o=!0,!1)}),r?!o:!1},message:"Not playable on more than 25% of smartphone and more than 15% of tablet devices. In case you want to support 75% of smartphone- and 90% of tablet devices you need to provide a source encoded with H.264, High Profile (HP), Level 3.1, up to 1280 * 720."},allTabletDecode:{level:3,test:function(e){var r=!1,o=!1;return l&&t.each(e.srces,function(e,t){var n=t.decode.swf;return"videocodecid"in n&&(r=!0),"avc1"!=n.videocodecid||n.avcprofile>77||n.avclevel>31||n.height*n.width>921600?void 0:(o=!0,!1)}),r?!o:!1},message:"Not playable on more than 15% of smartphone and more than 5% of tablet devices. In case you want to support 90% of smartphone- and 99% of tablet devices you need to provide a source encoded with H.264, Main Profile (HP), Level 3.1, up to 1280 * 720."},smartphoneDecode:{level:3.5,test:function(e){var r=!1,o=!1;return l&&t.each(e.srces,function(e,t){var n=t.decode.swf;return"videocodecid"in n&&(r=!0),"avc1"!=n.videocodecid||n.avcprofile>77||n.avclevel>30||n.height*n.width>345600?void 0:(o=!0,!1)}),r?!o:!1},message:"Not playable on more than 10% of smartphones: In case you want to support 90% of smartphone- and 99% of tablet devices you need to provide a source encoded with H.264, Main Profile (HP), Level 3.1, up to 720 * 404 / 640 * 480."},notAllSmartphoneDecode:{level:4,test:function(e){var r=!1,o=!1;return l&&t.each(e.srces,function(e,t){var n=t.decode.swf;return"videocodecid"in n&&(r=!0),"avc1"!=n.videocodecid||n.avcprofile>66||n.avclevel>30||n.height*n.width>307200?void 0:(o=!0,!1)}),r?!o:!1},message:"Not playable on more than 1% of smartphones: In case you want to support 99% of all devices you need to provide a source encoded with H.264, Baseline Profile (BP), Level 3.0, up to 720 * 404 / 640 * 480. You might want to use multiple sources to satisfy quality and maximum device compatibility."},needsFlashInstalled:{level:1,test:function(e){var r=!1,o=!1;return l||t.each(e.srces,function(t,n){var s=n.declaredContainer||n.computedContainer,a=n.headerContainer||s;return-1!=d.swfMimeTypes.indexOf(s)&&(r=!0),e.element.canPlayType&&("video/youtube"==s||e.element.canPlayType(s)&&e.element.canPlayType(a))?(o=!0,!1):void 0}),r&&!o},message:"While media file could be played by flash plugin, Browser has no flash installed. Use at least a video/mp4 source and install flash. Or add additionally a video/webm file."},hasNoSwfPlayableSrc:{level:1,test:function(e){var r=!1;return t.each(e.srces,function(e,t){var o=t.declaredContainer||t.computedContainer;return-1!=d.swfMimeTypes.indexOf(o)?(r=!0,!1):void 0}),!r},message:"Mediaelement has no source to be played by fallback plugin. Use at least a video/mp4 source."},hasNoNativePlayableSrc:{level:4,test:function(e){var r=!1;return e.element.canPlayType&&t.each(e.srces,function(t,o){var n=o.declaredContainer||o.computedContainer,s=o.headerContainer||n;return"video/youtube"==n||e.element.canPlayType(n)&&e.element.canPlayType(s)?(r=!0,!1):void 0}),!r},message:"Mediaelement has no source to be played native. Use at least a video/mp4 and a video/webm source."},misLeadingAttrMode:{level:2,test:function(e){return e.srces.length>1&&e.srces[0].attrMode},message:"Mediaelement has a src attribute and some source child elements. Only src attribute is used."},emptySrc:{level:2,test:function(e){return e.src&&!e.attrSrc},srcTest:{poster:1,srces:1},message:"The src or poster attribute is an empty string, which is not allowed."}},f=0,h={},v=function(e){var t=this;setTimeout(function(){c(t)},100*e)};e.cfg.extendNative&&void 0,e.addReady(function(e,r){t("video, audio",e).add(r.filter("video, audio")).each(v)}),e.mediaelement.getMediaInfo=c}}(webshim,webshim.$);