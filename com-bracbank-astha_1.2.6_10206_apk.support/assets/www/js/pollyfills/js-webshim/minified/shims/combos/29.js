webshims.register("form-native-extend",function(t,e,r,a){"use strict";var n=e.support;if(n.formvalidation&&!e.bugs.bustedValidity){var i=e.inputTypes,u=!1,s={},o=function(){var e,r=function(){t(this).prop("validity")},a=function(){t("input").each(r)};return function(){clearTimeout(e),e=setTimeout(a,9)}}();e.addInputType=function(r,a){i[r]=a,u=!0,t.isDOMReady&&n.formvalidation&&!e.bugs.bustedValidity&&o()},e.addValidityRule=function(t,e){s[t]=e},t.each({typeMismatch:"mismatch",badInput:"bad"},function(t,r){e.addValidityRule(t,function(e,a,n,u){if(""===a)return!1;var s=u[t];return"type"in n||(n.type=(e[0].getAttribute("type")||"").toLowerCase()),i[n.type]&&i[n.type][r]&&(s=i[n.type][r](a,e)),s||!1})});var p=e.modules["form-number-date-api"],l=p.loaded&&!p.test(),m=["customError","badInput","typeMismatch","rangeUnderflow","rangeOverflow","stepMismatch","tooLong","tooShort","patternMismatch","valueMissing","valid"],d=["value"],f=[],c=function(e){if(e||u){var r=(e.getAttribute&&e.getAttribute("type")||e.type||"").toLowerCase();i[r]&&t.prop(e,"validity")}},N={};if(["input","textarea","select"].forEach(function(r){var a=e.defineNodeNameProperty(r,"setCustomValidity",{prop:{value:function(n){n+="";var i="input"==r?t(this).getNativeElement()[0]:this;a.prop._supvalue.call(i,n),l&&(e.data(i,"hasCustomError",!!n),c(i))}}});N[r]=a.prop._supvalue}),l&&(d.push("min"),d.push("max"),d.push("step"),f.push("input")),l){var b;if(f.forEach(function(r){var a=e.defineNodeNameProperty(r,"validity",{prop:{get:function(){if(!b){var n="input"==r?t(this).getNativeElement()[0]:this,u=a.prop._supget.call(n);if(!u)return u;var o={};if(m.forEach(function(t){o[t]=u[t]||!1}),!t.prop(n,"willValidate"))return o;b=!0;var p,l=t(n),d={type:(n.getAttribute&&n.getAttribute("type")||n.type||"").toLowerCase(),nodeName:(n.nodeName||"").toLowerCase()},f=l.val(),c=!!e.data(n,"hasCustomError");if(b=!1,o.customError=c,o.valid&&o.customError)o.valid=!1;else if(!o.valid){var v=!0;t.each(o,function(t,e){return e?(v=!1,!1):void 0}),v&&(o.valid=!0)}return t.each(s,function(t,a){o[t]=a(l,f,d,o),o[t]&&(o.valid||!p)&&i[d.type]&&(N[r].call(n,e.createValidationMessage(n,t)),o.valid=!1,p=!0)}),o.valid&&(N[r].call(n,""),e.data(n,"hasCustomError",!1)),o}},writeable:!1}})}),d.forEach(function(t){e.onNodeNamesPropertyModify(f,t,function(){c(this)})}),a.addEventListener){var v,h=function(t){"form"in t.target&&(clearTimeout(v),c(t.target))};a.addEventListener("change",h,!0),a.addEventListener("input",function(t){clearTimeout(v),v=setTimeout(function(){c(t.target)},290)},!0)}var g=f.join(",");e.addReady(function(e,r){u&&t(g,e).add(r.filter(g)).each(function(){c(this)})})}e.defineNodeNameProperty("input","type",{prop:{get:function(){var t=this,r=(t.getAttribute&&t.getAttribute("type")||"").toLowerCase();return e.inputTypes[r]?r:t.type}}})}}),webshims.register("form-number-date-api",function(t,e){"use strict";e.addInputType||e.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),e.getStep||(e.getStep=function(e,r){var n=t.attr(e,"step");return"any"===n?n:(r=r||u(e),a[r]&&a[r].step?(n=c.number.asNumber(n),(!isNaN(n)&&n>0?n:a[r].step)*(a[r].stepScaleFactor||1)):n)}),e.addMinMaxNumberToCache||(e.addMinMaxNumberToCache=function(t,e,r){t+"AsNumber"in r||(r[t+"AsNumber"]=a[r.type].asNumber(e.attr(t)),isNaN(r[t+"AsNumber"])&&t+"Default"in a[r.type]&&(r[t+"AsNumber"]=a[r.type][t+"Default"]))});var r=parseInt("NaN",10),a=e.inputTypes,n=function(t){return"number"==typeof t||t&&t==1*t},i=function(e){return t('<input type="'+e+'" />').prop("type")===e},u=function(t){return(t.getAttribute("type")||"").toLowerCase()},s=function(t){return t&&!isNaN(1*t)},o=e.addMinMaxNumberToCache,p=function(t,e){t=""+t,e-=t.length;for(var r=0;e>r;r++)t="0"+t;return t},l=1e-7,m=e.bugs.bustedValidity;e.addValidityRule("stepMismatch",function(t,r,n,i){if(""===r)return!1;if("type"in n||(n.type=u(t[0])),"week"==n.type)return!1;var s,p,m=(i||{}).stepMismatch||!1;if(a[n.type]&&a[n.type].step){if("step"in n||(n.step=e.getStep(t[0],n.type)),"any"==n.step)return!1;if("valueAsNumber"in n||(n.valueAsNumber=a[n.type].asNumber(r)),isNaN(n.valueAsNumber))return!1;o("min",t,n),s=n.minAsNumber,isNaN(s)&&(p=t.prop("defaultValue"))&&(s=a[n.type].asNumber(p)),isNaN(s)&&(s=a[n.type].stepBase||0),m=Math.abs((n.valueAsNumber-s)%n.step),m=!(l>=m||Math.abs(m-n.step)<=l)}return m}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(t){e.addValidityRule(t.name,function(e,r,n,i){var s=(i||{})[t.name]||!1;if(""===r)return s;if("type"in n||(n.type=u(e[0])),a[n.type]&&a[n.type].asNumber){if("valueAsNumber"in n||(n.valueAsNumber=a[n.type].asNumber(r)),isNaN(n.valueAsNumber))return!1;if(o(t.attr,e,n),isNaN(n[t.attr+"AsNumber"]))return s;s=n[t.attr+"AsNumber"]*t.factor<n.valueAsNumber*t.factor-l}return s})}),e.reflectProperties(["input"],["max","min","step"]);var d=e.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var e=this,n=u(e),i=a[n]&&a[n].asNumber?a[n].asNumber(t.prop(e,"value")):d.prop._supget&&d.prop._supget.apply(e,arguments);return null==i&&(i=r),i},set:function(r){var n=this,i=u(n);if(a[i]&&a[i].numberToString){if(isNaN(r))return void t.prop(n,"value","");var s=a[i].numberToString(r);s!==!1?t.prop(n,"value",s):e.error("INVALID_STATE_ERR: DOM Exception 11")}else d.prop._supset&&d.prop._supset.apply(n,arguments)}}}),f=e.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var e=this,r=u(e);return a[r]&&a[r].asDate&&!a[r].noAsDate?a[r].asDate(t.prop(e,"value")):f.prop._supget&&f.prop._supget.call(e)||null},set:function(r){var n=this,i=u(n);if(!a[i]||!a[i].dateToString||a[i].noAsDate)return f.prop._supset&&f.prop._supset.apply(n,arguments)||null;if(null===r)return t.prop(n,"value",""),"";var s=a[i].dateToString(r);return s!==!1?(t.prop(n,"value",s),s):void e.error("INVALID_STATE_ERR: DOM Exception 11")}}});t.each({stepUp:1,stepDown:-1},function(r,n){var i=e.defineNodeNameProperty("input",r,{prop:{value:function(r){var s,o,p,m,d,f,c,N=u(this);if(!a[N]||!a[N].asNumber){if(i.prop&&i.prop._supvalue)return i.prop._supvalue.apply(this,arguments);throw e.info("no step method for type: "+N),"invalid state error"}if(d={type:N},r||(r=1,e.warn("you should always use a factor for stepUp/stepDown")),r*=n,s=e.getStep(this,N),"any"==s)throw e.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";return e.addMinMaxNumberToCache("min",t(this),d),e.addMinMaxNumberToCache("max",t(this),d),o=t.prop(this,"valueAsNumber"),r>0&&!isNaN(d.minAsNumber)&&(isNaN(o)||d.minAsNumber>o)?void t.prop(this,"valueAsNumber",d.minAsNumber):0>r&&!isNaN(d.maxAsNumber)&&(isNaN(o)||d.maxAsNumber<o)?void t.prop(this,"valueAsNumber",d.maxAsNumber):(isNaN(o)&&(o=0),f=d.minAsNumber,isNaN(f)&&(c=t.prop(this,"defaultValue"))&&(f=a[N].asNumber(c)),f||(f=0),s*=r,o=1*(o+s).toFixed(5),p=(o-f)%s,p&&Math.abs(p)>l&&(m=o-p,m+=p>0?s:-s,o=1*m.toFixed(5)),!isNaN(d.maxAsNumber)&&o>d.maxAsNumber||!isNaN(d.minAsNumber)&&o<d.minAsNumber?void e.info("max/min overflow can't apply stepUp/stepDown"):void t.prop(this,"valueAsNumber",o))}}})});var c={number:{bad:function(t){return!n(t)},step:1,stepScaleFactor:1,asNumber:function(t){return n(t)?1*t:r},numberToString:function(t){return n(t)?t:!1}},range:{minDefault:0,maxDefault:100},color:{bad:function(){var t=/^\u0023[a-f0-9]{6}$/;return function(e){return!e||7!=e.length||!t.test(e)}}()},date:{bad:function(t){if(!t||!t.split||!/\d$/.test(t))return!0;var e,r=t.split(/\u002D/);if(3!==r.length)return!0;var a=!1;if(r[0].length<4||2!=r[1].length||r[1]>12||2!=r[2].length||r[2]>33)a=!0;else for(e=0;3>e;e++)if(!s(r[e])){a=!0;break}return a||t!==this.dateToString(this.asDate(t,!0))},step:1,stepScaleFactor:864e5,asDate:function(t,e){return!e&&this.bad(t)?null:new Date(this.asNumber(t,!0))},asNumber:function(t,e){var a=r;return(e||!this.bad(t))&&(t=t.split(/\u002D/),a=Date.UTC(t[0],t[1]-1,t[2])),a},numberToString:function(t){return n(t)?this.dateToString(new Date(1*t)):!1},dateToString:function(t){return t&&t.getFullYear?p(t.getUTCFullYear(),4)+"-"+p(t.getUTCMonth()+1,2)+"-"+p(t.getUTCDate(),2):!1}},time:{bad:function(e,r){if(!e||!e.split||!/\d$/.test(e))return!0;if(e=e.split(/\u003A/),e.length<2||e.length>3)return!0;var a,n=!1;return e[2]&&(e[2]=e[2].split(/\u002E/),a=parseInt(e[2][1],10),e[2]=e[2][0]),t.each(e,function(t,e){return s(e)&&2===e.length?void 0:(n=!0,!1)}),n?!0:e[0]>23||e[0]<0||e[1]>59||e[1]<0?!0:e[2]&&(e[2]>59||e[2]<0)?!0:a&&isNaN(a)?!0:(a&&(100>a?a*=100:10>a&&(a*=10)),r===!0?[e,a]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(t){return t=new Date(this.asNumber(t)),isNaN(t)?null:t},asNumber:function(t){var e=r;return t=this.bad(t,!0),t!==!0&&(e=Date.UTC("1970",0,1,t[0][0],t[0][1],t[0][2]||0),t[1]&&(e+=t[1])),e},dateToString:function(t){if(t&&t.getUTCHours){var e=p(t.getUTCHours(),2)+":"+p(t.getUTCMinutes(),2),r=t.getSeconds();return"0"!=r&&(e+=":"+p(r,2)),r=t.getUTCMilliseconds(),"0"!=r&&(e+="."+p(r,3)),e}return!1}},month:{bad:function(t){return c.date.bad(t+"-01")},step:1,stepScaleFactor:!1,asDate:function(t){return new Date(c.date.asNumber(t+"-01"))},asNumber:function(t){var e=r;return t&&!this.bad(t)&&(t=t.split(/\u002D/),t[0]=1*t[0]-1970,t[1]=1*t[1]-1,e=12*t[0]+t[1]),e},numberToString:function(t){var e,r=!1;return n(t)&&(e=t%12,t=(t-e)/12+1970,e+=1,1>e&&(t-=1,e+=12),r=p(t,4)+"-"+p(e,2)),r},dateToString:function(t){if(t&&t.getUTCHours){var e=c.date.dateToString(t);return e.split&&(e=e.split(/\u002D/))?e[0]+"-"+e[1]:!1}return!1}},"datetime-local":{bad:function(t,e){return t&&t.split&&2===(t+"special").split(/\u0054/).length?(t=t.split(/\u0054/),c.date.bad(t[0])||c.time.bad(t[1],e)):!0},noAsDate:!0,asDate:function(t){return t=new Date(this.asNumber(t)),isNaN(t)?null:t},asNumber:function(t){var e=r,a=this.bad(t,!0);return a!==!0&&(t=t.split(/\u0054/)[0].split(/\u002D/),e=Date.UTC(t[0],t[1]-1,t[2],a[0][0],a[0][1],a[0][2]||0),a[1]&&(e+=a[1])),e},dateToString:function(t,e){return c.date.dateToString(t)+"T"+c.time.dateToString(t,e)}}};!m&&i("range")&&i("time")&&i("month")&&i("datetime-local")||(c.range=t.extend({},c.number,c.range),c.time=t.extend({},c.date,c.time),c.month=t.extend({},c.date,c.month),c["datetime-local"]=t.extend({},c.date,c.time,c["datetime-local"])),["number","month","range","date","time","color","datetime-local"].forEach(function(t){(m||!i(t))&&e.addInputType(t,c[t])}),null==t("<input />").prop("labels")&&e.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var e=this.id,r=t(this).closest("label").filter(function(){var t=this.attributes["for"]||{};return!t.specified||t.value==e});return e&&(r=r.add('label[for="'+e+'"]')),r.get()},writeable:!1}})});