!function(i){function e(e,t,s){s=s||{},s.axesDefaults=s.axesDefaults||{},s.grid=s.grid||{},s.legend=s.legend||{},s.seriesDefaults=s.seriesDefaults||{};var r=!1;if(s.seriesDefaults.renderer===i.jqplot.PyramidRenderer)r=!0;else if(s.series)for(var h=0;h<s.series.length;h++)s.series[h].renderer===i.jqplot.PyramidRenderer&&(r=!0);r&&(s.axesDefaults.renderer=i.jqplot.PyramidAxisRenderer,s.grid.renderer=i.jqplot.PyramidGridRenderer,s.seriesDefaults.pointLabels={show:!1})}function t(){this.plugins.pyramidRenderer&&this.plugins.pyramidRenderer.highlightCanvas&&(this.plugins.pyramidRenderer.highlightCanvas.resetCanvas(),this.plugins.pyramidRenderer.highlightCanvas=null),this.plugins.pyramidRenderer={highlightedSeriesIndex:null},this.plugins.pyramidRenderer.highlightCanvas=new i.jqplot.GenericCanvas,this.eventCanvas._elem.before(this.plugins.pyramidRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pyramidRenderer-highlight-canvas",this._plotDimensions,this)),this.plugins.pyramidRenderer.highlightCanvas.setContext(),this.eventCanvas._elem.bind("mouseleave",{plot:this},function(i){r(i.data.plot)})}function s(i,e,t,s){var r=i.series[e],h=i.plugins.pyramidRenderer.highlightCanvas;h._ctx.clearRect(0,0,h._ctx.canvas.width,h._ctx.canvas.height),r._highlightedPoint=t,i.plugins.pyramidRenderer.highlightedSeriesIndex=e;var a={fillStyle:r.highlightColors[t],fillRect:!1};r.renderer.shapeRenderer.draw(h._ctx,s,a),h=null}function r(i){var e=i.plugins.pyramidRenderer.highlightCanvas;e._ctx.clearRect(0,0,e._ctx.canvas.width,e._ctx.canvas.height);for(var t=0;t<i.series.length;t++)i.series[t]._highlightedPoint=null;i.plugins.pyramidRenderer.highlightedSeriesIndex=null,i.target.trigger("jqplotDataUnhighlight"),e=null}function h(i,e,t,h,a){if(h){var l=[h.seriesIndex,h.pointIndex,h.data],n=jQuery.Event("jqplotDataMouseOver");if(n.pageX=i.pageX,n.pageY=i.pageY,a.target.trigger(n,l),a.series[l[0]].highlightMouseOver&&(l[0]!=a.plugins.pyramidRenderer.highlightedSeriesIndex||l[1]!=a.series[l[0]]._highlightedPoint)){var o=jQuery.Event("jqplotDataHighlight");o.pageX=i.pageX,o.pageY=i.pageY,a.target.trigger(o,l),s(a,h.seriesIndex,h.pointIndex,h.points)}}else null==h&&r(a)}void 0===i.jqplot.PyramidAxisRenderer&&i.ajax({url:i.jqplot.pluginLocation+"jqplot.pyramidAxisRenderer.js",dataType:"script",async:!1}),void 0===i.jqplot.PyramidGridRenderer&&i.ajax({url:i.jqplot.pluginLocation+"jqplot.pyramidGridRenderer.js",dataType:"script",async:!1}),i.jqplot.PyramidRenderer=function(){i.jqplot.LineRenderer.call(this)},i.jqplot.PyramidRenderer.prototype=new i.jqplot.LineRenderer,i.jqplot.PyramidRenderer.prototype.constructor=i.jqplot.PyramidRenderer,i.jqplot.PyramidRenderer.prototype.init=function(e,s){e=e||{},this._type="pyramid",this.barPadding=10,this.barWidth=null,this.fill=!0,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.offsetBars=!1,e.highlightMouseDown&&null==e.highlightMouseOver&&(e.highlightMouseOver=!1),this.side="right",i.extend(!0,this,e),this.renderer.options=e,this._highlightedPoint=null,this._dataColors=[],this._barPoints=[],this.fillAxis="y",this._primaryAxis="_yaxis",this._xnudge=0;var r={lineJoin:"miter",lineCap:"butt",fill:this.fill,fillRect:this.fill,isarc:!1,strokeStyle:this.color,fillStyle:this.color,closePath:this.fill,lineWidth:this.lineWidth};this.renderer.shapeRenderer.init(r);var a=e.shadowOffset;null==a&&(a=this.lineWidth>2.5?1.25*(1+.6*(Math.atan(this.lineWidth/2.5)/.785398163-1)):1.25*Math.atan(this.lineWidth/2.5)/.785398163);var l={lineJoin:"miter",lineCap:"butt",fill:this.fill,fillRect:this.fill,isarc:!1,angle:this.shadowAngle,offset:a,alpha:this.shadowAlpha,depth:this.shadowDepth,closePath:this.fill,lineWidth:this.lineWidth};if(this.renderer.shadowRenderer.init(l),s.postDrawHooks.addOnce(t),s.eventListenerHooks.addOnce("jqplotMouseMove",h),"left"===this.side)for(var n=0,o=this.data.length;o>n;n++)this.data[n][1]=-Math.abs(this.data[n][1])},i.jqplot.PyramidRenderer.prototype.setGridData=function(i){var e=this._xaxis.series_u2p,t=this._yaxis.series_u2p,s=this._plotData;this._prevPlotData;this.gridData=[],this._prevGridData=[];var r,h=s.length,a=!1;for(r=0;h>r;r++)s[r][1]<0&&(this.side="left");for("yMidAxis"===this._yaxis.name&&"right"===this.side&&(this._xnudge=this._xaxis.max/2e3,a=!0),r=0;h>r;r++)null!=s[r][0]&&null!=s[r][1]?this.gridData.push([e(s[r][1]),t(s[r][0])]):null==s[r][0]?this.gridData.push([e(s[r][1]),null]):null==s[r][1]&&this.gridData.push(null,[t(s[r][0])]),0===s[r][1]&&a&&(this.gridData[r][0]=e(this._xnudge))},i.jqplot.PyramidRenderer.prototype.makeGridData=function(i,e){var t,s=this._xaxis.series_u2p,r=this._yaxis.series_u2p,h=[],a=i.length,l=!1;for(t=0;a>t;t++)i[t][1]<0&&(this.side="left");for("yMidAxis"===this._yaxis.name&&"right"===this.side&&(this._xnudge=this._xaxis.max/2e3,l=!0),t=0;a>t;t++)null!=i[t][0]&&null!=i[t][1]?h.push([s(i[t][1]),r(i[t][0])]):null==i[t][0]?h.push([s(i[t][1]),null]):null==i[t][1]&&h.push([null,r(i[t][0])]),0===i[t][1]&&l&&(h[t][0]=s(this._xnudge));return h},i.jqplot.PyramidRenderer.prototype.setBarWidth=function(){var i=0,e=this[this._primaryAxis];i=e.max-e.min;var t=(e.numberTicks,0===this.barPadding?1:0);"xaxis"==e.name||"x2axis"==e.name?this.barWidth=(e._offsets.max-e._offsets.min)/i-this.barPadding+t:this.fill?this.barWidth=(e._offsets.min-e._offsets.max)/i-this.barPadding+t:this.barWidth=(e._offsets.min-e._offsets.max)/i},i.jqplot.PyramidRenderer.prototype.draw=function(e,t,s){var r,h=i.extend({},s),a=void 0!=h.shadow?h.shadow:this.shadow,l=void 0!=h.showLine?h.showLine:this.showLine;void 0!=h.fill?h.fill:this.fill,this._xaxis.series_u2p,this._yaxis.series_u2p;this._dataColors=[],this._barPoints=[],null==this.renderer.options.barWidth&&this.renderer.setBarWidth.call(this);var n,o,d=[];if(l){var g=new i.jqplot.ColorGenerator(this.negativeSeriesColors),p=new i.jqplot.ColorGenerator(this.seriesColors),u=g.get(this.index);this.useNegativeColors||(u=h.fillStyle);for(var f,y=h.fillStyle,x=this._xaxis.series_u2p(this._xnudge),_=this._yaxis.series_u2p(this._yaxis.min),v=this._yaxis.series_u2p(this._yaxis.max),c=this.barWidth,m=c/2,d=[],R=this.offsetBars?m:0,r=0,j=t.length;j>r;r++)if(null!=this.data[r][0])if(f=t[r][1],this._plotData[r][1]<0?this.varyBarColor&&!this._stack&&(this.useNegativeColors?h.fillStyle=g.next():h.fillStyle=p.next()):this.varyBarColor&&!this._stack?h.fillStyle=p.next():h.fillStyle=y,this.fill){this._plotData[r][1]>=0?(n=t[r][0]-x,o=this.barWidth,d=[x,f-m-R,n,o]):(n=x-t[r][0],o=this.barWidth,d=[t[r][0],f-m-R,n,o]),this._barPoints.push([[d[0],d[1]+o],[d[0],d[1]],[d[0]+n,d[1]],[d[0]+n,d[1]+o]]),a&&this.renderer.shadowRenderer.draw(e,d);var C=h.fillStyle||this.color;this._dataColors.push(C),this.renderer.shapeRenderer.draw(e,d,h)}else if(0===r)d=[[x,_],[t[r][0],_],[t[r][0],t[r][1]-m-R]];else if(j-1>r)d=d.concat([[t[r-1][0],t[r-1][1]-m-R],[t[r][0],t[r][1]+m-R],[t[r][0],t[r][1]-m-R]]);else{d=d.concat([[t[r-1][0],t[r-1][1]-m-R],[t[r][0],t[r][1]+m-R],[t[r][0],v],[x,v]]),a&&this.renderer.shadowRenderer.draw(e,d);var C=h.fillStyle||this.color;this._dataColors.push(C),this.renderer.shapeRenderer.draw(e,d,h)}}if(0==this.highlightColors.length)this.highlightColors=i.jqplot.computeHighlightColors(this._dataColors);else if("string"==typeof this.highlightColors){this.highlightColors=[];for(var r=0;r<this._dataColors.length;r++)this.highlightColors.push(this.highlightColors)}},i.jqplot.preInitHooks.push(e)}(jQuery);