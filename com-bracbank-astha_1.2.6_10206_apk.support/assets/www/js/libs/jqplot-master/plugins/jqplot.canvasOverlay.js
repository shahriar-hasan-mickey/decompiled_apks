!function(t){function e(){this.uid=null,this.type=null,this.gridStart=null,this.gridStop=null,this.tooltipWidthFactor=0,this.options={name:null,show:!0,lineWidth:2,lineCap:"round",color:"#666666",shadow:!0,shadowAngle:45,shadowOffset:1,shadowDepth:3,shadowAlpha:"0.07",xaxis:"xaxis",yaxis:"yaxis",showTooltip:!1,showTooltipPrecision:.6,tooltipLocation:"nw",fadeTooltip:!0,tooltipFadeSpeed:"fast",tooltipOffset:4,tooltipFormatString:"%d, %d"}}function i(i){e.call(this),this.type="line";var o={start:[],stop:[]};t.extend(!0,this.options,o,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function o(i){e.call(this),this.type="horizontalLine";var o={y:null,xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null};t.extend(!0,this.options,o,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function s(i){e.call(this),this.type="dashedHorizontalLine";var o={y:null,xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null,dashPattern:[8,8]};t.extend(!0,this.options,o,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function n(i){e.call(this),this.type="verticalLine";var o={x:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null};t.extend(!0,this.options,o,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function a(i){e.call(this),this.type="dashedVerticalLine",this.start=null,this.stop=null;var o={x:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null,dashPattern:[8,8]};t.extend(!0,this.options,o,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function l(e,i,o,s){var n,a,l=e.plugins.canvasOverlay,r=l._tooltipElem,p=i.options;switch(r.html(t.jqplot.sprintf(p.tooltipFormatString,s[0],s[1])),p.tooltipLocation){case"nw":n=o[0]+e._gridPadding.left-r.outerWidth(!0)-p.tooltipOffset,a=o[1]+e._gridPadding.top-p.tooltipOffset-r.outerHeight(!0);break;case"n":n=o[0]+e._gridPadding.left-r.outerWidth(!0)/2,a=o[1]+e._gridPadding.top-p.tooltipOffset-r.outerHeight(!0);break;case"ne":n=o[0]+e._gridPadding.left+p.tooltipOffset,a=o[1]+e._gridPadding.top-p.tooltipOffset-r.outerHeight(!0);break;case"e":n=o[0]+e._gridPadding.left+p.tooltipOffset,a=o[1]+e._gridPadding.top-r.outerHeight(!0)/2;break;case"se":n=o[0]+e._gridPadding.left+p.tooltipOffset,a=o[1]+e._gridPadding.top+p.tooltipOffset;break;case"s":n=o[0]+e._gridPadding.left-r.outerWidth(!0)/2,a=o[1]+e._gridPadding.top+p.tooltipOffset;break;case"sw":n=o[0]+e._gridPadding.left-r.outerWidth(!0)-p.tooltipOffset,a=o[1]+e._gridPadding.top+p.tooltipOffset;break;case"w":n=o[0]+e._gridPadding.left-r.outerWidth(!0)-p.tooltipOffset,a=o[1]+e._gridPadding.top-r.outerHeight(!0)/2;break;default:n=o[0]+e._gridPadding.left-r.outerWidth(!0)-p.tooltipOffset,a=o[1]+e._gridPadding.top-p.tooltipOffset-r.outerHeight(!0)}r.css("left",n),r.css("top",a),p.fadeTooltip?r.stop(!0,!0).fadeIn(p.tooltipFadeSpeed):r.show(),r=null}function r(t,e,i,o){var s=t[0],n=t[1],a=Math.round(i[0]),l=Math.round(i[1]),r=Math.round(e[0]),p=Math.round(e[1]),h=Math.sqrt(Math.pow(a-r,2)+Math.pow(l-p,2)),d=o*h,c=Math.abs((r-a)*(n-l)-(p-l)*(s-a)),u=d>c?!0:!1;return u}function p(t,e,i,o,s){for(var n,a,p=s.plugins.canvasOverlay,h=p.objects,d=h.length,c=!1,u=0;d>u;u++)if(n=h[u],n.options.showTooltip){var f=r([e.x,e.y],n.gridStart,n.gridStop,n.tooltipWidthFactor);if(i=[s.axes[n.options.xaxis].series_p2u(e.x),s.axes[n.options.yaxis].series_p2u(e.y)],f&&null==p.highlightObjectIndex){switch(n.type){case"line":l(s,n,[e.x,e.y],i);break;case"horizontalLine":case"dashedHorizontalLine":l(s,n,[e.x,n.gridStart[1]],[i[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":l(s,n,[n.gridStart[0],e.y],[n.options.x,i[1]])}p.highlightObjectIndex=u,c=!0;break}if(f&&p.highlightObjectIndex!==u){switch(a=p._tooltipElem,n.fadeTooltip?a.fadeOut(n.tooltipFadeSpeed):a.hide(),n.type){case"line":l(s,n,[e.x,e.y],i);break;case"horizontalLine":case"dashedHorizontalLine":l(s,n,[e.x,n.gridStart[1]],[i[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":l(s,n,[n.gridStart[0],e.y],[n.options.x,i[1]])}p.highlightObjectIndex=u,c=!0;break}if(f){switch(n.type){case"line":l(s,n,[e.x,e.y],i);break;case"horizontalLine":case"dashedHorizontalLine":l(s,n,[e.x,n.gridStart[1]],[i[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":l(s,n,[n.gridStart[0],e.y],[n.options.x,i[1]])}c=!0;break}}c||null===p.highlightObjectIndex||(a=p._tooltipElem,n=p.getObject(p.highlightObjectIndex),n.fadeTooltip?a.fadeOut(n.tooltipFadeSpeed):a.hide(),p.highlightObjectIndex=null)}var h=0;t.jqplot.CanvasOverlay=function(e){var i=e||{};if(this.options={show:t.jqplot.config.enablePlugins,deferDraw:!1},this.objects=[],this.objectNames=[],this.canvas=null,this.markerRenderer=new t.jqplot.MarkerRenderer({style:"line"}),this.markerRenderer.init(),this.highlightObjectIndex=null,i.objects)for(var o,s=i.objects,n=0;n<s.length;n++){o=s[n];for(var a in o)switch(a){case"line":this.addLine(o[a]);break;case"horizontalLine":this.addHorizontalLine(o[a]);break;case"dashedHorizontalLine":this.addDashedHorizontalLine(o[a]);break;case"verticalLine":this.addVerticalLine(o[a]);break;case"dashedVerticalLine":this.addDashedVerticalLine(o[a])}}t.extend(!0,this.options,i)},t.jqplot.CanvasOverlay.postPlotInit=function(e,i,o){var s=o||{};this.plugins.canvasOverlay=new t.jqplot.CanvasOverlay(s.canvasOverlay)},i.prototype=new e,i.prototype.constructor=i,o.prototype=new e,o.prototype.constructor=o,s.prototype=new e,s.prototype.constructor=s,n.prototype=new e,n.prototype.constructor=n,a.prototype=new e,a.prototype.constructor=a,t.jqplot.CanvasOverlay.prototype.addLine=function(t){var e=new i(t);e.uid=h++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addHorizontalLine=function(t){var e=new o(t);e.uid=h++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addDashedHorizontalLine=function(t){var e=new s(t);e.uid=h++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addVerticalLine=function(t){var e=new n(t);e.uid=h++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addDashedVerticalLine=function(t){var e=new a(t);e.uid=h++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.removeObject=function(e){if("number"==t.type(e))this.objects.splice(e,1),this.objectNames.splice(e,1);else{var i=t.inArray(e,this.objectNames);-1!=i&&(this.objects.splice(i,1),this.objectNames.splice(i,1))}},t.jqplot.CanvasOverlay.prototype.getObject=function(e){if("number"==t.type(e))return this.objects[e];var i=t.inArray(e,this.objectNames);return-1!=i?this.objects[i]:void 0},t.jqplot.CanvasOverlay.prototype.get=t.jqplot.CanvasOverlay.prototype.getObject,t.jqplot.CanvasOverlay.prototype.clear=function(t){this.canvas._ctx.clearRect(0,0,this.canvas.getWidth(),this.canvas.getHeight())},t.jqplot.CanvasOverlay.prototype.draw=function(e){var i,o,s,n=this.objects,a=this.markerRenderer;if(this.options.show){this.canvas._ctx.clearRect(0,0,this.canvas.getWidth(),this.canvas.getHeight());for(var l=0;l<n.length;l++){i=n[l];var r=t.extend(!0,{},i.options);if(i.options.show)switch(a.shadow=i.options.shadow,i.tooltipWidthFactor=i.options.lineWidth/i.options.showTooltipPrecision,i.type){case"line":a.style="line",r.closePath=!1,o=[e.axes[i.options.xaxis].series_u2p(i.options.start[0]),e.axes[i.options.yaxis].series_u2p(i.options.start[1])],s=[e.axes[i.options.xaxis].series_u2p(i.options.stop[0]),e.axes[i.options.yaxis].series_u2p(i.options.stop[1])],i.gridStart=o,i.gridStop=s,a.draw(o,s,this.canvas._ctx,r);break;case"horizontalLine":if(null!=i.options.y){a.style="line",r.closePath=!1;var p,h,d=e.axes[i.options.xaxis],c=e.axes[i.options.yaxis].series_u2p(i.options.y),u=i.options.xminOffset||i.options.xOffset,f=i.options.xmaxOffset||i.options.xOffset;null!=i.options.xmin?p=d.series_u2p(i.options.xmin):null!=u&&("number"==t.type(u)?p=d.series_u2p(d.min+u):"string"==t.type(u)&&(p=d.series_u2p(d.min)+parseFloat(u))),null!=i.options.xmax?h=d.series_u2p(i.options.xmax):null!=f&&("number"==t.type(f)?h=d.series_u2p(d.max-f):"string"==t.type(f)&&(h=d.series_u2p(d.max)-parseFloat(f))),null!=h&&null!=p&&(i.gridStart=[p,c],i.gridStop=[h,c],a.draw([p,c],[h,c],this.canvas._ctx,r))}break;case"dashedHorizontalLine":for(var x=i.options.dashPattern,y=0,v=0;v<x.length;v++)y+=x[v];if(null!=i.options.y){a.style="line",r.closePath=!1;var p,h,d=e.axes[i.options.xaxis],c=e.axes[i.options.yaxis].series_u2p(i.options.y),u=i.options.xminOffset||i.options.xOffset,f=i.options.xmaxOffset||i.options.xOffset;if(null!=i.options.xmin?p=d.series_u2p(i.options.xmin):null!=u&&("number"==t.type(u)?p=d.series_u2p(d.min+u):"string"==t.type(u)&&(p=d.series_u2p(d.min)+parseFloat(u))),null!=i.options.xmax?h=d.series_u2p(i.options.xmax):null!=f&&("number"==t.type(f)?h=d.series_u2p(d.max-f):"string"==t.type(f)&&(h=d.series_u2p(d.max)-parseFloat(f))),null!=h&&null!=p){i.gridStart=[p,c],i.gridStop=[h,c];for(var g,m=Math.ceil((h-p)/y),O=p,v=0;m>v;v++)for(var b=0;b<x.length;b+=2)g=O+x[b],a.draw([O,c],[g,c],this.canvas._ctx,r),O+=x[b],b<x.length-1&&(O+=x[b+1])}}break;case"verticalLine":if(null!=i.options.x){a.style="line",r.closePath=!1;var _,j,w=e.axes[i.options.yaxis],P=e.axes[i.options.xaxis].series_u2p(i.options.x),L=i.options.yminOffset||i.options.yOffset,k=i.options.ymaxOffset||i.options.yOffset;null!=i.options.ymin?_=w.series_u2p(i.options.ymin):null!=L&&("number"==t.type(L)?_=w.series_u2p(w.min-L):"string"==t.type(L)&&(_=w.series_u2p(w.min)-parseFloat(L))),null!=i.options.ymax?j=w.series_u2p(i.options.ymax):null!=k&&("number"==t.type(k)?j=w.series_u2p(w.max+k):"string"==t.type(k)&&(j=w.series_u2p(w.max)+parseFloat(k))),null!=j&&null!=_&&(i.gridStart=[P,_],i.gridStop=[P,j],a.draw([P,_],[P,j],this.canvas._ctx,r))}break;case"dashedVerticalLine":for(var x=i.options.dashPattern,y=0,v=0;v<x.length;v++)y+=x[v];if(null!=i.options.x){a.style="line",r.closePath=!1;var _,j,w=e.axes[i.options.yaxis],P=e.axes[i.options.xaxis].series_u2p(i.options.x),L=i.options.yminOffset||i.options.yOffset,k=i.options.ymaxOffset||i.options.yOffset;if(null!=i.options.ymin?_=w.series_u2p(i.options.ymin):null!=L&&("number"==t.type(L)?_=w.series_u2p(w.min-L):"string"==t.type(L)&&(_=w.series_u2p(w.min)-parseFloat(L))),null!=i.options.ymax?j=w.series_u2p(i.options.ymax):null!=k&&("number"==t.type(k)?j=w.series_u2p(w.max+k):"string"==t.type(k)&&(j=w.series_u2p(w.max)+parseFloat(k))),null!=j&&null!=_){i.gridStart=[P,_],i.gridStop=[P,j];for(var g,m=Math.ceil((_-j)/y),O=_,v=0;m>v;v++)for(var b=0;b<x.length;b+=2)g=O-x[b],j>g&&(g=j),j>O&&(O=j),a.draw([P,O],[P,g],this.canvas._ctx,r),O-=x[b],b<x.length-1&&(O-=x[b+1])}}}}}},t.jqplot.CanvasOverlay.postPlotDraw=function(){var e=this.plugins.canvasOverlay;e&&e.highlightCanvas&&(e.highlightCanvas.resetCanvas(),e.highlightCanvas=null),e.canvas=new t.jqplot.GenericCanvas,this.eventCanvas._elem.before(e.canvas.createElement(this._gridPadding,"jqplot-overlayCanvas-canvas",this._plotDimensions,this)),e.canvas.setContext(),e.deferDraw||e.draw(this);var i=document.createElement("div");e._tooltipElem=t(i),i=null,e._tooltipElem.addClass("jqplot-canvasOverlay-tooltip"),e._tooltipElem.css({position:"absolute",display:"none"}),this.eventCanvas._elem.before(e._tooltipElem),this.eventCanvas._elem.bind("mouseleave",{elem:e._tooltipElem},function(t){t.data.elem.hide()});var e=null},t.jqplot.postInitHooks.push(t.jqplot.CanvasOverlay.postPlotInit),t.jqplot.postDrawHooks.push(t.jqplot.CanvasOverlay.postPlotDraw),t.jqplot.eventListenerHooks.push(["jqplotMouseMove",p])}(jQuery);