!function(e){e.jqplot.EnhancedLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)},e.jqplot.EnhancedLegendRenderer.prototype=new e.jqplot.TableLegendRenderer,e.jqplot.EnhancedLegendRenderer.prototype.constructor=e.jqplot.EnhancedLegendRenderer,e.jqplot.EnhancedLegendRenderer.prototype.init=function(t){this.numberRows=null,this.numberColumns=null,this.seriesToggle="normal",this.disableIEFading=!0,e.extend(!0,this,t),this.seriesToggle&&e.jqplot.postDrawHooks.push(s)},e.jqplot.EnhancedLegendRenderer.prototype.draw=function(){if(this.show){var s,l=this._series,n="position:absolute;";n+=this.background?"background:"+this.background+";":"",n+=this.border?"border:"+this.border+";":"",n+=this.fontSize?"font-size:"+this.fontSize+";":"",n+=this.fontFamily?"font-family:"+this.fontFamily+";":"",n+=this.textColor?"color:"+this.textColor+";":"",n+=null!=this.marginTop?"margin-top:"+this.marginTop+";":"",n+=null!=this.marginBottom?"margin-bottom:"+this.marginBottom+";":"",n+=null!=this.marginLeft?"margin-left:"+this.marginLeft+";":"",n+=null!=this.marginRight?"margin-right:"+this.marginRight+";":"",this._elem=e('<table class="jqplot-table-legend" style="'+n+'"></table>'),this.seriesToggle&&this._elem.css("z-index","3");var i,o,r=!1,a=!1;this.numberRows?(i=this.numberRows,o=this.numberColumns?this.numberColumns:Math.ceil(l.length/i)):this.numberColumns?(o=this.numberColumns,i=Math.ceil(l.length/this.numberColumns)):(i=l.length,o=1);var d,h,g,p,c,m,b,u,j,q=0;for(d=l.length-1;d>=0;d--)(1==o&&l[d]._stack||l[d].renderer.constructor==e.jqplot.BezierCurveRenderer)&&(a=!0);for(d=0;i>d;d++){for(g=e(document.createElement("tr")),g.addClass("jqplot-table-legend"),a?g.prependTo(this._elem):g.appendTo(this._elem),h=0;o>h;h++){if(q<l.length&&l[q].show&&l[q].showLabel&&(s=l[q],m=this.labels[q]||s.label.toString())){var f=s.color;if(r=a?d==i-1?!1:!0:d>0?!0:!1,b=r?this.rowSpacing:"0",p=e(document.createElement("td")),p.addClass("jqplot-table-legend jqplot-table-legend-swatch"),p.css({textAlign:"center",paddingTop:b}),u=e(document.createElement("div")),u.addClass("jqplot-table-legend-swatch-outline"),j=e(document.createElement("div")),j.addClass("jqplot-table-legend-swatch"),j.css({backgroundColor:f,borderColor:f}),p.append(u.append(j)),c=e(document.createElement("td")),c.addClass("jqplot-table-legend jqplot-table-legend-label"),c.css("paddingTop",b),this.escapeHtml?c.text(m):c.html(m),a?(this.showLabels&&c.prependTo(g),this.showSwatches&&p.prependTo(g)):(this.showSwatches&&p.appendTo(g),this.showLabels&&c.appendTo(g)),this.seriesToggle){var C;("string"==typeof this.seriesToggle||"number"==typeof this.seriesToggle)&&(e.jqplot.use_excanvas&&this.disableIEFading||(C=this.seriesToggle)),this.showSwatches&&(p.bind("click",{series:s,speed:C},t),p.addClass("jqplot-seriesToggle")),this.showLabels&&(c.bind("click",{series:s,speed:C},t),c.addClass("jqplot-seriesToggle"))}r=!0}q++}p=c=u=j=null}}return this._elem};var t=function(t){t.data.series.toggleDisplay(t),t.data.series.canvas._elem.hasClass("jqplot-series-hidden")?(e(this).addClass("jqplot-series-hidden"),e(this).next(".jqplot-table-legend-label").addClass("jqplot-series-hidden"),e(this).prev(".jqplot-table-legend-swatch").addClass("jqplot-series-hidden")):(e(this).removeClass("jqplot-series-hidden"),e(this).next(".jqplot-table-legend-label").removeClass("jqplot-series-hidden"),e(this).prev(".jqplot-table-legend-swatch").removeClass("jqplot-series-hidden"))},s=function(){if(this.legend.renderer.constructor==e.jqplot.EnhancedLegendRenderer&&this.legend.seriesToggle){var t=this.legend._elem.detach();this.eventCanvas._elem.after(t)}}}(jQuery);