!function(i){function t(t,e,s,h){if("horizontal"==this.rendererOptions.barDirection&&(this._stackAxis="x",this._primaryAxis="_yaxis"),1==this.rendererOptions.waterfall){this._data=i.extend(!0,[],this.data);for(var r=0,a=this.rendererOptions.barDirection&&"vertical"!==this.rendererOptions.barDirection&&this.transposedData!==!1?0:1,n=0;n<this.data.length;n++)r+=this.data[n][a],n>0&&(this.data[n][a]+=this.data[n-1][a]);this.data[this.data.length]=1==a?[this.data.length+1,r]:[r,this.data.length+1],this._data[this._data.length]=1==a?[this._data.length+1,r]:[r,this._data.length+1]}if(this.rendererOptions.groups>1){this.breakOnNull=!0;for(var l=this.data.length,o=parseInt(l/this.rendererOptions.groups,10),d=0,n=o;l>n;n+=o)this.data.splice(n+d,0,[null,null]),d++;for(n=0;n<this.data.length;n++)"_xaxis"==this._primaryAxis?this.data[n][0]=n+1:this.data[n][1]=n+1}}function e(t,e,s){for(var h=0;h<this.series.length;h++)this.series[h].renderer.constructor==i.jqplot.BarRenderer&&this.series[h].highlightMouseOver&&(this.series[h].highlightMouseDown=!1)}function s(){this.plugins.barRenderer&&this.plugins.barRenderer.highlightCanvas&&(this.plugins.barRenderer.highlightCanvas.resetCanvas(),this.plugins.barRenderer.highlightCanvas=null),this.plugins.barRenderer={highlightedSeriesIndex:null},this.plugins.barRenderer.highlightCanvas=new i.jqplot.GenericCanvas,this.eventCanvas._elem.before(this.plugins.barRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-barRenderer-highlight-canvas",this._plotDimensions,this)),this.plugins.barRenderer.highlightCanvas.setContext(),this.eventCanvas._elem.bind("mouseleave",{plot:this},function(i){r(i.data.plot)})}function h(i,t,e,s){var h=i.series[t],r=i.plugins.barRenderer.highlightCanvas;r._ctx.clearRect(0,0,r._ctx.canvas.width,r._ctx.canvas.height),h._highlightedPoint=e,i.plugins.barRenderer.highlightedSeriesIndex=t;var a={fillStyle:h.highlightColors[e]};h.renderer.shapeRenderer.draw(r._ctx,s,a),r=null}function r(i){var t=i.plugins.barRenderer.highlightCanvas;t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var e=0;e<i.series.length;e++)i.series[e]._highlightedPoint=null;i.plugins.barRenderer.highlightedSeriesIndex=null,i.target.trigger("jqplotDataUnhighlight"),t=null}function a(i,t,e,s,a){if(s){var n=[s.seriesIndex,s.pointIndex,s.data],l=jQuery.Event("jqplotDataMouseOver");if(l.pageX=i.pageX,l.pageY=i.pageY,a.target.trigger(l,n),a.series[n[0]].highlightMouseOver&&(n[0]!=a.plugins.barRenderer.highlightedSeriesIndex||n[1]!=a.series[n[0]]._highlightedPoint)){var o=jQuery.Event("jqplotDataHighlight");o.pageX=i.pageX,o.pageY=i.pageY,a.target.trigger(o,n),h(a,s.seriesIndex,s.pointIndex,s.points)}}else null==s&&r(a)}function n(i,t,e,s,a){if(s){var n=[s.seriesIndex,s.pointIndex,s.data];if(a.series[n[0]].highlightMouseDown&&(n[0]!=a.plugins.barRenderer.highlightedSeriesIndex||n[1]!=a.series[n[0]]._highlightedPoint)){var l=jQuery.Event("jqplotDataHighlight");l.pageX=i.pageX,l.pageY=i.pageY,a.target.trigger(l,n),h(a,s.seriesIndex,s.pointIndex,s.points)}}else null==s&&r(a)}function l(i,t,e,s,h){var a=h.plugins.barRenderer.highlightedSeriesIndex;null!=a&&h.series[a].highlightMouseDown&&r(h)}function o(i,t,e,s,h){if(s){var r=[s.seriesIndex,s.pointIndex,s.data],a=jQuery.Event("jqplotDataClick");a.pageX=i.pageX,a.pageY=i.pageY,h.target.trigger(a,r)}}function d(i,t,e,s,h){if(s){var a=[s.seriesIndex,s.pointIndex,s.data],n=h.plugins.barRenderer.highlightedSeriesIndex;null!=n&&h.series[n].highlightMouseDown&&r(h);var l=jQuery.Event("jqplotDataRightClick");l.pageX=i.pageX,l.pageY=i.pageY,h.target.trigger(l,a)}}i.jqplot.BarRenderer=function(){i.jqplot.LineRenderer.call(this)},i.jqplot.BarRenderer.prototype=new i.jqplot.LineRenderer,i.jqplot.BarRenderer.prototype.constructor=i.jqplot.BarRenderer,i.jqplot.BarRenderer.prototype.init=function(t,h){this.barPadding=8,this.barMargin=10,this.barDirection="vertical",this.barWidth=null,this.shadowOffset=2,this.shadowDepth=5,this.shadowAlpha=.08,this.waterfall=!1,this.groups=1,this.varyBarColor=!1,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.transposedData=!0,this.renderer.animation={show:!1,direction:"down",speed:3e3,_supported:!0},this._type="bar",t.highlightMouseDown&&null==t.highlightMouseOver&&(t.highlightMouseOver=!1),i.extend(!0,this,t),i.extend(!0,this.renderer,t),this.fill=!0,"horizontal"===this.barDirection&&this.rendererOptions.animation&&null==this.rendererOptions.animation.direction&&(this.renderer.animation.direction="left"),this.waterfall&&(this.fillToZero=!1,this.disableStack=!0),"vertical"==this.barDirection?(this._primaryAxis="_xaxis",this._stackAxis="y",this.fillAxis="y"):(this._primaryAxis="_yaxis",this._stackAxis="x",this.fillAxis="x"),this._highlightedPoint=null,this._plotSeriesInfo=null,this._dataColors=[],this._barPoints=[];var r={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,strokeStyle:this.color,fillStyle:this.color,closePath:this.fill};this.renderer.shapeRenderer.init(r);var g={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,closePath:this.fill};this.renderer.shadowRenderer.init(g),h.postInitHooks.addOnce(e),h.postDrawHooks.addOnce(s),h.eventListenerHooks.addOnce("jqplotMouseMove",a),h.eventListenerHooks.addOnce("jqplotMouseDown",n),h.eventListenerHooks.addOnce("jqplotMouseUp",l),h.eventListenerHooks.addOnce("jqplotClick",o),h.eventListenerHooks.addOnce("jqplotRightClick",d)},i.jqplot.preSeriesInitHooks.push(t),i.jqplot.BarRenderer.prototype.calcSeriesNumbers=function(){for(var t,e,s=0,h=0,r=this[this._primaryAxis],a=0;a<r._series.length;a++)t=r._series[a],t===this&&(e=a),t.renderer.constructor==i.jqplot.BarRenderer&&(s+=t.data.length,h+=1);return[s,h,e]},i.jqplot.BarRenderer.prototype.setBarWidth=function(){var i=0,t=0,e=this[this._primaryAxis],s=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this);i=s[0],t=s[1];var h=e.numberTicks,r=(h-1)/2;return"xaxis"==e.name||"x2axis"==e.name?this._stack?this.barWidth=(e._offsets.max-e._offsets.min)/i*t-this.barMargin:this.barWidth=((e._offsets.max-e._offsets.min)/r-this.barPadding*(t-1)-2*this.barMargin)/t:this._stack?this.barWidth=(e._offsets.min-e._offsets.max)/i*t-this.barMargin:this.barWidth=((e._offsets.min-e._offsets.max)/r-this.barPadding*(t-1)-2*this.barMargin)/t,[i,t]},i.jqplot.BarRenderer.prototype.draw=function(t,e,s){var h,r=i.extend({},s),a=void 0!=r.shadow?r.shadow:this.shadow,n=void 0!=r.showLine?r.showLine:this.showLine;void 0!=r.fill?r.fill:this.fill,this.xaxis,this.yaxis,this._xaxis.series_u2p,this._yaxis.series_u2p;this._dataColors=[],this._barPoints=[],this.renderer.setBarWidth.call(this);var l=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),o=(l[0],l[1]),d=l[2],g=[];if(this._stack?this._barNudge=0:this._barNudge=(-Math.abs(o/2-.5)+d)*(this.barWidth+this.barPadding),n){var p=new i.jqplot.ColorGenerator(this.negativeSeriesColors),u=new i.jqplot.ColorGenerator(this.seriesColors),_=p.get(this.index);this.useNegativeColors||(_=r.fillStyle);var f,c,x,v=r.fillStyle;if("vertical"==this.barDirection){for(var h=0;h<e.length;h++)if(null!=this.data[h][1]){if(g=[],f=e[h][0]+this._barNudge,x=this._stack&&this._prevGridData.length?this._prevGridData[h][1]:this.fillToZero?this._yaxis.series_u2p(0):this.waterfall&&h>0&&h<this.gridData.length-1?this.gridData[h-1][1]:this.waterfall&&0==h&&h<this.gridData.length-1?this._yaxis.min<=0&&this._yaxis.max>=0?this._yaxis.series_u2p(0):this._yaxis.min>0?t.canvas.height:0:this.waterfall&&h==this.gridData.length-1?this._yaxis.min<=0&&this._yaxis.max>=0?this._yaxis.series_u2p(0):this._yaxis.min>0?t.canvas.height:0:t.canvas.height,this.fillToZero&&this._plotData[h][1]<0||this.waterfall&&this._data[h][1]<0?this.varyBarColor&&!this._stack?this.useNegativeColors?r.fillStyle=p.next():r.fillStyle=u.next():r.fillStyle=_:this.varyBarColor&&!this._stack?r.fillStyle=u.next():r.fillStyle=v,!this.fillToZero||this._plotData[h][1]>=0?(g.push([f-this.barWidth/2,x]),g.push([f-this.barWidth/2,e[h][1]]),g.push([f+this.barWidth/2,e[h][1]]),g.push([f+this.barWidth/2,x])):(g.push([f-this.barWidth/2,e[h][1]]),g.push([f-this.barWidth/2,x]),g.push([f+this.barWidth/2,x]),g.push([f+this.barWidth/2,e[h][1]])),this._barPoints.push(g),a&&!this._stack){var b=i.extend(!0,{},r);delete b.fillStyle,this.renderer.shadowRenderer.draw(t,g,b)}var w=r.fillStyle||this.color;this._dataColors.push(w),this.renderer.shapeRenderer.draw(t,g,r)}}else if("horizontal"==this.barDirection)for(var h=0;h<e.length;h++)if(null!=this.data[h][0]){if(g=[],f=e[h][1]-this._barNudge,c=this._stack&&this._prevGridData.length?this._prevGridData[h][0]:this.fillToZero?this._xaxis.series_u2p(0):this.waterfall&&h>0&&h<this.gridData.length-1?this.gridData[h-1][1]:this.waterfall&&0==h&&h<this.gridData.length-1?this._xaxis.min<=0&&this._xaxis.max>=0?this._xaxis.series_u2p(0):this._xaxis.min>0?0:t.canvas.width:this.waterfall&&h==this.gridData.length-1?this._xaxis.min<=0&&this._xaxis.max>=0?this._xaxis.series_u2p(0):this._xaxis.min>0?0:t.canvas.width:0,this.fillToZero&&this._plotData[h][1]<0||this.waterfall&&this._data[h][1]<0?this.varyBarColor&&!this._stack&&(this.useNegativeColors?r.fillStyle=p.next():r.fillStyle=u.next()):this.varyBarColor&&!this._stack?r.fillStyle=u.next():r.fillStyle=v,!this.fillToZero||this._plotData[h][0]>=0?(g.push([c,f+this.barWidth/2]),g.push([c,f-this.barWidth/2]),g.push([e[h][0],f-this.barWidth/2]),g.push([e[h][0],f+this.barWidth/2])):(g.push([e[h][0],f+this.barWidth/2]),g.push([e[h][0],f-this.barWidth/2]),g.push([c,f-this.barWidth/2]),g.push([c,f+this.barWidth/2])),this._barPoints.push(g),a&&!this._stack){var b=i.extend(!0,{},r);delete b.fillStyle,this.renderer.shadowRenderer.draw(t,g,b)}var w=r.fillStyle||this.color;this._dataColors.push(w),this.renderer.shapeRenderer.draw(t,g,r)}}if(0==this.highlightColors.length)this.highlightColors=i.jqplot.computeHighlightColors(this._dataColors);else if("string"==typeof this.highlightColors){var l=this.highlightColors;this.highlightColors=[];for(var h=0;h<this._dataColors.length;h++)this.highlightColors.push(l)}},i.jqplot.BarRenderer.prototype.drawShadow=function(i,t,e){var s,h,r,a,n,l=void 0!=e?e:{},o=(void 0!=l.shadow?l.shadow:this.shadow,void 0!=l.showLine?l.showLine:this.showLine);void 0!=l.fill?l.fill:this.fill,this.xaxis,this.yaxis,this._xaxis.series_u2p,this._yaxis.series_u2p;if(this._stack&&this.shadow){this.renderer.setBarWidth.call(this);var d=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this);if(r=d[0],a=d[1],n=d[2],this._stack?this._barNudge=0:this._barNudge=(-Math.abs(a/2-.5)+n)*(this.barWidth+this.barPadding),o)if("vertical"==this.barDirection){for(var s=0;s<t.length;s++)if(null!=this.data[s][1]){h=[];var g,p=t[s][0]+this._barNudge;g=this._stack&&this._prevGridData.length?this._prevGridData[s][1]:this.fillToZero?this._yaxis.series_u2p(0):i.canvas.height,h.push([p-this.barWidth/2,g]),h.push([p-this.barWidth/2,t[s][1]]),h.push([p+this.barWidth/2,t[s][1]]),h.push([p+this.barWidth/2,g]),this.renderer.shadowRenderer.draw(i,h,l)}}else if("horizontal"==this.barDirection)for(var s=0;s<t.length;s++)if(null!=this.data[s][0]){h=[];var u,p=t[s][1]-this._barNudge;u=this._stack&&this._prevGridData.length?this._prevGridData[s][0]:0,h.push([u,p+this.barWidth/2]),h.push([t[s][0],p+this.barWidth/2]),h.push([t[s][0],p-this.barWidth/2]),h.push([u,p-this.barWidth/2]),this.renderer.shadowRenderer.draw(i,h,l)}}}}(jQuery);