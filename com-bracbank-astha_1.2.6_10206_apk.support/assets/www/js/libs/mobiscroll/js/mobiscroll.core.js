!function(e){function t(t,i){function n(t){if(e.isArray(Y.readonly)){var i=e(".dwwl",j).index(t);return Y.readonly[i]}return Y.readonly}function a(e){var t="",i=Y.height;for(var n in B[e])t+='<li class="dw-v" data-val="'+n+'" style="height:'+i+"px;line-height:"+i+'px;">'+B[e][n]+"</li>";return t}function x(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}function T(t){c=e("li.dw-v",t).eq(0).index(),u=e("li.dw-v",t).eq(-1).index(),f=e("ul",j).index(t),r=Y.height,h=F}function D(e){var t=Y.headerText;return t?"function"==typeof t?t.call(R,e):t.replace(/{value}/i,e):""}function M(){F.temp=Q&&null!==F.val&&F.val!=t.val()||null===F.values?Y.parseValue(t.val()?t.val():"",F):F.values.slice(0),F.setValue(!0)}function I(t,i,n,a,s){Y.validate.call(R,j,n,t),e(".dww ul",j).each(function(a){var l=e(this),d=e('li[data-val="'+F.temp[a]+'"]',l),o=d.index(),r=O(d,o,a,s),c=a==n||void 0===n;F.scroll(e(this),r,c?t:.2,i,a)}),F.change(a)}function O(e,t,i,n){if(!e.hasClass("dw-v")){for(var a=e,s=e,l=0,d=0;a.prev().length&&!a.hasClass("dw-v");)a=a.prev(),l++;for(;s.next().length&&!s.hasClass("dw-v");)s=s.next(),d++;(l>d&&d&&1==!n||!l||!a.hasClass("dw-v")||1==n)&&s.hasClass("dw-v")?(e=s,t+=d):(e=a,t-=l),F.temp[i]=e.attr("data-val")}return t}function E(){function i(){e(".dwc",j).each(function(){"none"!=e(this).css("display")&&(n=e(this).outerWidth(!0),r+=n,c=n>c?n:c)}),n=r>u?c:r,n=e(".dwwr",j).width(n+1).outerWidth(),l=v.outerHeight()}if("inline"!=Y.display){var n,a,s,l,d,o,r=0,c=0,u=e(window).width(),h=window.innerHeight,w=e(window).scrollTop(),v=e(".dw",j),p={},f=void 0===Y.anchor?t:Y.anchor;if(h=h?h:e(window).height(),"modal"==Y.display)i(),s=(u-n)/2,a=w+(h-l)/2;else if("bubble"==Y.display){i();var b=f.offset(),m=e(".dw-arr",j),g=e(".dw-arrw-i",j),y=v.outerWidth();d=f.outerWidth(),s=b.left-(v.outerWidth(!0)-d)/2,s=s>u-y?u-(y+20):s,s=s>=0?s:20,a=b.top-(v.outerHeight()+3),w>a||b.top>w+h?(v.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),a=b.top+f.outerHeight()+3,o=a+v.outerHeight(!0)>w+h||b.top>w+h):v.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),a=a>=w?a:w;var C=b.left+d/2-(s+(y-g.outerWidth())/2);C>g.outerWidth()&&(C=g.outerWidth()),m.css({left:C})}else p.width="100%","top"==Y.display?a=w:"bottom"==Y.display&&(a=w+h-v.outerHeight(),a=a>=0?a:0);p.top=a,p.left=s,v.css(p),e(".dwo, .dw-persp").height(0).height(x()),o&&e(window).scrollTop(a+v.outerHeight(!0)-h)}}function P(e){var t=+e.data("pos"),i=t+1;d(e,i>u?c:i,1)}function L(e){var t=+e.data("pos"),i=t-1;d(e,c>i?u:i,2)}var q,z,A,j,F=this,R=t,t=e(R),Y=e.extend({},S),B=[],U={},Q=t.is("input"),G=!1;F.enable=function(){Y.disabled=!1,Q&&t.prop("disabled",!1)},F.disable=function(){Y.disabled=!0,Q&&t.prop("disabled",!0)},F.scroll=function(e,t,i,n,a){function s(e,t,i,n){return i*Math.sin(e/n*(Math.PI/2))+t}var l=(A-t)*Y.height;if(e.attr("style",(i?H+"-transition:all "+i.toFixed(1)+"s ease-out;":"")+(k?H+"-transform:translate3d(0,"+l+"px,0);":"top:"+l+"px;")),clearInterval(U[a]),i&&void 0!==n){var d=0;U[a]=setInterval(function(){d+=.1,e.data("pos",Math.round(s(d,n,t-n,i))),d>=i&&(clearInterval(U[a]),e.data("pos",t).closest(".dwwl").removeClass("dwa"))},100)}else e.data("pos",t)},F.setValue=function(e,i,n,a){if(a||(F.values=F.temp.slice(0)),G&&e&&I(n),i){var s=Y.formatResult(F.temp);F.val=s,Q&&t.val(s).trigger("change")}},F.validate=function(e,t,i,n){I(e,t,i,!0,n)},F.change=function(t){var i=Y.formatResult(F.temp);"inline"==Y.display?F.setValue(!1,t):e(".dwv",j).html(D(i)),t&&Y.onChange.call(R,i,F)},F.hide=function(i){return Y.onClose.call(R,F.val,F)===!1?!1:(e(".dwtd").prop("disabled",!1).removeClass("dwtd"),t.blur(),void(j&&("inline"!=Y.display&&Y.animate&&!i?(e(".dw",j).addClass("dw-"+Y.animate+" dw-out"),setTimeout(function(){j.remove(),j=null},350)):(j.remove(),j=null),G=!1,e(window).unbind(".dw"))))},F.changeWheel=function(){if(j){var t=0,i=arguments.length;for(var n in Y.wheels)for(var s in Y.wheels[n]){if(e.inArray(t,arguments)>-1){B[t]=Y.wheels[n][s];var l=e("ul",j).eq(t);if(l.html(a(t)),!--i)return E(),void I()}t++}}},F.show=function(i){if(Y.disabled||G)return!1;"top"==Y.display&&(Y.animate="slidedown"),"bottom"==Y.display&&(Y.animate="slideup"),M(),Y.onBeforeShow.call(R,j,F);var l=0,r=Y.height,c="",u="",h="";Y.animate&&!i&&(u='<div class="dw-persp">',h="</div>",c="dw-"+Y.animate+" dw-in");for(var x='<div class="'+Y.theme+" dw-"+Y.display+'">'+("inline"==Y.display?'<div class="dw dwbg dwi"><div class="dwwr">':u+'<div class="dwo"></div><div class="dw dwbg '+c+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(Y.headerText?'<div class="dwv"></div>':"")),C=0;C<Y.wheels.length;C++){x+='<div class="dwc'+("scroller"!=Y.mode?" dwpm":" dwsc")+(Y.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(var D in Y.wheels[C])B[l]=Y.wheels[C][D],x+='<td><div class="dwwl dwrc dwwl'+l+'">'+("scroller"!=Y.mode?'<div class="dwwb dwwbp" style="height:'+r+"px;line-height:"+r+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+r+"px;line-height:"+r+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+D+'</div><div class="dww dwrc" style="height:'+Y.rows*r+"px;min-width:"+Y.width+'px;"><ul>',x+=a(l),x+='</ul><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',l++;x+="</tr></table></div></div>"}x+=("inline"!=Y.display?'<div class="dwbc'+(Y.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+Y.setText+"</span></span>"+(Y.button3?'<span class="dwbw dwb-n"><span class="dwb">'+Y.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+Y.cancelText+"</span></span></div>"+h:'<div class="dwcc"></div>')+"</div></div></div>",j=e(x),I(),"inline"!=Y.display?j.appendTo("body"):t.is("div")?t.html(j):j.insertAfter(t),G=!0,"inline"!=Y.display&&(e(".dwb-s span",j).click(function(){return F.hide(),F.setValue(!1,!0),Y.onSelect.call(R,F.val,F),!1}),e(".dwb-c span",j).click(function(){return F.hide(),Y.onCancel.call(R,F.val,F),!1}),Y.button3&&e(".dwb-n span",j).click(Y.button3),Y.scrollLock&&j.bind("touchmove",function(e){e.preventDefault()}),e("input,select").each(function(){e(this).prop("disabled")||e(this).addClass("dwtd")}),e("input,select").prop("disabled",!0),E(),e(window).bind("resize.dw",E)),j.delegate(".dwwl","DOMMouseScroll mousewheel",function(t){if(!n(this)){t.preventDefault(),t=t.originalEvent;var i=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,a=e("ul",this),s=+a.data("pos"),l=Math.round(s-i);T(a),d(a,l,0>i?1:2)}}).delegate(".dwb, .dwwb",W,function(t){e(this).addClass("dwb-a")}).delegate(".dwwb",W,function(t){var i=e(this).closest(".dwwl");if(!n(i)&&!i.hasClass("dwa")){t.preventDefault(),t.stopPropagation();var a=i.find("ul"),s=e(this).hasClass("dwwbp")?P:L;v=!0,T(a),clearInterval(o),o=setInterval(function(){s(a)},Y.delay),s(a)}}).delegate(".dwwl",W,function(t){t.preventDefault(),n(this)||v||"clickpick"==Y.mode||(w=!0,p=e("ul",this),p.closest(".dwwl").addClass("dwa"),y=+p.data("pos"),T(p),clearInterval(U[f]),b=s(t),g=new Date,m=b,F.scroll(p,y))}),Y.onShow.call(R,j,F),q.init(j,F)},F.init=function(n){q=e.extend({defaults:{},init:C},e.scroller.themes[n.theme?n.theme:Y.theme]),z=e.scroller.i18n[n.lang?n.lang:Y.lang],e.extend(Y,q.defaults,z,i,n),F.settings=Y,A=Math.floor(Y.rows/2);var a=e.scroller.presets[Y.preset];if(t.unbind(".dw"),a){var s=a.call(R,F);e.extend(Y,s,i,n),e.extend(V,s.methods)}void 0!==t.data("dwro")&&(R.readOnly=l(t.data("dwro"))),G&&F.hide(),"inline"==Y.display?F.show():(M(),Q&&Y.showOnFocus&&(t.data("dwro",R.readOnly),R.readOnly=!0,t.bind("focus.dw",function(){F.show()})))},F.values=null,F.val=null,F.temp=null,F.init(i)}function i(e){for(var t in e)if(void 0!==M[e[t]])return!0;return!1}function n(){var e=["Webkit","Moz","O","ms"];for(var t in e)if(i([e[t]+"Transform"]))return"-"+e[t].toLowerCase();return""}function a(e){return x[e.id]}function s(e){return e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches?e.originalEvent?e.originalEvent.changedTouches[0].pageY:e.changedTouches[0].pageY:e.pageY}function l(e){return e===!0||"true"==e}function d(t,i,n,a,s){i=i>u?u:i,i=c>i?c:i;var l=e("li",t).eq(i);h.temp[f]=l.attr("data-val"),h.validate(a?i==s?.1:Math.abs(.1*(i-s)):0,s,f,n)}var o,r,c,u,h,w,v,p,f,b,m,g,y,x={},C=function(){},T=new Date,D=T.getTime(),M=document.createElement("modernizr").style,k=i(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"])&&"webkitPerspective"in document.documentElement.style,H=n(),W="touchstart mousedown",I="touchmove mousemove",O="touchend mouseup",S={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:!0,onBeforeShow:C,onShow:C,onClose:C,onSelect:C,onCancel:C,onChange:C,formatResult:function(e){for(var t="",i=0;i<e.length;i++)t+=(i>0?" ":"")+e[i];return t},parseValue:function(e,t){for(var i=t.settings.wheels,e=e.split(" "),n=[],a=0,s=0;s<i.length;s++)for(var l in i[s]){if(void 0!==i[s][l][e[a]])n.push(e[a]);else for(var d in i[s][l]){n.push(d);break}a++}return n},validate:C},V={init:function(e){return void 0===e&&(e={}),this.each(function(){this.id||(D+=1,this.id="scoller"+D),x[this.id]=new t(this,e)})},enable:function(){return this.each(function(){var e=a(this);e&&e.enable()})},disable:function(){return this.each(function(){var e=a(this);e&&e.disable()})},isDisabled:function(){var e=a(this[0]);return e?e.settings.disabled:void 0},option:function(e,t){return this.each(function(){var i=a(this);if(i){var n={};"object"==typeof e?n=e:n[e]=t,i.init(n)}})},setValue:function(e,t,i,n){return this.each(function(){var s=a(this);s&&(s.temp=e,s.setValue(!0,t,i,n))})},getInst:function(){return a(this[0])},getValue:function(){var e=a(this[0]);return e?e.values:void 0},show:function(){var e=a(this[0]);return e?e.show():void 0},hide:function(){return this.each(function(){var e=a(this);e&&e.hide()})},destroy:function(){return this.each(function(){var t=a(this);t&&(t.hide(),e(this).unbind(".dw"),delete x[this.id],e(this).is("input")&&(this.readOnly=l(e(this).data("dwro"))))})}};e(document).bind(I,function(e){if(w){e.preventDefault(),m=s(e);var t=y+(b-m)/r;t=t>u+1?u+1:t,t=c-1>t?c-1:t,h.scroll(p,t)}}),e(document).bind(O,function(t){if(w){t.preventDefault();var i=new Date-g,n=y+(b-m)/r;if(n=n>u+1?u+1:n,n=c-1>n?c-1:n,300>i){var a=(m-b)/i,s=a*a/.0012;0>m-b&&(s=-s)}else var s=m-b;d(p,Math.round(y-s/r),0,!0,Math.round(n)),w=!1,p=null}v&&(clearInterval(o),v=!1),e(".dwb-a").removeClass("dwb-a")}),e.fn.scroller=function(t){return V[t]?V[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Unknown method"):V.init.apply(this,arguments)},e.scroller={setDefaults:function(t){e.extend(S,t)},presets:{},themes:{},i18n:{}}}(jQuery);