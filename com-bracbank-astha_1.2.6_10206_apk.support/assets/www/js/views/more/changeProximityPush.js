define(["jquery","underscore","Backbone","text!views/more/changeProximityPush.tpl","text!views/more/changeProximityPushSuccess.tpl","collections/more/pushNotifyUpdationCollection"],function(e,t,i,n,s,c){var o=new EncryptedLocalStorage("secret"),r=i.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #submit":"submit","click #cancel":"cancel","click #dis":"dis","click #en":"en"},initialize:function(){},render:function(){hideSpinner(),o.set("currentPage",""),this.$("#mobcontent").html(t.template(n)).i18n()},dis:function(){e("#dis").addClass("active"),e("#en").removeClass("active");var t=e("#dis").val();o.set("value",t),o.set("proximityflagenable","TRUE")},en:function(){e("#dis").removeClass("active"),e("#en").addClass("active");var t=e("#en").val();o.set("value",t),o.set("proximityflagenable","False")},listcompile:function(e){hideSpinner(),o.set("proximityPushFlag",e),this.$("#mobcontent").html(t.template(s,{flag:e})).i18n()},errorresponse:function(){hideSpinner(),openErrorPopup()},submit:function(){var t=e("input[name=option]:checked").val(),t=o.get("value");if(null==t){var i=o.get("proximityPushFlag");t=i}var n=this,s=function(e){n.listcompile(t)},r=function(e){n.errorresponse()};n.collection=new c([],{}),timestamp=(new Date).getTime();var a=(o.get("custno"),o.get("pushNotifyFlag"));e("#en").val();showSpinner(),n.collection.fetch({data:e.param({pushnotify:a,proximitypush:t,requestid:timestamp}),dataType:"json",type:"POST",timeout:parseInt(o.get("calltimeout")),cache:!1,success:function(e){"0000"==ackStatus?s(e):r(e)},error:r})},cancel:function(){i.history.navigate("#/preference")},disposeView:function(e){return i.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return r});