define(["jquery","underscore","Backbone","text!views/more/theme/changetheme.tpl"],function(e,s,c,t){var n=new EncryptedLocalStorage("secret"),i=c.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click .preSel":"selectNewTheme","click #setDefaultTheme":"onDefaultTheme","click #setLightTheme":"onLightTheme","click #setDarkTheme":"onDarkTheme"},initialize:function(){},render:function(){var c="";try{c=getfromStorage("current_theme")}catch(n){c="DEF"}this.$("#mobcontent").html(s.template(t)).i18n(),"DEF"==c||null==c?e("#DEF").attr("checked","checked"):"LIT"==c?e("#LIT").attr("checked","checked"):"DRK"==c&&e("#DRK").attr("checked","checked"),e(".preSel:checked").parents(".thumbnail").addClass("active")},selectNewTheme:function(){e(".preSel:checked").parents(".thumbnail").addClass("active"),e("body").on("click",".preSel",function(s){s.stopPropagation(),e(".preSel").parents(".thumbnail").removeClass("active"),e(this).is(":checked")?e(this).parents(".thumbnail").addClass("active"):e(this).parents(".thumbnail").removeClass("active")})},onDefaultTheme:function(){n.set("selectedThemeToCahnge","default"),this.confirmThemeChange()},onLightTheme:function(){n.set("selectedThemeToCahnge","light"),this.confirmThemeChange()},onDarkTheme:function(){n.set("selectedThemeToCahnge","dark"),this.confirmThemeChange()},confirmThemeChange:function(){function s(e){if(1==e){var s=n.get("selectedThemeToCahnge");"default"==s?c.applyDefaultTheme():"light"==s?c.applyLightTheme():"dark"==s&&c.applyDarkTheme()}}var c=this,t=/iPad|iPhone|iPod|Android/.test(navigator.userAgent);t?navigator.notification.confirm(e.i18n.t("app.more.preference.changethemeConfirm"),s,"",[e.i18n.t("app.mpin.yes"),e.i18n.t("app.mpin.no")]):confirm(e.i18n.t("app.more.preference.changethemeConfirm"))&&s(1)},applyDefaultTheme:function(){"en-US"==e.i18n.lng()?(loadjscssfile("css/style.css","css"),removejscssfile("css/style_en_light.css","css"),removejscssfile("css/style_en_dark.css","css")):(loadjscssfile("css/style_ar.css","css"),removejscssfile("css/style_ar_light.css","css"),removejscssfile("css/style_ar_dark.css","css")),setintoStorage("current_theme","DEF")},applyLightTheme:function(){"en-US"==e.i18n.lng()?(loadjscssfile("css/style_en_light.css","css"),removejscssfile("css/style.css","css"),removejscssfile("css/style_en_dark.css","css")):(loadjscssfile("css/style_ar_light.css","css"),removejscssfile("css/style_ar.css","css"),removejscssfile("css/style_ar_dark.css","css")),setintoStorage("current_theme","LIT")},applyDarkTheme:function(){"en-US"==e.i18n.lng()?(loadjscssfile("css/style_en_dark.css","css"),removejscssfile("css/style.css","css"),removejscssfile("css/style_en_light.css","css")):(loadjscssfile("css/style_ar_dark.css","css"),removejscssfile("css/style_ar.css","css"),removejscssfile("css/style_ar_light.css","css")),setintoStorage("current_theme","DRK")}});return i});