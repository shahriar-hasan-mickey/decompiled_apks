define(["jquery","underscore","Backbone","routers/morerouter","collections/login/ChangeMPINCollections","text!views/more/changeMpinSuccess.tpl"],function(e,t,n,i,r,c){var o=new EncryptedLocalStorage("secret"),s=n.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #home":"home"},initialize:function(){},render:function(){var t=this;o.set("currentPage","transferConfirm");var n=(new Date).getTime(),i=(getDeviceId(),o.get("oldmpin")),c=o.get("newmpin");o.get("confirmmpin");c=EncryptWithDynamicSalt(c,n),i=EncryptWithDynamicSalt(i,n);var s=o.get("uid"),a=o.get("newmpin"),u=o.get("ulpID"),p=u+a;checkSumEncryptMPINN(p);var l=localStorage.getItem("FINALCHECKSUM");s=s.toUpperCase();var h=s+l;h=null==h?"":h,checkSumEncrypt(h);var m=localStorage.getItem("FINALCHECKSUM"),g=function(e){t.changeMpinSuccessCompile()},d=function(e){t.errorresponse()};showSpinner(),t.collection=new r,timestamp=(new Date).getTime(),t.collection.fetch({data:e.param({appchecksum:m,salt:n,newMPIN:l,oldMPIN:i,access_token:o.get("access_token")}),dataType:"json",timeout:parseInt(o.get("calltimeout")),type:"POST",cache:!1,success:function(e){"0000"==ackStatus?(hideSpinner(),g(e)):d(e)}})},changeMpinSuccessCompile:function(){return hideSpinner(),this.$("#mobcontent").html(t.template(c)).i18n(),this},home:function(){showSpinner(),o.set("currentPage",""),n.history.navigate("#/changePasswordVerify")},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});