define(["jquery","underscore","Backbone","routers/estatementrouter","collections/more/estatementCollection","text!views/more/estatement/estatementconfirm.tpl"],function(e,t,n,i,r,o){var c=new EncryptedLocalStorage("secret"),s=n.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #confirm":"Confirm","click #cancel":"Cancel"},initialize:function(){},render:function(){showSpinner();this.subscriptiontemplate()},subscriptiontemplate:function(){return hideSpinner(),this.$("#mobcontent").html(t.template(o)).i18n(),this},Confirm:function(){showSpinner();var t=this,n=function(e){t.resulttemplate()},i=function(e){t.errorresponse()};t.collection=new r([],{});var o="",s=c.get("lang_id");"en-US"==s?o="EN":"en-AR"==s&&(o="AR");var a=c.get("promoid"),u="";u=a?a:"",t.collection.fetch({data:e.param({requestid:timestamp,actionFlag:c.get("actionFlgMore"),campainId:u,language:o}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(c.get("calltimeout")),success:function(e){"0000"==ackStatus?(c.set("stopmailflag","YES"),n(e)):i(e)},error:i})},resulttemplate:function(){hideSpinner(),n.history.navigate("#/estatementresult")},Cancel:function(){showSpinner(),n.history.navigate("#/more")},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});