define(["jquery","underscore","Backbone","routers/morerouter","routers/estatementrouter","collections/more/transferLimitCollections","text!views/more/transferlimit/transferLimit.tpl"],function(e,t,r,n,i,a,o){var s=new EncryptedLocalStorage("secret"),c=r.View.extend({el:"#container",events:{"click #backBtn":"gotoMorePage","keyup #transfer_limit_search_box":"filterTransferLimitList"},initialize:function(){new n,new i},render:function(){var t=this,r=function(e){hideSpinner(),t.loadTransferLimitTemplate()},n=function(e){t.errorresponse()};showSpinner(),t.collection=new a,t.collection.fetch({data:e.param({access_token:s.get("access_token"),newversion:"Y"}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?r(e):n(e)},error:n})},loadTransferLimitTemplate:function(){e("html").removeClass("primarybg hasBoth").addClass("app fntzoom"),this.$el.html(t.template(o))},gotoMorePage:function(){r.history.navigate("#/wealth")},filterTransferLimitList:function(t){t.stopImmediatePropagation();jQuery.expr[":"].contains=function(e,t,r){return jQuery(e).text().toUpperCase().indexOf(r[3].toUpperCase())>=0};var r=t.target.value;r.length>0?(e(".search_clear").is(":visible")||(e(".search_clear").show(),e(".search_clear").on("click",function(){e("#transfer_limit_search_box").val(""),e(".transLimitType").parents().show(),e("#transfer_limit_search_box").focus(),e(".search_clear").hide(),e(".nodata").hide()})),e(".transferLimitType").hide(),e('.transLimitType:contains("'+r+'")').length>0?(e(".nodata").hide(),e('.transLimitType:contains("'+r+'")').parents().show()):e(".nodata").show()):(e(".search_clear").hide(),e(".nodata").hide(),e(".transLimitType").parents().show())},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(e){return r.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return c});