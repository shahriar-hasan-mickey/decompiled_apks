define(["jquery","underscore","Backbone","text!views/moi/moipaymentsTraffic.tpl","collections/moi/moiPaymentsCollections","collections/moi/moiPaymentsTrafficCollections","models/validation/moi/moiValidationModel","views/moi/moipaymentsfee","collections/moi/moibillersubcategorylistCollections","collections/moi/moiComboSelectCollections","collections/moi/moifeeInquiryCollections","collections/moi/moitraficinquiryCollections","routers/moirouter"],function(e,i,r,o,n,a,t,d,s,h,l,p,c){var m=new EncryptedLocalStorage("secret"),u=r.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #service":"submitBiller","change #serviceType":"SelectService","change #apptype":"SelectBillerType","change #licenceType":"LicenseDuration"},initialize:function(){new c},render:function(i,r){var o=this;showSpinner(),"en-US"==e.i18n.lng()?language="EN":"en-AR"==e.i18n.lng()&&(language="AR");var a=function(e){o.moipayments()},t=function(e){o.errorresponse()};o.collection=new n([],{}),o.collection.fetch({data:e.param({serviceid:i,utilitycompany:r,language:language,requestid:timestamp}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?a(e):t(e)},error:t})},disableDIV:function(){e("#appType").hide(),e("#submitbuttons").hide(),e("#traffic :text").each(function(){e(this).val("")}),e("#traffic").hide(),e("#jobCategory").empty(),e("#iqamaTime").empty(),e("#moiRefund :text").each(function(){e(this).val("")}),e("#moiRefund").hide(),e("#bodyType").empty(),e("#newregType").empty(),e("#motorvehicle :text").each(function(){e(this).val("")}),e("#motorvehicle").hide(),e("#civil :text").each(function(){e(this).val("")}),e("#civil").hide(),e("#deportioncontrol :text").each(function(){e(this).val("")}),e("#deportioncontrol").hide(),e("#deportionsentences :text").each(function(){e(this).val("")}),e("#deportionsentences").hide(),e("#passportType").empty(),e("#saudipassport :text").each(function(){e(this).val("")}),e("#saudipassport").hide(),e("#visaType").empty(),e("#labor :text").each(function(){e(this).val("")}),e("#labor").hide(),e("#licenseTime").empty(),e("#licenceType").empty(),e("#drivinglicence :text").each(function(){e(this).val("")}),e("#drivinglicence").hide(),e("#submitbuttons").hide(),e(".traffic,.moiRefund").hide(),e("#civil").hide(),e("#appType").hide(),e("#deportioncontrol").hide(),e("#iqamanumber").hide(),e("#iqamaID").hide(),e("#BeneType").hide(),e("#sponsorID").hide(),e("#deportionsentences").hide(),e("#drivinglicence").hide(),e("#labor").hide(),e("#dates").hide(),e("#motorvehicle").hide(),e("#nationalid").hide(),e("#saudipassport").hide(),e("#licence").hide(),e("#Error_visanumber").hide(),e("#Error_sponsorID").hide(),e("#Error_BorderNumber").hide(),e("#Error_dependentcount").hide(),e("#Error_household").hide(),e("#Error_jobCategory").hide(),e("#Error_iqamaTime").hide(),e("#Error_citizenid").hide(),e("#Error_bodyType").hide(),e("#Error_newregType").hide(),e("#Error_sequenceno").hide(),e("#Error_newownerid").hide(),e("#Error_currentownerid").hide(),e("#Error_customcardno").hide(),e("#Error_hijridate").hide(),e("#Error_hijrimonth").hide(),e("#Error_deporteeid").hide(),e("#Error_passportType").hide(),e("#Error_visano").hide(),e("#Error_visaType").hide(),e("#Error_licenceType").hide(),e("#Error_licenseTime").hide(),e("#Error_licenceId").hide(),e("#Error_iqamaIDlength").hide()},SelectService:function(){e("#secError").hide(),e("#showError").text(""),this.disableDIV();var r=e("#serviceType option:selected").val();e("#chk").val(r.split("~")[0]),e("#billerid").val(r.split("~")[1]);var o=(e(r.split("~"))[1],e("#billerid").val());if(""==o||"undefined"==o)return e("#appType").hide(),!1;var n=this;m.set("service",o),e("#apptype").val(o),"en-US"==e.i18n.lng()?language="EN":"en-AR"==e.i18n.lng()&&(language="AR"),showSpinner();var a=function(e){n.errorresponse()};n.collection=new s([],{}),n.collection.fetch({data:e.param({moiserviceid:o,language:language,requestid:timestamp}),dataType:"json",timeout:parseInt(m.get("calltimeout")),type:"POST",cache:!1,success:function(r){if("0000"==ackStatus){if(e("#apptype").empty(),0!=i.size(billerServiceListDTO)){var o=0;e("#apptype").append('<option id="aptime'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectservicetype")+"</option>"),i.each(billerServiceListDTO,function(i){e("#apptype").append('<option id="aptime'+o+'"value="'+i.strBillerServiceDesc+"~"+i.strBillerServiceCode+'">'+i.strBillerServiceDesc+"</option>"),o++})}e("#appType").show(),hideSpinner()}else a(r)},error:a})},SelectBillerType:function(){e("#secError").hide(),e("#showError").text(""),e("#submitbuttons").hide(),e(".traffic,.moiRefund").hide(),e("#civil").hide(),e("#deportioncontrol").hide(),e("#iqamanumber").hide(),e("#iqamaID").hide(),e("#BeneType").hide(),e("#sponsorID").hide(),e("#deportionsentences").hide(),e("#drivinglicence").hide(),e("#labor").hide(),e("#dates").hide(),e("#motorvehicle").hide(),e("#nationalid").hide(),e("#saudipassport").hide(),e("#licence").hide(),e("#Error_visanumber").hide(),e("#Error_sponsorID").hide(),e("#Error_BorderNumber").hide(),e("#Error_dependentcount").hide(),e("#Error_household").hide(),e("#Error_jobCategory").hide(),e("#Error_iqamaTime").hide(),e("#Error_citizenid").hide(),e("#Error_bodyType").hide(),e("#Error_newregType").hide(),e("#Error_sequenceno").hide(),e("#Error_newownerid").hide(),e("#Error_currentownerid").hide(),e("#Error_customcardno").hide(),e("#Error_hijridate").hide(),e("#Error_hijrimonth").hide(),e("#Error_deporteeid").hide(),e("#Error_passportType").hide(),e("#Error_visano").hide(),e("#Error_visaType").hide(),e("#Error_licenceType").hide(),e("#Error_licenseTime").hide(),e("#Error_licenceId").hide(),e("#Error_iqamaID").hide(),e("#Error_nationalId").hide(),e("#Error_iqamaNumber").hide(),e("#Error_sponsorId").hide(),e("#Error_BorderNumber").hide(),e("#Error_Traffic").hide(),e("#Error_iqamaIDlength").hide(),e("#Error_iqamaIDzeroval").hide(),e("#Error_householdzeroval").hide(),e("#Error_BorderNumberzero").hide(),e("#Error_sponsorIdzeroval").hide(),e("#Error_visanozero").hide(),e("#Error_citizenidzeroval").hide(),e("#Error_visanozero").hide(),e("#Error_visanumberzeroval").hide(),e("#Error_iqamaNumberzero").hide(),e("#Error_licenceIdzero").hide(),e("#Error_sequencenozero").hide(),e("#Error_currentowneridzero").hide(),e("#Error_newowneridzero").hide(),e("#Error_customcardnozero").hide(),e("#Error_nationalIdzero").hide(),e("#Error_nationalIdlength").hide(),e("#Error_Trafficzero").hide(),e("#Error_Trafficlength").hide(),e("#Error_hijridatenull").hide(),e("#Error_hijrimonthnull").hide(),e("#Error_hijridatevalid").hide(),e("#Error_hijrimonthvalid").hide(),e("#Error_hijriyearnull").hide(),e("#Error_hijriyearvalid").hide();var r=this,o=(e("#chk").val(),e("#apptype option:selected").val().split("~")[1]);("014"==o||"012"==o||"015"==o||"013"==o||"005"==o||"004"==o||"001"==o||"016"==o||"002"==o||"003"==o||"008"==o||"009"==o||"011"==o||"010"==o||"007"==o||"006"==o)&&(e(".moiRefund").show(),"014"==o&&(e("#iqamanumber").hide(),e("#visanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#iqamatime").hide(),e("#bordernumber").hide(),e("#citizenid").hide(),e("#iqamaID").show(),e("#dependentcount").show()),"013"==o&&(e("#visanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#iqamatime").hide(),e("#bordernumber").hide(),e("#citizenid").hide(),e("#iqamaID").hide(),e("#nationalid").hide(),e("#household").show(),e("#dependentcount").show(),e("#BeneType").show()),"005"==o&&(e("#iqamanumber").hide(),e("#visanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#iqamatime").hide(),e("#dependentcount").hide(),e("#bordernumber").hide(),e("#citizenid").hide(),e("#iqamaID").show(),e("#BeneType").show()),("008"==o||"004"==o||"012"==o||"015"==o)&&(e("#iqamanumber").hide(),e("#visanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#iqamatime").hide(),e("#dependentcount").hide(),e("#bordernumber").hide(),e("#citizenid").hide(),e("#iqamaID").show(),e("#BeneType").show()),"001"==o&&(e("#iqamaID").hide(),e("#iqamanumber").hide(),e("#visanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#iqamatime").hide(),e("#dependentcount").hide(),e("#citizenid").hide(),e("#bordernumber").show(),e("#BeneType").show()),"016"==o&&(e("#iqamaID").hide(),e("#iqamanumber").hide(),e("#visanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#dependentcount").hide(),e("#iqamatime").show(),e("#citizenid").show(),e("#bordernumber").show(),e("#BeneType").show()),("002"==o||"009"==o)&&(e("#iqamaID").hide(),e("#iqamanumber").hide(),e("#visanumber").hide(),e("#household").hide(),e("#citizenid").hide(),e("#dependentcount").hide(),e("#sponsorID").show(),e("#jobcategory").show(),e("#iqamatime").show(),"002"==o?e("#bordernumber").show():e("#iqamaID").show(),e("#BeneType").show()),"003"==o&&(e("#iqamanumber").hide(),e("#visanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#iqamatime").hide(),e("#dependentcount").hide(),e("#bordernumber").hide(),e("#citizenid").hide(),e("#iqamatime").show(),e("#iqamaID").show(),e("#BeneType").show()),("011"==o||"010"==o||"007"==o)&&(e("#iqamanumber").hide(),e("#visanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#iqamatime").hide(),e("#dependentcount").hide(),e("#bordernumber").hide(),e("#citizenid").hide(),e("#iqamaID").show(),e("#BeneType").show()),"006"==o&&(e("#iqamanumber").hide(),e("#household").hide(),e("#sponsorID").hide(),e("#jobcategory").hide(),e("#iqamatime").hide(),e("#dependentcount").hide(),e("#bordernumber").hide(),e("#citizenid").hide(),e("#visanumber").show(),e("#iqamaID").show(),e("#BeneType").show()),e("#hidBillerType").val("001"),e("#submitbuttons").show()),("017"==o||"018"==o||"019"==o||"020"==o||"021"==o)&&(e("#nationalid").show(),e("#civil").show(),e("#dates").show(),e("#dte").val(""),e("#mnt").val(""),e("#yer").val(""),e("#nationalId").val(""),"017"==o&&e("#hijrilabel").text(e.i18n.t("app.moi.moipayments.dob")),"018"==o&&e("#hijrilabel").text(e.i18n.t("app.moi.moipayments.dod")),"020"==o&&e("#hijrilabel").text(e.i18n.t("app.moi.moipayments.dodv")),"021"==o&&e("#hijrilabel").text(e.i18n.t("app.moi.moipayments.dol")),"019"==o&&e("#hijrilabel").text(e.i18n.t("app.moi.moipayments.dom")),e("#hidBillerType").val("002"),e("#civil").show(),e("#submitbuttons").show()),("046"==o||"047"==o||"050"==o)&&(e("#deporteeId").val(""),e("#iqamanumber").val(""),e("#iqamanumber").show(),e("#deporteeid").hide(),e("#hidBillerType").val("003"),e("#deportionsentences").show(),e("#submitbuttons").show()),("022"==o||"023"==o||"024"==o||"025"==o)&&(e("#hidBillerType").val("004"),e("#drivinglicence").show(),e("#submitbuttons").show()),("038"==o||"039"==o)&&(e("#hidBillerType").val("005"),e("#labor").show(),e("#sponsorID").show(),"039"==o?e("#visatype").show():e("#visatype").hide(),e("#submitbuttons").show()),("032"==o||"031"==o||"030"==o||"029"==o||"028"==o||"043"==o||"042"==o||"026"==o||"027"==o||"044"==o||"045"==o||"049"==o)&&(("032"==o||"027"==o||"049"==o)&&(e("#bodytype").hide(),e("#newregtype").hide(),e("#customcardno").hide(),e("#sequenceno").show(),e("#newownerid").show(),e("#currentownerid").show(),e("#iqamaID").hide()),("031"==o||"030"==o||"029"==o||"028"==o||"026"==o)&&(e("#bodytype").hide(),e("#newregtype").hide(),e("#customcardno").hide(),e("#sequenceno").show(),e("#newownerid").hide(),e("#currentownerid").show(),e("#iqamaID").hide()),("043"==o||"042"==o)&&(e("#bodytype").show(),e("#newregtype").show(),e("#customcardno").show(),e("#sequenceno").hide(),e("#newownerid").hide(),e("#currentownerid").hide(),e("#iqamaID").show()),("044"==o||"045"==o)&&(e("#bodytype").show(),e("#newregtype").show(),e("#customcardno").hide(),e("#sequenceno").show(),e("#newownerid").hide(),e("#currentownerid").hide(),e("#iqamaID").show()),e("#hidBillerType").val("006"),e("#motorvehicle").show(),e("#submitbuttons").show()),("035"==o||"036"==o||"037"==o)&&(e("#hidBillerType").val("007"),e("#saudipassport").show(),e("#nationalid").show(),e("#submitbuttons").show()),("041"==o||"040"==o)&&("041"==o&&(e(".traffic").show(),e("#BeneType").show(),e("#iqamaID").show()),"040"==o&&(e(".traffic").hide(),e("#iqamaID").show()),e("#hidBillerType").val("008"),e("#submitbuttons").show()),"048"==o&&(e("#iqamaID").show(),e("#hidBillerType").val("127"),e("#submitbuttons").show()),showSpinner();var n=function(e){r.errorresponse()};r.collection=new h([],{}),r.collection.fetch({dataType:"json",type:"POST",cache:!1,success:function(r){if("0000"==ackStatus){if(e("#iqamaTime").empty(),e("#jobCategory").empty(),e("#bodyType").empty(),e("#newregType").empty(),e("#passportType").empty(),e("#visaType").empty(),e("#licenceType").empty(),e("#licenseTime").empty(),0!=i.size(BeneficiaryType)){var o=0;e("#benetype").append('<option id="BeneficiaryTypeVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectbenetype")+"</option>"),i.each(BeneficiaryType,function(i){e("#benetype").append('<option id="BeneficiaryTypeVal'+o+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),o++}),e("#benetype").show()}if(0!=i.size(JobCategory)){var o=0;e("#jobCategory").append('<option id="jobCategoryVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectcategory")+"</option>"),i.each(JobCategory,function(i){e("#jobCategory").append('<option id="jobCategoryVal'+o+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),o++}),e("#jobCategory").show()}if(0!=i.size(IqamaTimeDuration)){var o=0;e("#iqamaTime").append('<option id="iqamaTimeVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectiqamaduration")+"</option>"),i.each(IqamaTimeDuration,function(i){e("#iqamaTime").append('<option id="iqamaTimeVal'+o+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),o++}),e("#iqamaTime").show()}if(0!=i.size(VehicleBodyType)){var o=0;e("#bodyType").append('<option id="bodyTypeVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectbodytype")+"</option>"),i.each(VehicleBodyType,function(i){e("#bodyType").append('<option id="bodyTypeVal'+o+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),o++}),e("#bodyType").show()}if(0!=i.size(MotorVehicleRegistrationType)){var o=0;e("#newregType").append('<option id="newregVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectregtype")+"</option>"),i.each(MotorVehicleRegistrationType,function(i){e("#newregType").append('<option id="newregVal'+o+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),o++}),e("#newregType").show()}if(0!=i.size(SaudiPassportType)){var o=0;e("#passportType").append('<option id="selectpassporttypeVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectpassporttype")+"</option>"),i.each(SaudiPassportType,function(i){e("#passportType").append('<option id="selectpassporttypeVal'+o+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),o++}),e("#passportType").show()}if(0!=i.size(LaborImportationVisaType)){var o=0;e("#visaType").append('<option id="visaTypeVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectvisatype")+"</option>"),i.each(LaborImportationVisaType,function(i){e("#visaType").append('<option id="visaTypeVal'+o+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),o++}),e("#visaType").show()}if(0!=i.size(DrivingLicenseType)){var o=0;e("#licenceType").append('<option id="licenceTypeVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectlicense")+"</option>"),i.each(DrivingLicenseType,function(i){e("#licenceType").append('<option id="licenceTypeVal'+o+'"value="'+i.paramCode+"~"+i.paramvalue+'">'+i.paramDesc+"</option>"),o++}),e("#licenceType").show(),e("#licence").show()}0!=i.size(DrivingLicenseDuration)&&(e("#licenseTime").append('<option id="licenseTimeVal'+o+'"value="">'+e.i18n.t("app.moi.moipayments.selectlicenseduration")+"</option>"),m.set("LicenseDuration",DrivingLicenseDuration)),hideSpinner()}else n(r)},error:n})},LicenseDuration:function(){var r=m.get("LicenseDuration"),o=e("#licenceType option:selected").val(),n=o.split("~")[1];if(e("#licenseTime").empty(),e("#licenseTime").append('<option id="licenseTimeVal"value="">'+e.i18n.t("app.moi.moipayments.selectlicenseduration")+"</option>"),-1!=n.indexOf("/")){var a=n.split("/"),t=0;i.each(r,function(i){i.paramCode==a[t]&&(e("#licenseTime").append('<option id="licenseTimeVal'+t+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),t++)})}else{var t=0;i.each(r,function(i){i.paramCode==n&&(e("#licenseTime").append('<option id="licenseTimeVal'+t+'"value="'+i.paramCode+'">'+i.paramDesc+"</option>"),t++)})}},submitBiller:function(i){var r="false";e("#secError").hide(),e("#showError").text(""),e("#Error_visanumber").hide(),e("#Error_sponsorID").hide(),e("#Error_sponsorId").hide(),e("#Error_BorderNumber").hide(),e("#Error_dependentcount").hide(),e("#Error_household").hide(),e("#Error_jobCategory").hide(),e("#Error_iqamaTime").hide(),e("#Error_citizenid").hide(),e("#Error_iqamaID").hide(),e("#Error_bodyType").hide(),e("#Error_newregType").hide(),e("#Error_sequenceno").hide(),e("#Error_newownerid").hide(),e("#Error_currentownerid").hide(),e("#Error_customcardno").hide(),e("#Error_sponsorId").hide(),e("#Error_hijridate").hide(),e("#Error_hijrimonth").hide(),e("#Error_deporteeid").hide(),e("#Error_passportType").hide(),e("#Error_visano").hide(),e("#Error_visaType").hide(),e("#Error_licenceType").hide(),e("#Error_licenseTime").hide(),e("#Error_licenceId").hide(),e("#Error_BorderNumberlength").hide(),e("#Error_visanumberlength").hide(),e("#Error_dependentcountlength").hide(),e("#Error_householdlength").hide(),e("#Error_citizenidlength").hide(),e("#Error_sponsorIDlength").hide(),e("#Error_sequencenolength").hide(),e("#Error_currentowneridlength").hide(),e("#Error_newowneridlength").hide(),e("#Error_customcardnolength").hide(),e("#Error_deporteeidlength").hide(),e("#Error_visanolength").hide(),e("#Error_licenceIdlength").hide(),e("#Error_iqamaNumberlength").hide(),e("#Error_iqamaNumber").hide(),e("#Error_iqamaIDlength").hide(),e("#Error_nationalId").hide(),e("#Error_nationalIdlength").hide(),e("#Error_sponsorIdlength").hide(),e("#Error_iqamaIDzeroval").hide(),e("#Error_dependentcountzeroval").hide(),e("#Error_householdzeroval").hide(),e("#Error_BorderNumberzero").hide(),e("#Error_sponsorIdzeroval").hide(),e("#Error_visanozero").hide(),e("#Error_citizenidzeroval").hide(),e("#Error_visanozero").hide(),e("#Error_visanumberzeroval").hide(),e("#Error_iqamaNumberzero").hide(),e("#Error_licenceIdzero").hide(),e("#Error_sequencenozero").hide(),e("#Error_currentowneridzero").hide(),e("#Error_newowneridzero").hide(),e("#Error_customcardnozero").hide(),e("#Error_nationalIdzero").hide(),e("#Error_Trafficzero").hide(),e("#Error_Trafficlength").hide(),e("#Error_Traffic").hide(),e("#Error_hijridatenull").hide(),e("#Error_hijrimonthnull").hide(),e("#Error_hijridatevalid").hide(),e("#Error_hijrimonthvalid").hide(),e("#Error_hijriyearnull").hide(),e("#Error_hijriyearvalid").hide();var o=e("#hidBillerType").val();if("001"==o&&(e("#visanumber").is(":visible")&&(""==e("#visaNumber").val()?(r="true",e("#Error_visanumber").show()):0==e("#visaNumber").val()?(r="true",e("#Error_visanumberzeroval").show()):10!=e("#visaNumber").val().length&&(r="true",e("#Error_visanumberlength").show())),e("#bordernumber").is(":visible")&&(""==e("#BorderNumber").val()?(r="true",e("#Error_BorderNumber").show()):0==e("#BorderNumber").val()?(r="true",e("#Error_BorderNumberzero").show()):10!=e("#BorderNumber").val().length&&(r="true",e("#Error_BorderNumberlength").show())),e("#dependentcount").is(":visible")&&(""==e("#dependentCount").val()?(r="true",e("#Error_dependentcount").show()):0==e("#dependentCount").val()&&(r="true",e("#Error_dependentcountzeroval").show())),e("#household").is(":visible")&&(""==e("#houseHold").val()?(r="true",e("#Error_household").show()):0==e("#houseHold").val()?(r="true",e("#Error_householdzeroval").show()):10!=e("#houseHold").val().length&&(r="true",e("#Error_householdlength").show())),e("#jobcategory").is(":visible")&&""==e("#jobCategory").val()&&(r="true",e("#Error_jobCategory").show()),e("#iqamatime").is(":visible")&&""==e("#iqamaTime").val()&&(r="true",e("#Error_iqamaTime").show()),e("#citizenid").is(":visible")&&(""==e("#citizenId").val()?(r="true",e("#Error_citizenid").show()):0==e("#citizenId").val()?(r="true",e("#Error_citizenidzeroval").show()):10!=e("#citizenId").val().length&&(r="true",e("#Error_citizenidlength").show()))),"002"==o&&e("#dates").is(":visible")){var n=e("#dte").val(),a=parseInt(n),t=e("#mnt").val(),d=parseInt(t);""==e("#dte").val()?(r="true",e("#Error_hijridatenull").show()):0==e("#dte").val()?(r="true",e("#Error_hijridatevalid").show()):a>30?(r="true",e("#Error_hijridatevalid").show()):""==e("#mnt").val()?(r="true",e("#Error_hijrimonthnull").show()):0==e("#mnt").val()?(r="true",e("#Error_hijrimonthvalid").show()):d>12?(r="true",e("#Error_hijrimonthvalid").show()):""==e("#yer").val()?(r="true",e("#Error_hijriyearnull").show()):0==e("#yer").val()&&(r="true",e("#Error_hijriyearvalid").show())}if("003"==o&&e("#deporteeid").is(":visible")&&(""==e("#deporteeId").val()?(r="true",e("#Error_deporteeid").show()):10!=e("#deporteeId").val().length&&(r="true",e("#Error_deporteeidlength").show())),"004"==o&&(e("#licence").is(":visible")&&""==e("#licenceType").val()&&(r="true",e("#Error_licenceType").show()),e("#licensetime").is(":visible")&&""==e("#licenseTime").val()&&(r="true",e("#Error_licenseTime").show()),e("#licenceid").is(":visible")&&(""==e("#licenceId").val()?(r="true",e("#Error_licenceId").show()):0==e("#licenceId").val()?(r="true",e("#Error_licenceIdzero").show()):10!=e("#licenceId").val().length&&(r="true",e("#Error_licenceIdlength").show()))),"005"==o&&(e("#visano").is(":visible")&&(""==e("#visaNo").val()?(r="true",e("#Error_visano").show()):0==e("#visaNo").val()&&(r="true",e("#Error_visanozero").show())),e("#visatype").is(":visible")&&""==e("#visaType").val()&&(r="true",e("#Error_visaType").show())),"006"==o&&(e("#bodytype").is(":visible")&&""==e("#bodyType").val()&&(r="true",e("#Error_bodyType").show()),e("#newregtype").is(":visible")&&""==e("#newregType").val()&&(r="true",e("#Error_newregType").show()),e("#sequenceno").is(":visible")&&(""==e("#sequenceNo").val()?(r="true",e("#Error_sequenceno").show()):0==e("#sequenceNo").val()?(r="true",e("#Error_sequencenozero").show()):9!=e("#sequenceNo").val().length&&(r="true",e("#Error_sequencenolength").show())),e("#newownerid").is(":visible")&&(""==e("#newownerId").val()?(r="true",e("#Error_newownerid").show()):0==e("#newownerId").val()?(r="true",e("#Error_newowneridzero").show()):10!=e("#newownerId").val().length&&(r="true",e("#Error_newowneridlength").show())),e("#currentownerid").is(":visible")&&(""==e("#currentownerId").val()?(r="true",e("#Error_currentownerid").show()):0==e("#currentownerId").val()?(r="true",e("#Error_currentowneridzero").show()):10!=e("#currentownerId").val().length&&(r="true",e("#Error_currentowneridlength").show())),e("#customcardno").is(":visible")&&(""==e("#customcardNo").val()?(r="true",e("#Error_customcardno").show()):0==e("#customcardNo").val()?(r="true",e("#Error_customcardnozero").show()):10!=e("#customcardNo").val().length&&(r="true",e("#Error_customcardnolength").show()))),"007"==o&&e("#passporttype").is(":visible")&&""==e("#passportType").val()&&(r="true",e("#Error_passportType").show()),e("#iqamanumber").is(":visible")&&(""==e("#iqamaNumber").val()?(r="true",e("#Error_iqamaNumber").show()):0==e("#iqamaNumber").val()?(r="true",e("#Error_iqamaNumberzero").show()):10!=e("#iqamaNumber").val().length&&(r="true",e("#Error_iqamaNumberlength").show())),e("#sponsorID").is(":visible")&&(""==e("#sponsorId").val()?(r="true",e("#Error_sponsorId").show()):0==e("#sponsorId").val()?(r="true",e("#Error_sponsorIdzeroval").show()):10!=e("#sponsorId").val().length&&(r="true",e("#Error_sponsorIdlength").show())),e("#iqamaID").is(":visible")&&(""==e("#iqamaid").val()?(r="true",e("#Error_iqamaID").show()):0==e("#iqamaid").val()?(r="true",e("#Error_iqamaIDzeroval").show()):10!=e("#iqamaid").val().length&&(r="true",e("#Error_iqamaIDlength").show())),e("#nationalid").is(":visible")&&(""==e("#nationalId").val()?(r="true",e("#Error_nationalId").show()):0==e("#nationalId").val()?(r="true",e("#Error_nationalIdzero").show()):10!=e("#nationalId").val().length&&(r="true",e("#Error_nationalIdlength").show())),e("#violID").is(":visible")&&(""==e("#violID").val()?(r="true",e("#Error_Traffic").show()):0==e("#violID").val()?(r="true",e("#Error_Trafficzero").show()):10!=e("#violID").val().length&&(r="true",e("#Error_Trafficlength").show())),"true"==r)return!1;var s=e("#billerid").val(),h=e("#apptype option:selected").val(),c=h.split("~");h=c[1],m.set("selectedBillerid",s),m.set("selectedsubBillerId",h);var u=(m.get("customernumber"),e("#serviceType option:selected").text()),v=e("#apptype option:selected").text(),y="",w="",b="",E="",_="",T="",g="",f="";e("#jobcategory").is(":visible")&&""!=e("#jobCategory").val()&&(y=e("#jobCategory option:selected").text()),e("#iqamatime").is(":visible")&&""!=e("#iqamatime").val()&&(w=e("#iqamatime option:selected").text()),e("#bodyType").is(":visible")&&""!=e("#bodyType").val()&&(b=e("#bodyType option:selected").text()),e("#newregType").is(":visible")&&""!=e("#newregType").val()&&(E=e("#newregType option:selected").text()),e("#passportType").is(":visible")&&""!=e("#passportType").val()&&(_=e("#passportType option:selected").text()),e("#visaType").is(":visible")&&""!=e("#visaType").val()&&(T=e("#visaType option:selected").text()),e("#licenceType").is(":visible")&&""!=e("#licenceType").val()&&(g=e("#licenceType option:selected").text());var I=e("#iqamaTime option:selected").val();e("#licenseTime").is(":visible")&&""!=e("#licenseTime").val()&&(f=e("#licenseTime option:selected").text(),I=e("#licenseTime option:selected").val()),m.set("moiserviceType",u),m.set("moiappType",v);var q="";(""!=e("#dte").val()||"undefined"!=e("#dte").val())&&(q=e("#dte").val()+"/"+e("#mnt").val()+"/"+e("#yer").val(),"//"==q&&(q="")),showSpinner();var D=this;if("040"==h){var z=e("#citizenId").val(),j=e("#violID").val(),N=e("#customcardNo").val(),B=e("#bodyType").val(),C=e("#sponsorId").val(),S=e("#jobCategory").val(),x=e("#dependentCount").val(),V=e("#visaNo").val(),A=e("#visaType").val(),R=e("#visaNumber").val(),q=q,L=e("#sequenceNo").val(),P=e("#newownerId").val(),O=e("#newregType").val(),k=e("#passportType").val(),U=e("#licenceType").val(),H=e("#iqamaid").val(),M=e("#householdNo").val(),F=e("#BorderNumber").val(),J=e("#sequenceNo").val(),Q=e("#currentownerId").val(),Y=(e("#deporteeId").val(),e("#licenceId").val()),$=e("#iqamaNumber").val(),G=e("#nationalId").val(),K=new Array;K[0]=j,K[1]=C,K[2]=R,K[3]=x,K[4]=M,K[5]=y,K[6]=I,K[7]=z,K[8]=F,K[9]=b,K[10]=E,K[11]=J,K[12]=Q,K[13]=P,K[14]=N,K[15]=_,K[16]=V,K[17]=T,K[18]=g,K[19]=f,K[20]=Y,K[21]=$,K[22]=H,K[23]=G,K[24]=u,K[25]=v,K[26]=q,K[27]=f,""!=f&&"null"!=f&&(K[6]=""),m.set("dispmoiIdpayment",K);var W=new Array;W[0]=s,W[1]=h,W[2]=H,W[3]=z,W[4]=j,W[5]=N,W[6]=B,W[7]=C,W[8]=S,W[9]=I,W[10]=x,W[11]=V,W[12]=A,W[13]=R,W[14]=q,W[15]=L,W[16]=P,W[17]=O,W[18]=k,W[19]=U,m.set("moiPayment_Details",W),m.set("moiId",H),showSpinner();var X=function(e){D.moipaymentsconfirm()},Z=function(e){D.errorresponse()};D.collection=new p([],{});(new Date).getTime();"en-US"==e.i18n.lng()?language="EN":"en-AR"==e.i18n.lng()&&(language="AR"),D.collection.fetch({data:e.param({paymentmethod:"ACTDEB",billerid:s,servicecode:h,language:language,requestid:timestamp,iqamano:H,shbaccountnumber:" ",shbaccounttype:"1",beneficiaryname:"MOIFEEINQUIRY",citizid:z,txtviolationid:j,txtvcustomcardno:N,hidbodytype:B,sponsorid:C,hidjobcat:S,hidduration:I,depcnt:x,visacnt:V,hidvisatype:A,visanum:R,hidhirjiformat:q,hidlicensetype:U,vehicleno:L,txtownid:P,hidregtype:O,hidpasstype:k,beneficiaryidtype:"",customertype:"NAT"}),dataType:"json",type:"POST",cache:!1,success:function(i){if("0000"==ackStatus)X(i);else{var r=m.get("errordesc");e("#showError").text(r),e("#secError").show(),hideSpinner()}},error:Z})}else{var X=function(e){D.moipaymentsconfirm()},Z=function(e){D.errorresponse()},ee=e("#nationalId").val();D.collection=new l([],{});(new Date).getTime();"en-US"==e.i18n.lng()?language="EN":"en-AR"==e.i18n.lng()&&(language="AR");var z=e("#citizenId").val(),j=e("#violID").val(),N=e("#customcardNo").val(),B=e("#bodyType").val(),C=e("#sponsorId").val(),S=e("#jobCategory").val(),x=e("#dependentCount").val(),V=e("#visaNo").val(),A=e("#visaType").val(),R=e("#visaNumber").val(),q=q,L=e("#sequenceNo").val(),P=e("#newownerId").val(),O=e("#newregType").val(),k=e("#passportType").val(),U=e("#licenceType").val(),H=e("#iqamaid").val(),$=e("#iqamaNumber").val(),Y=e("#licenceId").val(),Q=e("#currentownerId").val(),ie=e("#licenseTime").val(),re=e("#houseHold").val(),oe=e("#BorderNumber").val(),M=e("#household").val(),F=e("#BorderNumber").val(),re=(e("#deporteeId").val(),e("#houseHold").val());if("undefined"!=typeof U&&""!=U){var ne=U.split("~");U=ne[0]}"undefined"!=typeof C&&""!=C&&("undefined"==typeof ee||""==ee)&&(ee=C),"undefined"!=typeof $&&""!=$&&("undefined"==typeof ee||""==ee)&&(ee=$),"undefined"!=typeof H&&""!=H&&("undefined"==typeof ee||""==ee)&&(ee=H),"undefined"!=typeof Y&&""!=Y&&("undefined"==typeof ee||""==ee)&&(ee=Y),"undefined"!=typeof Q&&""!=Q&&("undefined"==typeof ee||""==ee)&&(ee=Q),"undefined"!=typeof re&&""!=re&&("undefined"==typeof ee||""==ee)&&(ee=re),"undefined"!=typeof oe&&""!=oe&&(("undefined"==typeof ee||""==ee)&&(ee=oe),"undefined"!=typeof C&&""!=C&&(ee=oe)),"undefined"!=typeof ie&&""!=ie&&("undefined"==typeof I||""==I)&&(ie=ie);var K=new Array;K[0]=j,K[1]=C,K[2]=R,K[3]=x,K[4]=M,K[5]=y,K[6]=I,K[7]=z,K[8]=F,K[9]=b,K[10]=E,K[11]=L,K[12]=Q,K[13]=P,K[14]=N,K[15]=_,K[16]=V,K[17]=T,K[18]=g,K[19]=f,K[20]=Y,K[21]=$,K[22]=H,K[23]=G,K[24]=u,K[25]=v,K[26]=q,""!=f&&"null"!=f&&(K[6]=""),m.set("dispmoiIdpayment",K),m.set("moiId",ee);var W=new Array;W[0]=s,W[1]=h,W[2]=ee,W[3]=z,W[4]=j,W[5]=N,W[6]=B,W[7]=C,W[8]=S,W[9]=I,W[10]=x,W[11]=V,W[12]=A,W[13]=R,W[14]=q,W[15]=L,W[16]=P,W[17]=O,W[18]=k,W[19]=U,m.set("moiPayment_Details",W),showSpinner(),D.collection.fetch({data:e.param({paymentmethod:"ACTDEB",billerid:s,servicecode:h,language:language,requestid:timestamp,iqamano:ee,shbaccountnumber:" ",shbaccounttype:"1",beneficiaryname:"MOIFEEINQUIRY",citizid:z,txtviolationid:j,txtvcustomcardno:N,hidbodytype:B,sponsorid:C,hidjobcat:S,hidduration:I,depcnt:x,visacnt:V,hidvisatype:A,visanum:R,hidhirjiformat:q,hidlicensetype:U,vehicleno:L,txtownid:P,hidregtype:O,hidpasstype:k,beneficiaryidtype:"",customertype:"NAT"}),dataType:"json",type:"POST",cache:!1,success:function(i){if("0000"==ackStatus)X(i);else{var r=m.get("errordesc");e("#showError").text(r),e("#secError").show(),hideSpinner()}},error:Z})}},moipayments:function(){hideSpinner(),this.$("#mobcontent").html(i.template(o)).i18n(),this.SelectService()},moipaymentsconfirm:function(){hideSpinner();var i=e("form").serializeArray();m.set("formarray",i),r.history.navigate("#/moipaymentsfee")},errorresponse:function(){hideSpinner(),r.history.navigate("#/exception")},disposeView:function(e){return r.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return u});