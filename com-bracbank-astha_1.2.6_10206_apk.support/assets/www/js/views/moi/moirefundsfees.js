define(["jquery","underscore","Backbone","text!views/moi/moirefundsfee.tpl","collections/moi/moirefundsfeeCollections"],function(e,t,n,r,i){var o=new EncryptedLocalStorage("secret"),c=n.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #submitotp":"onconfirm","click #back":"back"},initialize:function(){},render:function(){var t=this;showSpinner();var n=o.get("segmentvalue"),r=function(e){t.moipaymentsfee()},c=function(e){t.errorresponse()};t.collection=new i([],{}),t.collection.fetch({data:e.param({segment:n,flag:"M",serviceid:"ALL",requestid:timestamp}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?r(e):c(e)},error:c})},onconfirm:function(t){e("#Common_chkboxid").text(e.i18n.t("app.sadad.duebillpay.billisnotselect")),e("#Common_chkboxid").hide(),e("#Error_FrmAcctNo").hide(),e("#Error_CreditCardNo").hide();var r=e("#ModeOfPayment").val(),i=(o.get("selectedBillerid"),o.get("selectedsubBillerId"),e("input[name=frmacno]:checked").val()),c=e("input[name=frmcard]:checked").val(),s="false";if("Account"==r?("undefined"==typeof i||""==i)&&(e("#Error_FrmAcctNo").text(e.i18n.t("app.transfer.ownaccount.fromaccmsg")),e("#Error_FrmAcctNo").show(),s="true"):("undefined"==typeof c||""==c)&&(e("#Error_CreditCardNo").text(e.i18n.t("app.transfer.creditcard.fromccmsg")),e("#Error_CreditCardNo").show(),s="true"),"true"==s)return!1;var a,d,m,u,f;"Account"==r?(a=i,void 0!=a&&(d=a.split("~"),a=d[0],u=d[1],m=d[2],f=a,o.set("fromAccountNUmber",a),o.set("nickName",u)),o.set("paymentmode","ACCOUNT"),o.set("paymentmethod","ACTDEB")):(a=c,void 0!=a&&(d=a.split("~"),a=d[0],u=d[1],m=d[2],f=a,o.set("fromCreditcardNumber",d),o.set("nickName",u)),o.set("paymentmode","CREDITCARD"),o.set("paymentmethod","CCARD")),o.set("dispaccno",f),n.history.navigate("#/moirefundsconfirm")},moipaymentsfee:function(){hideSpinner(),this.$("#mobcontent").html(t.template(r)).i18n()},back:function(){n.history.navigate("#/moipayments")},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return c});