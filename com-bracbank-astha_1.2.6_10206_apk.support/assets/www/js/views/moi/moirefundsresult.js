define(["jquery","underscore","Backbone","text!views/moi/moirefundsresult.tpl","collections/moi/moirefundssubmitCollections","collections/common/otpValidateCollections","models/validation/OTPValidationModel","views/moi/moirefundsresult","views/moi/moirefundsconfirm"],function(e,t,i,n,o,r,s,c,u){var l=new EncryptedLocalStorage("secret"),a=i.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #back":"back"},initialize:function(){},render:function(){var t,i=l.get("selectedBillerid"),n=l.get("selectedsubBillerId"),r=(l.get("paymentmode"),l.get("paymentmethod"),l.get("grouppaymentid"),l.get("pmtid"),l.get("pmtidtype"),l.get("moitotamt"),l.get("currentamount"),l.get("fromAccountNUmber")),s=(l.get("fromCreditcardNumber"),l.get("moiPayment_Details")),c=l.get("dispmoiIdrefund");t=null==s?"0.00":"094"==i&&"026"==n?s[15]:"094"==i&&""!=s[15]?s[15]:"090"==i&&"014"==n?s[2]:"090"==i&&"058"==n?s[2]:"090"==i&&"059"==n?s[2]:""!=s[2]?s[2]:null!=c[8]&&""!=c[8]?s[20]:null!=c[23]&&""!=c[23]?s[2]:null!=c[20]&&""!=c[20]?s[2]:null!=c[1]&&""!=c[1]?s[2]:null!=c[11]&&""!=c[11]?s[15]:null!=c[14]&&""!=c[14]?s[5]:s[21];var u=(l.get("moiVisaDurListIndex"),this);showSpinner();var a=function(e){u.moisubmitpayment()},m=function(e){u.errorresponse()};u.collection=new o([],{}),u.collection.fetch({dataType:"json",data:e.param({billerid:i,serviceType:c[24],subServiceType:c[25],iqamano:t,customerid:"",hidsubservicecode:n,customerno:"",shbaccountnumber:r,customeridtype:"",requestid:timestamp}),type:"POST",cache:!1,success:function(e){"0000"==ackStatus?a(e):m(e)},error:m})},resultpage:function(){hideSpinner(),this.subview=this.disposeView(new c),this.subview.render(),this.undelegateEvents()},moisubmitpayment:function(){hideSpinner(),this.$("#mobcontent").html(t.template(n,{})).i18n()},back:function(){var t=(e("#paymode").text(),e("#no").text()),i=e("#name").text(),n=e("#txnfee").text(),o=e("#totamt").text();this.subview=this.disposeView(new u),this.subview.render(paymentmode,t,i,n,o),e.mobile.loading("hide")},errorresponse:function(){hideSpinner(),i.history.navigate("#/exception")},disposeView:function(e){return i.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return a});