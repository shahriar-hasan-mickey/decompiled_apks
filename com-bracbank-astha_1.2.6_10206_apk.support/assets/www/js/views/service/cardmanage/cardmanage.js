define(["jquery","underscore","Backbone","collections/servicerequest/getCardSummaryCollections","collections/servicerequest/validateRequestCollections","collections/servicerequest/reasonTypeRequestCollections","collections/servicerequest/blockReasonTypeRequestCollections","collections/transfer/getAuthModeCollections","text!views/service/cardmanage/cardmanage.tpl"],function(e,a,r,t,n,i,d,o,l){var s=!1,c="",P="",p=new EncryptedLocalStorage("secret"),_=r.View.extend({el:"#container",events:{"click #generateNewPin":"hideAllDiv","click #foreginTransTq":"hideAllDiv","click #changeExistingPin":"hideAllDiv","click #forgotPin":"hideAllDiv","click #tempBlock":"hideAllDiv","click #tempUNBlock":"hideAllDiv","click #blckndReplc":"hideAllDiv","click #usdPaymentGT":"hideAllDiv","click #debit":"getDebitCardList","click #credit":"getCreditCardList","click #prepaid":"getPrpaidCardList","change #cardList":"showCardStatus","click #cardmanageNextBtn":"gotoCardManageVerifyPage","click #cardmanageBackBtn":"gotoServiceRequestPage","click .currentStatus":"toggleCurrentStatus","click #onTermsandConditions":"termsAndConditionsPopup"},initialize:function(){c="",P=""},update:function(){p.set("cardManage_CardNumber",""),p.set("cardManage_MaskedX_CardNumber",""),p.set("cardManage_CardStatus",""),p.set("changeRequest",""),p.set("cardManage_FromAccNumber",""),p.set("cardMangae_ExpMonth",""),p.set("cardMangae_ExpYear",""),p.set("cardManage_authMode",""),p.set("reasonTempBlck",""),p.set("authRequest",""),p.set("requestreason",""),p.set("reasonTempBlckrpl",""),p.set("changeStatus","");var a=this;showSpinner();var r=function(e){hideSpinner(),a.getBlockReasonList()},t=function(e){a.errorresponse()};a.collection=new i,a.collection.fetch({data:e.param({access_token:p.get("access_token"),newversion:"Y"}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?r(e):t(e)},error:t})},termsAndConditionsPopup:function(e){e.stopImmediatePropagation(),e.preventDefault(),p.set("tandctype","ForeginTransaction_TQ"),openTermsAndConditionsPopup()},getBlockReasonList:function(){var a=this;showSpinner();var r=function(e){hideSpinner(),a.loadCardManagementTemplate()},t=function(e){a.errorresponse()};a.collection=new d,a.collection.fetch({data:e.param({access_token:p.get("access_token")}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?r(e):t(e)},error:t})},loadCardManagementTemplate:function(){var r=this;this.$el.html(a.template(l)),r.populateReasonTypeUI(),p.set("showInputDetails","false"),e("html").removeClass().addClass("app"),e("#cardStatusDiv").hide(),e("#changePinDiv").hide(),e("#forgotPinDiv").hide(),e("#generateNewPinDiv").hide(),e("#newPinExpDateDiv").hide(),e("#changePinExpDateDiv").hide(),e("#forgotPinExpDateDiv").hide(),e("#FOREIGN_TRANS_TQ_Div").hide(),e("#tq_termsAndConditions").hide(),e("#foreignTransTQ_ToggleBtnDiv").html(""),e("#cardmanage_authmodeDiv").html(""),r.loadRadioOption(),p.set("cardType","CC"),r.getCardListDTO();var t=p.get("device.platform");"Android"==t?this.datefunc():this.datefunc()},datefunc:function(a){e("#usdPGT_FromDateErr").html(""),e("#usdPGT_ToDateErr").html(""),e(".nativedatepicker").focus(function(a){e(this).blur(),a.preventDefault(),a.stopImmediatePropagation();var r,t=e(this),n=t.attr("id");if("usdPGT_FromTime"==n){var i=e("#usdPGT_FromDate").val();if(isNull(i))return e("#usdPGT_FromDateErr").html("Please select a From Date"),!1}else if("usdPGT_ToTime"==n){var d=e("#usdPGT_ToDate").val();if(isNull(d))return e("#usdPGT_ToDateErr").html("Please select a To Date"),!1}if(""!==t.val()){var o=t.val(),l=t.parents(".form-group").last().find(".row").find(".col-xs-6").first("input").children(".form-group").children("input").attr("id"),s=e("#"+l).val(),c=s.split("-"),P=o.split(" ");P=P[0],P=P.split(":");var p=new Date(c[2],c[1],c[0],P[0],P[1]);r=Date.parse(p)}else a.preventDefault(),r=new Date,e(this).blur();"number"==typeof r&&(r=new Date(r)),window.plugins.datePicker.show({date:r,mode:"time",is24Hour:!0,locale:"en_GB",allowOldDates:!1,allowFutureDates:!0},function(e){if(e){var a=new Date(e),r=(a.getDate(),a.getMonth()+1,a.getFullYear(),a.getHours()),n=a.getMinutes(),i=(9>=r?"0"+r:r)+":"+(9>=n?"0"+n:n);t.val(i)}t.blur()})})},populateReasonTypeUI:function(){var a=p.get("reasontypelist");e("#reasonListDiv").html("");var r="";!isNull(a)&&a.length>0&&(r+='<div class="custRadio_pass card_management_over">',e.each(a,function(e,a){"GENERATE_NEW_PIN"==a.code?(img="debit",divId="generateNewPin"):"FOREIGN_TRANS_TQ"==a.code?(img="credit",divId="foreginTransTq"):"CHANGE_EXISTING_PIN"==a.code?(img="credit",divId="changeExistingPin"):"FORGOT_PIN"==a.code?(img="prepaid",divId="forgotPin"):"BLOCK_TEMP"==a.code?(img="credit",divId="tempBlock"):"UNBLOCK_TEMP"==a.code?(img="prepaid",divId="tempUNBlock"):"BLOCK_REPLACE"==a.code?(img="prepaid",divId="blckndReplc"):"USD_PAYMENT_GATEWAY"==a.code&&(img="prepaid",divId="usdPaymentGT"),r+='<div class="box"><div class="radio"><label>',r+=0==e?'<input type="radio" name="requestreason" id="'+divId+'" value="'+a.code+'" checked>':'<input type="radio" name="requestreason" id="'+divId+'" value="'+a.code+'">',r+='<div class="row bg"><div class="col-xs-12 p0"><span class="menu_icon ico-xs '+img+'"></span><span class="small">'+a.description+"</span></div></div></label></div></div>"}),r+="</div>"),e("#reasonListDiv").html(r)},loadExpireYear:function(a){var r="",t=new Date;e("#"+a).html(""),r+="<option value='' selected='selected'>Year</option>";for(var n=t.getFullYear(),i=n.toString().slice(2,4),d=parseInt(i);d<=parseInt(i)+10;d++)r+="<option value="+d+">"+d+"</option>";e("#"+a).html(r)},showInpuDetails:function(a){a.stopImmediatePropagation(),p.set("showInputDetails","true");var r=this,t=e("input[name='requestreason']:checked").val();if("CHANGE_EXISTING_PIN"==t){p.set("authModeReqType","CEP"),r.showChangePinDiv(a),e("#changePinExpDateDiv").show(),r.loadExpireYear("changePin_cardManage_ExpYear"),r.loadAuthMode(a),e("#changePin_cardManage_ExpYear").val(""),e("#changePin_cardManage_ExpMonth").val(""),e("#changePin_cardManage_ExpYearErr").html(""),e("#changePin_cardManage_ExpMonthErr").html("");var n=e("#cardList option:selected").html(),i=e("#cardList option:selected").val();if(""!==i){var d=n.split("-");e("#changePin_card_first").html(d[0]),e("#changePin_card_last").html(d[3])}e("#cardManageNotesUIDiv").hide();var o=e.parseJSON(window.localStorage.getItem("shortNotesObj"));isNull(o.CHANGE_EXISTING_PIN)||(e("#cardManageNotesUIDiv").show(),e("#cardManageNotesDiv").html(o.CHANGE_EXISTING_PIN))}else if("FORGOT_PIN"==t){p.set("authModeReqType","FP"),r.showForgotPinDiv(a),e("#forgotPinExpDateDiv").show(),r.loadExpireYear("forgotPin_cardManage_ExpYear"),r.loadAuthMode(a),e("#forgotPin_cardManage_ExpYear").val(""),e("#forgotPin_cardManage_ExpMonth").val(""),e("#forgotPin_cardManage_ExpYearErr").html(""),e("#forgotPin_cardManage_ExpMonthErr").html(""),e("#blockReasonErr").html("");var n=e("#cardList option:selected").html(),i=e("#cardList option:selected").val();if(""!==i){var d=n.split("-");e("#forgotPin_card_first").html(d[0]),e("#forgotPin_card_last").html(d[3])}e("#cardManageNotesUIDiv").hide();var o=e.parseJSON(window.localStorage.getItem("shortNotesObj"));isNull(o.FORGOT_PIN)||(e("#cardManageNotesUIDiv").show(),e("#cardManageNotesDiv").html(o.FORGOT_PIN))}else if("GENERATE_NEW_PIN"==t){p.set("authModeReqType","GENERATE_NEW_PIN"),r.showGeneratePinDiv(a),e("#newPinExpDateDiv").show(),r.loadExpireYear("newPin_cardManage_ExpYear"),r.loadAuthMode(a),e("#newPin_cardManage_ExpYear").val(""),e("#newPin_cardManage_ExpMonth").val(""),e("#newPin_cardManage_ExpYearErr").html(""),e("#newPin_cardManage_ExpMonthErr").html(""),e("#blockReasonErr").html("");var n=e("#cardList option:selected").html(),i=e("#cardList option:selected").val();if(""!==i){var d=n.split("-");e("#generatePin_card_first").html(d[0]),e("#generatePin_card_last").html(d[3])}e("#cardManageNotesUIDiv").hide();var o=e.parseJSON(window.localStorage.getItem("shortNotesObj"));isNull(o.GENERATE_NEW_PIN)||(e("#cardManageNotesUIDiv").show(),e("#cardManageNotesDiv").html(o.GENERATE_NEW_PIN))}else if("BLOCK_TEMP"==t){p.set("authModeReqType","BLOCK_TEMP"),r.showTempBlckDiv(a),e("#newPinExpDateDiv").show(),r.loadAuthMode(a);var n=e("#cardList option:selected").html(),i=e("#cardList option:selected").val();e("#cardManageNotesUIDiv").hide();var o=e.parseJSON(window.localStorage.getItem("shortNotesObj"))}else if("UNBLOCK_TEMP"==t){p.set("authModeReqType","UNBLOCK_TEMP"),r.showTempUNBlckDiv(a),e("#newPinExpDateDiv").show(),r.loadAuthMode(a);var n=e("#cardList option:selected").html(),i=e("#cardList option:selected").val();e("#cardManageNotesUIDiv").hide();var o=e.parseJSON(window.localStorage.getItem("shortNotesObj"))}else if("BLOCK_REPLACE"==t){p.set("authModeReqType","BLOCK_REPLACE"),r.showblckndReplcDiv(a),e("#newPinExpDateDiv").show(),r.loadAuthMode(a);var n=e("#cardList option:selected").html(),i=e("#cardList option:selected").val();e("#cardManageNotesUIDiv").hide();var o=e.parseJSON(window.localStorage.getItem("shortNotesObj"))}else if("ACTV_NCRD"==t)p.set("authModeReqType","ACTV_NCRD"),r.showactNCrdExpDateDiv(a),e("#actNCrdExpDateDiv").show(),r.loadExpireYear("AcrNcrd_cardManage_ExpYear"),r.loadAuthMode(a),e("#blockReasonErr").html(""),e("#cardManageNotesUIDiv").hide();else if("USD_PAYMENT_GATEWAY"==t){p.set("authModeReqType","USD_PAYMENT_GATEWAY"),r.showUSDPaymentGatewayDiv(a),r.loadAuthMode(a);var n=e("#cardList option:selected").html(),i=e("#cardList option:selected").val();e("#cardManageNotesUIDiv").hide()}else if("FOREIGN_TRANS_TQ"==t){p.set("authModeReqType","FOREIGN_TRANS_TQ"),r.loadAuthMode(a),e("#FOREIGN_TRANS_TQ_Div").show(),e("#tq_termsAndConditions").show(),e("#foreignTransTQ_ToggleBtnDiv").html("");var l="";l+='<div class="form-group"><label>Change Status</label><br><div class="btn-group" data-toggle="buttons">',l+="ON"==p.get("currentForeignStatus")?'<label class="btn btn-primary active"><input type="radio" name="TQStatus_options" id="off" value="OFF" checked> OFF</label>':'<label class="btn btn-primary active"><input type="radio" name="TQStatus_options" id="on" value="ON" checked> ON</label> ',l+="</div></div>",e("#foreignTransTQ_ToggleBtnDiv").html(l)}else r.hideAllDiv(a)},loadAuthMode:function(a){a.stopImmediatePropagation();var r=this;p.set("IsAuthMode","false"),e("#cardmanage_authmodeDiv").html("");var t=function(e){hideSpinner();var a=p.get("securitySettingList");!isNull(a)&&a.length>0?p.set("IsAuthMode","true"):(p.set("alertType",null),p.set("IsAuthMode","false")),r.populateAuthMode()},n=function(e){hideSpinner(),p.set("IsAuthMode","false"),r.populateAuthMode()};r.collection=new o,r.collection.fetch({data:e.param({access_token:p.get("access_token"),transactionAmount:null,tenantServiceCode:p.get("authModeReqType")}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?t(e):n(e)},error:n})},populateAuthMode:function(a){var r="",t="",n=p.get("securitySettingList"),i="<label for='username'>"+e.i18n.t("app.transfer.managebeneficiary.selectauthorisationmode")+"</label>";i+="<div class='custRadio_pass'>",!isNull(n)&&n.length>0?(e("#cardmanage_authmodeDiv").html(""),e.each(n,function(a,n){"SMS"==n?(r="sms",t=e.i18n.t("app.transfer.managebeneficiary.sms")):"EMAIL"==n?(r="mail",t=e.i18n.t("app.transfer.managebeneficiary.mail")):"TOKEN"==n?(r="fScan",t=e.i18n.t("app.transfer.managebeneficiary.token")):"ESIGN"==n&&(r="esign",t=e.i18n.t("app.transfer.managebeneficiary.esign")),i+='<div class="box"><div class="radio"><label>',i+=0==a?'<input type="radio" name="cardmanage_authmode" id="optionsRadios'+a+'" value="'+n+'" checked>':'<input type="radio" name="cardmanage_authmode" id="optionsRadios'+a+'" value="'+n+'">',i+='<div class="row bg"><div class="col-xs-12 p0"><span class="menu_icon ico-xs '+r+'"></span><span class="small">'+t+"</span></div></div></label></div></div>"}),e("#cardmanage_authmodeDiv").html(i)):e("#cardmanage_authmodeDiv").html("")},showChangePinDiv:function(a){a.stopImmediatePropagation(),e("#changePinDiv").show(),e("#forgotPinDiv").hide(),e("#tempBlckDiv").hide(),e("#tempUNBlockDiv").hide(),e("#actNEwCRDDiv").hide(),e("#blckndReplcDiv").hide(),e("#generateNewPinDiv").hide(),e("#changePin_CardNumber").attr("disabled",!1),e("#changePin_cardNumError").attr("disabled",!1),e("#changePin_cardpin").attr("disabled",!1),e("#changePin_cardpinError").attr("disabled",!1),e("#changePin_oldpin").attr("disabled",!1),e("#changePin_oldPinError").attr("disabled",!1),e("#changePin_newpin").attr("disabled",!1),e("#changePin_newPinError").attr("disabled",!1),e("#changePin_confirmpin").attr("disabled",!1),e("#changePin_confirmPinError").attr("disabled",!1),e("#forgotPin_CardNumber").val(""),e("#forgotPin_cardNumError").html(""),e("#forgotPin_cardpin").val(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newpin").val(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmpin").val(""),e("#forgotPin_confirmPinError").html(""),e("#forgotPin_CardNumber").attr("disabled",!0),e("#forgotPin_cardNumError").attr("disabled",!0),e("#forgotPin_cardpin").attr("disabled",!0),e("#forgotPin_cardpinError").attr("disabled",!0),e("#forgotPin_newpin").attr("disabled",!0),e("#forgotPin_newPinError").attr("disabled",!0),e("#forgotPin_confirmpin").attr("disabled",!0),e("#forgotPin_confirmPinError").attr("disabled",!0),e("#generatePin_CardNumber").val(""),e("#generatePin_cardNumError").html(""),e("#generatePin_cardpin").val(""),e("#generatePin_cardpinError").html(""),e("#generatePin_newpin").val(""),e("#generatePin_newPinError").html(""),e("#generatePin_confirmpin").val(""),e("#genratePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!0),e("#generatePin_cardNumError").attr("disabled",!0),e("#generatePin_cardpin").attr("disabled",!0),e("#generatePin_cardpinError").attr("disabled",!0),e("#generatePin_newpin").attr("disabled",!0),e("#generatePin_newPinError").attr("disabled",!0),e("#generatePin_confirmpin").attr("disabled",!0),e("#genratePin_confirmPinError").attr("disabled",!0),e("#changePin_cardpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#changePin_oldpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#changePin_newpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#changePin_confirmpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#usdPaymentGTDiv").hide(),e("#usdPGT_EnabledStatusDiv").hide(),e(".currentStatus").attr("disabled",!0),e("#usdPGT_FromDate").attr("disabled",!0),e("#usdPGT_ToDate").attr("disabled",!0),e("#usdPGT_FromTime").attr("disabled",!0),e("#usdPGT_ToTime").attr("disabled",!0),e("#usdPGT_cardPin").attr("disabled",!0),e("#usdPGT_FromDate").val(""),e("#usdPGT_ToDate").val(""),e("#usdPGT_FromTime").val(""),e("#usdPGT_ToTime").val(""),e("#usdPGT_cardPin").val(""),e("#usdPGT_remarksList").val(""),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear()},showForgotPinDiv:function(a){a.stopImmediatePropagation(),e("#forgotPinDiv").show(),e("#changePinDiv").hide(),e("#blckndReplcDiv").hide(),e("#actNEwCRDDiv").hide(),e("#tempBlckDiv").hide(),e("#tempUNBlockDiv").hide(),e("#generateNewPinDiv").hide(),e("#changePin_CardNumber").attr("disabled",!0),e("#changePin_cardNumError").attr("disabled",!0),e("#changePin_cardpin").attr("disabled",!0),e("#changePin_cardpinError").attr("disabled",!0),e("#changePin_oldpin").attr("disabled",!0),e("#changePin_oldPinError").attr("disabled",!0),e("#changePin_newpin").attr("disabled",!0),e("#changePin_newPinError").attr("disabled",!0),e("#changePin_confirmpin").attr("disabled",!0),e("#changePin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").val(""),e("#changePin_cardNumError").html(""),e("#changePin_cardpin").val(""),e("#changePin_cardpinError").html(""),e("#changePin_oldpin").val(""),e("#changePin_oldPinError").html(""),e("#changePin_newpin").val(""),e("#changePin_newPinError").html(""),e("#changePin_confirmpin").val(""),e("#changePin_confirmPinError").html(""),e("#generatePin_CardNumber").val(""),e("#generatePin_cardNumError").html(""),e("#generatePin_cardpin").val(""),e("#generatePin_cardpinError").html(""),e("#generatePin_newpin").val(""),e("#generatePin_newPinError").html(""),e("#generatePin_confirmpin").val(""),e("#genratePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!0),e("#generatePin_cardNumError").attr("disabled",!0),e("#generatePin_cardpin").attr("disabled",!0),e("#generatePin_cardpinError").attr("disabled",!0),e("#generatePin_newpin").attr("disabled",!0),e("#generatePin_newPinError").attr("disabled",!0),e("#generatePin_confirmpin").attr("disabled",!0),e("#genratePin_confirmPinError").attr("disabled",!0),e("#forgotPin_CardNumber").attr("disabled",!1),e("#forgotPin_cardNumError").attr("disabled",!1),e("#forgotPin_cardpin").attr("disabled",!1),e("#forgotPin_cardpinError").attr("disabled",!1),e("#forgotPin_newpin").attr("disabled",!1),e("#forgotPin_newPinError").attr("disabled",!1),e("#forgotPin_confirmpin").attr("disabled",!1),e("#forgotPin_confirmPinError").attr("disabled",!1),e("#forgotPin_cardpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#forgotPin_newpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#forgotPin_confirmpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#usdPaymentGTDiv").hide(),e("#usdPGT_EnabledStatusDiv").hide(),e(".currentStatus").attr("disabled",!0),e("#usdPGT_FromDate").attr("disabled",!0),e("#usdPGT_ToDate").attr("disabled",!0),e("#usdPGT_FromTime").attr("disabled",!0),e("#usdPGT_ToTime").attr("disabled",!0),e("#usdPGT_cardPin").attr("disabled",!0),e("#usdPGT_FromDate").val(""),e("#usdPGT_ToDate").val(""),e("#usdPGT_FromTime").val(""),e("#usdPGT_ToTime").val(""),e("#usdPGT_cardPin").val(""),e("#usdPGT_remarksList").val(""),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear()},showGeneratePinDiv:function(a){a.stopImmediatePropagation(),e("#changePinDiv").hide(),e("#forgotPinDiv").hide(),e("#blckndReplcDiv").hide(),e("#actNEwCRDDiv").hide(),e("#tempBlckDiv").hide(),e("#tempUNBlockDiv").hide(),e("#generateNewPinDiv").show(),e("#forgotPin_CardNumber").val(""),e("#forgotPin_cardNumError").html(""),e("#forgotPin_cardpin").val(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newpin").val(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmpin").val(""),e("#forgotPin_confirmPinError").html(""),e("#forgotPin_CardNumber").attr("disabled",!0),e("#forgotPin_cardNumError").attr("disabled",!0),e("#forgotPin_cardpin").attr("disabled",!0),e("#forgotPin_cardpinError").attr("disabled",!0),e("#forgotPin_newpin").attr("disabled",!0),e("#forgotPin_newPinError").attr("disabled",!0),e("#forgotPin_confirmpin").attr("disabled",!0),e("#forgotPin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").attr("disabled",!0),e("#changePin_cardNumError").attr("disabled",!0),e("#changePin_cardpin").attr("disabled",!0),e("#changePin_cardpinError").attr("disabled",!0),e("#changePin_oldpin").attr("disabled",!0),e("#changePin_oldPinError").attr("disabled",!0),e("#changePin_newpin").attr("disabled",!0),e("#changePin_newPinError").attr("disabled",!0),e("#changePin_confirmpin").attr("disabled",!0),e("#changePin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").val(""),e("#changePin_cardNumError").html(""),e("#changePin_cardpin").val(""),e("#changePin_cardpinError").html(""),e("#changePin_oldpin").val(""),e("#changePin_oldPinError").html(""),e("#changePin_newpin").val(""),e("#changePin_newPinError").html(""),e("#changePin_confirmpin").val(""),e("#changePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!1),e("#generatePin_cardNumError").attr("disabled",!1),e("#generatePin_cardpin").attr("disabled",!1),e("#generatePin_cardpinError").attr("disabled",!1),e("#generatePin_newpin").attr("disabled",!1),e("#generatePin_newPinError").attr("disabled",!1),e("#generatePin_confirmpin").attr("disabled",!1),e("#genratePin_confirmPinError").attr("disabled",!1),e("#generatePin_cardpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#generatePin_newpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#generatePin_confirmpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#usdPaymentGTDiv").hide(),e("#usdPGT_EnabledStatusDiv").hide(),e(".currentStatus").attr("disabled",!0),e("#usdPGT_FromDate").attr("disabled",!0),e("#usdPGT_ToDate").attr("disabled",!0),e("#usdPGT_FromTime").attr("disabled",!0),e("#usdPGT_ToTime").attr("disabled",!0),e("#usdPGT_cardPin").attr("disabled",!0),e("#usdPGT_FromDate").val(""),e("#usdPGT_ToDate").val(""),e("#usdPGT_FromTime").val(""),e("#usdPGT_ToTime").val(""),e("#usdPGT_cardPin").val(""),e("#usdPGT_remarksList").val(""),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear()},showTempBlckDiv:function(a){a.stopImmediatePropagation(),e("#changePinDiv").hide(),e("#forgotPinDiv").hide(),e("#generateNewPinDiv").hide(),e("#blckndReplcDiv").hide(),e("#tempUNBlockDiv").hide(),e("#actNEwCRDDiv").hide(),e("#tempBlckDiv").show(),e("#forgotPin_CardNumber").val(""),e("#forgotPin_cardNumError").html(""),e("#forgotPin_cardpin").val(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newpin").val(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmpin").val(""),e("#forgotPin_confirmPinError").html(""),e("#forgotPin_CardNumber").attr("disabled",!0),e("#forgotPin_cardNumError").attr("disabled",!0),e("#forgotPin_cardpin").attr("disabled",!0),e("#forgotPin_cardpinError").attr("disabled",!0),e("#forgotPin_newpin").attr("disabled",!0),e("#forgotPin_newPinError").attr("disabled",!0),e("#forgotPin_confirmpin").attr("disabled",!0),e("#forgotPin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").attr("disabled",!0),e("#changePin_cardNumError").attr("disabled",!0),e("#changePin_cardpin").attr("disabled",!0),e("#changePin_cardpinError").attr("disabled",!0),e("#changePin_oldpin").attr("disabled",!0),e("#changePin_oldPinError").attr("disabled",!0),e("#changePin_newpin").attr("disabled",!0),e("#changePin_newPinError").attr("disabled",!0),e("#changePin_confirmpin").attr("disabled",!0),e("#changePin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").val(""),e("#changePin_cardNumError").html(""),e("#changePin_cardpin").val(""),e("#changePin_cardpinError").html(""),e("#changePin_oldpin").val(""),e("#changePin_oldPinError").html(""),e("#changePin_newpin").val(""),e("#changePin_newPinError").html(""),e("#changePin_confirmpin").val(""),e("#changePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!1),e("#generatePin_cardNumError").attr("disabled",!1),e("#generatePin_cardpin").attr("disabled",!1),e("#generatePin_cardpinError").attr("disabled",!1),e("#generatePin_newpin").attr("disabled",!1),e("#generatePin_newPinError").attr("disabled",!1),e("#generatePin_confirmpin").attr("disabled",!1),e("#genratePin_confirmPinError").attr("disabled",!1),e("#cardStatustempunblkDiv").html(""),e("#resonList").val("OTHERS"),e("#cardStatustempDiv").attr("disabled",!1),e("#cardPinTEMPBlk").attr("disabled",!1),e("#cardPinTemp_newPinError").attr("disabled",!1),e("#resonList").attr("disabled",!0),e("#cardStatustempunblkDiv").html(""),e("#reasonforreqTeMPUNBLCK").val("OTHERS"),e("#cardStatustempunblkDiv").attr("disabled",!0),e("#reasonforreqTeMPUNBLCK").attr("disabled",!0),e("#cardPinTEMPBlk").pincodeInput().data("plugin_pincodeInput").clear()},showUSDPaymentGatewayDiv:function(a){e("#usdPaymentGTDiv").show(),e("#usdPGT_EnabledStatusDiv").show(),e(".currentStatus").attr("disabled",!1),e("#enabled").prop("checked",!0),e("#disabled").prop("checked",!1),e("#usdPGT_FromDate").attr("disabled",!1),e("#usdPGT_ToDate").attr("disabled",!1),e("#usdPGT_FromTime").attr("disabled",!1),e("#usdPGT_ToTime").attr("disabled",!1),e("#usdPGT_cardPin").attr("disabled",!1),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear(),e("#cardStatusDiv").show(),e("#changePinDiv").hide(),e("#forgotPinDiv").hide(),e("#generateNewPinDiv").hide(),e("#newPinExpDateDiv").hide(),e("#changePinExpDateDiv").hide(),e("#forgotPinExpDateDiv").hide(),e("#cardmanage_authmodeDiv").html(""),e("#changePin_CardNumber").attr("disabled",!0),e("#changePin_cardNumError").attr("disabled",!0),e("#changePin_cardpin").attr("disabled",!0),e("#changePin_cardpinError").attr("disabled",!0),e("#changePin_oldpin").attr("disabled",!0),e("#changePin_oldPinError").attr("disabled",!0),e("#changePin_newpin").attr("disabled",!0),e("#changePin_newPinError").attr("disabled",!0),e("#changePin_confirmpin").attr("disabled",!0),e("#changePin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").val(""),e("#changePin_cardNumError").html(""),e("#changePin_cardpin").val(""),e("#changePin_cardpinError").html(""),e("#changePin_oldpin").val(""),e("#changePin_oldPinError").html(""),e("#changePin_newpin").val(""),e("#changePin_newPinError").html(""),e("#changePin_confirmpin").val(""),e("#changePin_confirmPinError").html(""),e("#forgotPin_CardNumber").val(""),e("#forgotPin_cardNumError").html(""),e("#forgotPin_cardpin").val(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newpin").val(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmpin").val(""),e("#forgotPin_confirmPinError").html(""),e("#forgotPin_CardNumber").attr("disabled",!0),e("#forgotPin_cardNumError").attr("disabled",!0),e("#forgotPin_cardpin").attr("disabled",!0),e("#forgotPin_cardpinError").attr("disabled",!0),e("#forgotPin_newpin").attr("disabled",!0),e("#forgotPin_newPinError").attr("disabled",!0),e("#forgotPin_confirmpin").attr("disabled",!0),e("#forgotPin_confirmPinError").attr("disabled",!0),e("#generatePin_CardNumber").val(""),e("#generatePin_cardNumError").html(""),e("#generatePin_cardpin").val(""),e("#generatePin_cardpinError").html(""),e("#generatePin_newpin").val(""),e("#generatePin_newPinError").html(""),e("#generatePin_confirmpin").val(""),e("#genratePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!0),e("#generatePin_cardNumError").attr("disabled",!0),e("#generatePin_cardpin").attr("disabled",!0),e("#generatePin_cardpinError").attr("disabled",!0),e("#generatePin_newpin").attr("disabled",!0),e("#generatePin_newPinError").attr("disabled",!0),e("#generatePin_confirmpin").attr("disabled",!0),e("#genratePin_confirmPinError").attr("disabled",!0),e("#tempBlckDiv").hide(),e("#cardStatustempunblkDiv").html(""),e("#cardPinTEMPBlk").val(""),e("#cardPinTemp_newPinError").html(""),e("#resonList").val("OTHERS"),e("#cardStatustempDiv").attr("disabled",!0),e("#cardPinTEMPBlk").attr("disabled",!0),e("#cardPinTemp_newPinError").attr("disabled",!0),e("#resonList").attr("disabled",!0),e("#tempUNBlockDiv").hide(),e("#cardStatustempunblkDiv").html(""),e("#reasonforreqTeMPUNBLCK").val("OTHERS"),e("#cardStatustempunblkDiv").attr("disabled",!0),e("#reasonforreqTeMPUNBLCK").attr("disabled",!0)},toggleCurrentStatus:function(a){a.stopImmediatePropagation();var r=e("input[name='usdPGT_CurrentStatus']:checked").val();"Enabled"==r?(e("#usdPGT_EnabledStatusDiv").show(),e("#usdPGT_remarksList").attr("disabled",!1),e("#usdPGT_FromDate").attr("disabled",!1),e("#usdPGT_FromTime").attr("disabled",!1),e("#usdPGT_ToDate").attr("disabled",!1),e("#usdPGT_ToTime").attr("disabled",!1),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_FromToDateTimeErr").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear(),e("#usdPGT_remarksList").val(""),e("#usdPGT_FromDate").val(),e("#usdPGT_FromTime").val(),e("#usdPGT_ToDate").val(),e("#usdPGT_ToTime").val()):"Disabled"==r&&(e("#usdPGT_EnabledStatusDiv").hide(),e("#usdPGT_remarksList").attr("disabled",!0),e("#usdPGT_FromDate").attr("disabled",!0),e("#usdPGT_FromTime").attr("disabled",!0),e("#usdPGT_ToDate").attr("disabled",!0),e("#usdPGT_ToTime").attr("disabled",!0),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_FromToDateTimeErr").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear(),e("#usdPGT_remarksList").val(""),e("#usdPGT_FromDate").val(),e("#usdPGT_FromTime").val(),e("#usdPGT_ToDate").val(),e("#usdPGT_ToTime").val(),p.set("usdPGTRemarks",null),p.set("usdPGTFromDate",null),p.set("usdPGTToDate",null),p.set("usdPGTFromTime",null),p.set("usdPGTToTime",null),p.set("selectedFromDate",null),p.set("selectedToDate",null),p.set("selectedFromTime",null),p.set("selectedToTime",null))},showTempUNBlckDiv:function(a){a.stopImmediatePropagation(),e("#changePinDiv").hide(),e("#forgotPinDiv").hide(),e("#generateNewPinDiv").hide(),e("#blckndReplcDiv").hide(),e("#opnUSDPGTDiv").hide(),e("#tempUNBlockDiv").show(),e("#actNCrdExpDateDiv").hide(),e("#tempBlckDiv").hide(),e("#forgotPin_CardNumber").val(""),e("#forgotPin_cardNumError").html(""),e("#forgotPin_cardpin").val(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newpin").val(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmpin").val(""),e("#forgotPin_confirmPinError").html(""),e("#forgotPin_CardNumber").attr("disabled",!0),e("#forgotPin_cardNumError").attr("disabled",!0),e("#forgotPin_cardpin").attr("disabled",!0),e("#forgotPin_cardpinError").attr("disabled",!0),e("#forgotPin_newpin").attr("disabled",!0),e("#forgotPin_newPinError").attr("disabled",!0),e("#forgotPin_confirmpin").attr("disabled",!0),e("#forgotPin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").attr("disabled",!0),e("#changePin_cardNumError").attr("disabled",!0),e("#changePin_cardpin").attr("disabled",!0),e("#changePin_cardpinError").attr("disabled",!0),e("#changePin_oldpin").attr("disabled",!0),e("#changePin_oldPinError").attr("disabled",!0),e("#changePin_newpin").attr("disabled",!0),e("#changePin_newPinError").attr("disabled",!0),e("#changePin_confirmpin").attr("disabled",!0),e("#changePin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").val(""),e("#changePin_cardNumError").html(""),e("#changePin_cardpin").val(""),e("#changePin_cardpinError").html(""),e("#changePin_oldpin").val(""),e("#changePin_oldPinError").html(""),e("#changePin_newpin").val(""),e("#changePin_newPinError").html(""),e("#changePin_confirmpin").val(""),e("#changePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!1),e("#generatePin_cardNumError").attr("disabled",!1),e("#generatePin_cardpin").attr("disabled",!1),e("#generatePin_cardpinError").attr("disabled",!1),e("#generatePin_newpin").attr("disabled",!1),e("#generatePin_newPinError").attr("disabled",!1),e("#generatePin_confirmpin").attr("disabled",!1),e("#genratePin_confirmPinError").attr("disabled",!1),e("#tempBlckDiv").hide(),e("#cardPinTEMPBlk").val(""),e("#cardPinTemp_newPinError").html(""),e("#resonList").val("OTHERS"),e("#cardStatustempDiv").attr("disabled",!0),e("#cardPinTEMPBlk").attr("disabled",!0),e("#cardPinTemp_newPinError").attr("disabled",!0),e("#resonList").attr("disabled",!0),e("#reasonforreqTeMPUNBLCK").val("OTHERS"),e("#cardStatustempunblkDiv").attr("disabled",!1),e("#reasonforreqTeMPUNBLCK").attr("disabled",!0),
e("#usdPaymentGTDiv").hide(),e("#usdPGT_EnabledStatusDiv").hide(),e(".currentStatus").attr("disabled",!0),e("#usdPGT_FromDate").attr("disabled",!0),e("#usdPGT_ToDate").attr("disabled",!0),e("#usdPGT_FromTime").attr("disabled",!0),e("#usdPGT_ToTime").attr("disabled",!0),e("#usdPGT_cardPin").attr("disabled",!0),e("#usdPGT_FromDate").val(""),e("#usdPGT_ToDate").val(""),e("#usdPGT_FromTime").val(""),e("#usdPGT_ToTime").val(""),e("#usdPGT_cardPin").val(""),e("#usdPGT_remarksList").val(""),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear()},showblckndReplcDiv:function(a){a.stopImmediatePropagation(),e("#changePinDiv").hide(),e("#forgotPinDiv").hide(),e("#generateNewPinDiv").hide(),e("#tempUNBlockDiv").hide(),e("#tempBlckDiv").hide(),e("#opnUSDPGTDiv").hide(),e("#actNCrdExpDateDiv").hide(),e("#blckndReplcDiv").show(),e("#forgotPin_CardNumber").val(""),e("#forgotPin_cardNumError").html(""),e("#forgotPin_cardpin").val(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newpin").val(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmpin").val(""),e("#forgotPin_confirmPinError").html(""),e("#forgotPin_CardNumber").attr("disabled",!0),e("#forgotPin_cardNumError").attr("disabled",!0),e("#forgotPin_cardpin").attr("disabled",!0),e("#forgotPin_cardpinError").attr("disabled",!0),e("#forgotPin_newpin").attr("disabled",!0),e("#forgotPin_newPinError").attr("disabled",!0),e("#forgotPin_confirmpin").attr("disabled",!0),e("#forgotPin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").attr("disabled",!0),e("#changePin_cardNumError").attr("disabled",!0),e("#changePin_cardpin").attr("disabled",!0),e("#changePin_cardpinError").attr("disabled",!0),e("#changePin_oldpin").attr("disabled",!0),e("#changePin_oldPinError").attr("disabled",!0),e("#changePin_newpin").attr("disabled",!0),e("#changePin_newPinError").attr("disabled",!0),e("#changePin_confirmpin").attr("disabled",!0),e("#changePin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").val(""),e("#changePin_cardNumError").html(""),e("#changePin_cardpin").val(""),e("#changePin_cardpinError").html(""),e("#changePin_oldpin").val(""),e("#changePin_oldPinError").html(""),e("#changePin_newpin").val(""),e("#changePin_newPinError").html(""),e("#changePin_confirmpin").val(""),e("#changePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!1),e("#generatePin_cardNumError").attr("disabled",!1),e("#generatePin_cardpin").attr("disabled",!1),e("#generatePin_cardpinError").attr("disabled",!1),e("#generatePin_newpin").attr("disabled",!1),e("#generatePin_newPinError").attr("disabled",!1),e("#generatePin_confirmpin").attr("disabled",!1),e("#genratePin_confirmPinError").attr("disabled",!1),e("#generatePin_cardpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#generatePin_newpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#generatePin_confirmpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#usdPaymentGTDiv").hide(),e("#usdPGT_EnabledStatusDiv").hide(),e(".currentStatus").attr("disabled",!0),e("#usdPGT_FromDate").attr("disabled",!0),e("#usdPGT_ToDate").attr("disabled",!0),e("#usdPGT_FromTime").attr("disabled",!0),e("#usdPGT_ToTime").attr("disabled",!0),e("#usdPGT_cardPin").attr("disabled",!0),e("#usdPGT_FromDate").val(""),e("#usdPGT_ToDate").val(""),e("#usdPGT_FromTime").val(""),e("#usdPGT_ToTime").val(""),e("#usdPGT_cardPin").val(""),e("#usdPGT_remarksList").val(""),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear()},showactNCrdExpDateDiv:function(a){a.stopImmediatePropagation(),e("#changePinDiv").hide(),e("#forgotPinDiv").hide(),e("#generateNewPinDiv").hide(),e("#tempUNBlockDiv").hide(),e("#tempBlckDiv").hide(),e("#actNEwCRDDiv").show(),e("#blckndReplcDiv").hide(),e("#forgotPin_CardNumber").val(""),e("#forgotPin_cardNumError").html(""),e("#forgotPin_cardpin").val(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newpin").val(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmpin").val(""),e("#forgotPin_confirmPinError").html(""),e("#forgotPin_CardNumber").attr("disabled",!0),e("#forgotPin_cardNumError").attr("disabled",!0),e("#forgotPin_cardpin").attr("disabled",!0),e("#forgotPin_cardpinError").attr("disabled",!0),e("#forgotPin_newpin").attr("disabled",!0),e("#forgotPin_newPinError").attr("disabled",!0),e("#forgotPin_confirmpin").attr("disabled",!0),e("#forgotPin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").attr("disabled",!0),e("#changePin_cardNumError").attr("disabled",!0),e("#changePin_cardpin").attr("disabled",!0),e("#changePin_cardpinError").attr("disabled",!0),e("#changePin_oldpin").attr("disabled",!0),e("#changePin_oldPinError").attr("disabled",!0),e("#changePin_newpin").attr("disabled",!0),e("#changePin_newPinError").attr("disabled",!0),e("#changePin_confirmpin").attr("disabled",!0),e("#changePin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").val(""),e("#changePin_cardNumError").html(""),e("#changePin_cardpin").val(""),e("#changePin_cardpinError").html(""),e("#changePin_oldpin").val(""),e("#changePin_oldPinError").html(""),e("#changePin_newpin").val(""),e("#changePin_newPinError").html(""),e("#changePin_confirmpin").val(""),e("#changePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!1),e("#generatePin_cardNumError").attr("disabled",!1),e("#generatePin_cardpin").attr("disabled",!1),e("#generatePin_cardpinError").attr("disabled",!1),e("#generatePin_newpin").attr("disabled",!1),e("#generatePin_newPinError").attr("disabled",!1),e("#generatePin_confirmpin").attr("disabled",!1),e("#genratePin_confirmPinError").attr("disabled",!1),e("#generatePin_cardpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#generatePin_newpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#generatePin_confirmpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#usdPaymentGTDiv").hide(),e("#usdPGT_EnabledStatusDiv").hide(),e(".currentStatus").attr("disabled",!0),e("#usdPGT_FromDate").attr("disabled",!0),e("#usdPGT_ToDate").attr("disabled",!0),e("#usdPGT_FromTime").attr("disabled",!0),e("#usdPGT_ToTime").attr("disabled",!0),e("#usdPGT_cardPin").attr("disabled",!0),e("#usdPGT_FromDate").val(""),e("#usdPGT_ToDate").val(""),e("#usdPGT_FromTime").val(""),e("#usdPGT_ToTime").val(""),e("#usdPGT_cardPin").val(""),e("#usdPGT_remarksList").val(""),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear()},hideAllDiv:function(a,r){var t=this;a.stopImmediatePropagation();var n=e("ul.card_type").find("li.active").attr("data"),i=e("#radioButtonDiv .cardType.active").attr("id"),d=e("input[name='requestreason']:checked").val();if(d!=c||P!=n){var d=e("input[name='requestreason']:checked").val();e("#cardNumberError").html(""),P=n,c=d;e("#cardList option:selected").val();if(t.getCardListDTO(a),e("#cardStatusDiv").hide(),e("#changePinDiv").hide(),e("#forgotPinDiv").hide(),e("#generateNewPinDiv").hide(),e("#newPinExpDateDiv").hide(),e("#changePinExpDateDiv").hide(),e("#forgotPinExpDateDiv").hide(),e("#cardmanage_authmodeDiv").html(""),e("#changePin_CardNumber").attr("disabled",!0),e("#changePin_cardNumError").attr("disabled",!0),e("#changePin_cardpin").attr("disabled",!0),e("#changePin_cardpinError").attr("disabled",!0),e("#changePin_oldpin").attr("disabled",!0),e("#changePin_oldPinError").attr("disabled",!0),e("#changePin_newpin").attr("disabled",!0),e("#changePin_newPinError").attr("disabled",!0),e("#changePin_confirmpin").attr("disabled",!0),e("#changePin_confirmPinError").attr("disabled",!0),e("#changePin_CardNumber").val(""),e("#changePin_cardNumError").html(""),e("#changePin_cardpin").val(""),e("#changePin_cardpinError").html(""),e("#changePin_oldpin").val(""),e("#changePin_oldPinError").html(""),e("#changePin_newpin").val(""),e("#changePin_newPinError").html(""),e("#changePin_confirmpin").val(""),e("#changePin_confirmPinError").html(""),e("#forgotPin_CardNumber").val(""),e("#forgotPin_cardNumError").html(""),e("#forgotPin_cardpin").val(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newpin").val(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmpin").val(""),e("#forgotPin_confirmPinError").html(""),e("#forgotPin_CardNumber").attr("disabled",!0),e("#forgotPin_cardNumError").attr("disabled",!0),e("#forgotPin_cardpin").attr("disabled",!0),e("#forgotPin_cardpinError").attr("disabled",!0),e("#forgotPin_newpin").attr("disabled",!0),e("#forgotPin_newPinError").attr("disabled",!0),e("#forgotPin_confirmpin").attr("disabled",!0),e("#forgotPin_confirmPinError").attr("disabled",!0),e("#generatePin_CardNumber").val(""),e("#generatePin_cardNumError").html(""),e("#generatePin_cardpin").val(""),e("#generatePin_cardpinError").html(""),e("#generatePin_newpin").val(""),e("#generatePin_newPinError").html(""),e("#generatePin_confirmpin").val(""),e("#genratePin_confirmPinError").html(""),e("#generatePin_CardNumber").attr("disabled",!0),e("#generatePin_cardNumError").attr("disabled",!0),e("#generatePin_cardpin").attr("disabled",!0),e("#generatePin_cardpinError").attr("disabled",!0),e("#generatePin_newpin").attr("disabled",!0),e("#generatePin_newPinError").attr("disabled",!0),e("#generatePin_confirmpin").attr("disabled",!0),e("#genratePin_confirmPinError").attr("disabled",!0),e("#tempBlckDiv").hide(),e("#cardStatustempunblkDiv").html(""),e("#cardPinTEMPBlk").val(""),e("#cardPinTemp_newPinError").html(""),e("#resonList").val("OTHERS"),e("#cardStatustempDiv").attr("disabled",!0),e("#cardPinTEMPBlk").attr("disabled",!0),e("#cardPinTemp_newPinError").attr("disabled",!0),e("#resonList").attr("disabled",!0),e("#tempUNBlockDiv").hide(),e("#cardStatustempunblkDiv").html(""),e("#reasonforreqTeMPUNBLCK").val("OTHERS"),e("#cardStatustempunblkDiv").attr("disabled",!0),e("#reasonforreqTeMPUNBLCK").attr("disabled",!0),e("#usdPaymentGTDiv").hide(),e("#usdPGT_EnabledStatusDiv").hide(),e(".currentStatus").attr("disabled",!0),e("#usdPGT_FromDate").attr("disabled",!0),e("#usdPGT_ToDate").attr("disabled",!0),e("#usdPGT_FromTime").attr("disabled",!0),e("#usdPGT_ToTime").attr("disabled",!0),e("#usdPGT_cardPin").attr("disabled",!0),e("#usdPGT_FromDate").val(""),e("#usdPGT_ToDate").val(""),e("#usdPGT_FromTime").val(""),e("#usdPGT_ToTime").val(""),e("#usdPGT_cardPin").val(""),e("#usdPGT_remarksList").val(""),e("#usdPGT_RemarksNullErr").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear(),e("#FOREIGN_TRANS_TQ_Div").hide(),e("#tq_termsAndConditions").hide(),e("#foreignTransTQ_ToggleBtnDiv").html(""),"USD_PAYMENT_GATEWAY"==d||"FOREIGN_TRANS_TQ"==d){var o="";o+="<label>"+e.i18n.t("app.service.cardtype")+'</label><ul class="nav nav-tabs card_type" role="tablist"><li role="presentation" class="cardType active" data-cardname="CC" id="credit" data="creditCard"><a href="javascript:void(0)">Credit Card</a></li></ul>',e("#radioButtonDiv").html(o)}else t.loadRadioOption(a);e(".cardType").removeClass("active"),e("#"+i).addClass("active")}},loadRadioOption:function(a){"object"==typeof a&&a.stopImmediatePropagation();var r="";r+="<label>"+e.i18n.t("app.service.cardtype")+'</label><ul class="nav nav-tabs card_type" role="tablist"><li role="presentation" class="cardType active" data-cardname="CC" id="credit" data="creditCard"><a href="javascript:void(0)">Credit Card</a></li><li role="presentation" class="cardType" id="debit" data-cardname="DC" data="debitCard"><a href="javascript:void(0)">Debit Card</a></li><li role="presentation" class="cardType" id="prepaid" data-cardname="PC" data="prepaidCard"><a href="javascript:void(0)">Prepaid Card</a></li></ul>',e("#radioButtonDiv").html(r)},getDebitCardList:function(a){a.stopImmediatePropagation(),p.set("cardType","DC");var r=this;e(".cardType").removeClass("active"),e("#debit").addClass("active"),"true"==p.get("showInputDetails")?r.hideAllDiv(a,"true"):r.getCardListDTO(a)},getCreditCardList:function(a){a.stopImmediatePropagation(),p.set("cardType","CC");var r=this;e(".cardType").removeClass("active"),e("#credit").addClass("active");var t=e("input[name='requestreason']:checked").val();if("true"==p.get("showInputDetails"))if(r.hideAllDiv(a,"true"),"USD_PAYMENT_GATEWAY"==t){var n="";n+="<label>"+e.i18n.t("app.service.cardtype")+'</label><ul class="nav nav-tabs card_type" role="tablist"><li role="presentation" class="cardType active" data-cardname="CC" id="credit" data="creditCard"><a href="javascript:void(0)">Credit Card</a></li></ul>',e("#radioButtonDiv").html(n)}else r.getCardListDTO(a);else r.getCardListDTO(a)},getPrpaidCardList:function(a){a.stopImmediatePropagation(),p.set("cardType","PC");var r=this;e(".cardType").removeClass("active"),e("#prepaid").addClass("active");var t=e("input[name='requestreason']:checked").val();if("true"==p.get("showInputDetails"))if(r.hideAllDiv(a,"true"),"USD_PAYMENT_GATEWAY"==t){var n="";n+="<label>"+e.i18n.t("app.service.cardtype")+'</label><ul class="nav nav-tabs card_type" role="tablist"><li role="presentation" class="cardType" data-cardname="CC" id="credit" data="creditCard"><a href="javascript:void(0)">Credit Card</a></li><li role="presentation" class="cardType active" id="prepaid" data-cardname="PC" data="prepaidCard"><a href="javascript:void(0)">Prepaid Card</a></li></ul>',e("#radioButtonDiv").html(n)}else r.getCardListDTO(a);else r.getCardListDTO(a)},getCardListDTO:function(a){e("#cardNumberError").html("");var r=e("#radioButtonDiv .cardType.active").attr("id");e(".cardType").removeClass("active"),e("#"+r).addClass("active"),"object"==typeof a&&a.stopImmediatePropagation();var n=e("input[name='requestreason']:checked").val(),i=this;showSpinner();var d=function(t){hideSpinner(),e(".cardType").removeClass("active"),e("#"+r).addClass("active"),i.populateCarNumberDropDown(a)},o=function(e){i.errorresponse(),i.populateCarNumberDropDown(a)};i.collection=new t,i.collection.fetch({data:e.param({access_token:p.get("access_token"),newversion:"Y",cardClassification:p.get("cardType"),requestType:n}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?d(e):o(e)},error:o})},populateCarNumberDropDown:function(a){s=!1,"object"==typeof a&&a.stopImmediatePropagation(),e("#cardList").empty(),e("#cardNumberError").html("");var r=p.get("creditCardAccountList"),t="<option value=''>Select a Card</option>";if(e.each(r,function(e,a){t+="<option value='"+a.accountNumber+"'currentStatus='"+a.foreignTransTqCurrentStatus+"' status='"+a.acctStatus+"'>"+a.maskedCCNumber+"</option>"}),e("#cardList").append(t),isNull(r)){s=!0;var n=p.get("errordesc");e("#cardNumberError").html(n)}},populateBlockReasonDropDown:function(a){isNoreason=!1,"object"==typeof a&&a.stopImmediatePropagation();var r=p.get("blockReasonList"),t="<option value=''>Select Remarks</option>";e.each(r,function(e,a){t+="<option value='"+a.code+"'>"+a.description+"</option>"}),e("#resonList").append(t),e("#reasonforreqTeMPUNBLCK").append(t);var n=[];e("#resonList option").each(function(){e.inArray(this.value,n)>-1?e(this).remove():n.push(this.value)});var i=[];e("#reasonforreqTeMPUNBLCK option").each(function(){e.inArray(this.value,i)>-1?e(this).remove():i.push(this.value)})},populateRemarksListDropDown:function(a){"object"==typeof a&&a.stopImmediatePropagation();e("#usdPGT_remarksList").html("");var r=p.get("remarkslist"),t="<option value=''>Select Remarks</option>";e.each(r,function(e,a){t+="<option value='"+a.code+"'>"+a.description+"</option>"}),e("#usdPGT_remarksList").append(t)},showCardStatus:function(a){a.stopImmediatePropagation();var r=e("#cardList option:selected").attr("status"),t=e("#cardList option:selected").val(),n=e("#cardList option:selected").attr("currentStatus");p.set("changeStatus","");var i=this;if(""==t){e("#cardStatusDiv").html(""),e("#cardStatusDiv").hide(),e("#cardStatustempDiv").html(""),e("#cardStatustempunblkDiv").html(""),e("#cardPinBkckndREPLCDiv").html("");var i=this;i.hideAllDiv(a),e("#tq_termsAndConditions").hide(),e("#foreignTransTQ_ToggleBtnDiv").html(""),e("#FOREIGN_TRANS_TQ_Div").hide()}else{if(e("#cardStatusDiv").show(),e("#cardStatusDiv").addClass("small text-right"),"null"==n?p.set("currentForeignStatus",""):p.set("currentForeignStatus",n),"off"==n.toLowerCase()||"null"==n?(p.set("changeStatus","ON"),e("#tq_ChangeStatus").html("ON")):(e("#tq_ChangeStatus").html("OFF"),p.set("changeStatus","OFF")),!isNull(r)){"NEW_INACTIVE"==r?e("#cardStatusDiv").html("NEW INACTIVE"):e("#cardStatusDiv").html(r),p.set("cardManage_CardStatus",r);var d=e("input[name='requestreason']:checked").val();if("BLOCK_TEMP"==d)e("#cardStatustempDiv").html(r),e("#cardStatustempunblkDiv").html(""),e("#cardPinBkckndREPLCDiv").html(""),i.populateBlockReasonDropDown(a);else if("UNBLOCK_TEMP"==d)e("#cardStatustempunblkDiv").html(r),e("#cardStatustempDiv").html(""),e("#cardPinBkckndREPLCDiv").html(""),i.populateBlockReasonDropDown(a);else if("BLOCK_REPLACE"==d)e("#cardPinBkckndREPLCDiv").html(r),e("#cardStatustempDiv").html(""),e("#cardStatustempunblkDiv").html(""),i.populateBlockReasonDropDown(a);else if("USD_PAYMENT_GATEWAY"==d)e("#cardStatustempDiv").html(""),e("#cardStatustempunblkDiv").html(""),i.populateRemarksListDropDown(a);else if("FOREIGN_TRANS_TQ"==d){if(e("#termsand").prop("checked",!1),null!=p.get("currentForeignStatus")&&""!=p.get("currentForeignStatus"))var o='<div class="row"><div class="col-xs-6 small"><span class="text-muted small">Current Status</span> <br><strong>'+p.get("currentForeignStatus")+'</strong></div><div class="col-xs-6 small text-right"><span class="text-muted small">Card Status</span>  <br><strong class="text-success">'+r+"</strong></div></div>";else var o='<div class="row"><div class="col-xs-12 small text-right"><span class="text-muted small">Card Status</span>  <br><strong class="text-success">'+r+"</strong></div></div>";e("#cardStatusDiv").html(o),e("#cardStatusDiv").removeClass()}else p.set("changeStatus",""),e("#cardStatustempDiv").html(""),e("#cardStatustempunblkDiv").html(""),e("#cardPinBkckndREPLCDiv").html("")}i.showInpuDetails(a),e(".cardpinnumericlengthcontrol").cardpinnumericlength()}},gotoCardManageVerifyPage:function(a){var r=this,t=!1;if(a.stopImmediatePropagation(),!s){e("#requestReasonError").html(""),e("#cardTypeError").html(""),e("#cardNumberError").html(""),e("#changePin_cardpinError").html(""),e("#changePin_oldPinError").html(""),e("#changePin_newPinError").html(""),e("#changePin_confirmPinError").html(""),e("#forgotPin_cardpinError").html(""),e("#forgotPin_newPinError").html(""),e("#forgotPin_confirmPinError").html(""),e("#changePin_cardManage_ExpYearErr").html(""),e("#changePin_cardManage_ExpMonthErr").html(""),e("#forgotPin_cardManage_ExpYearErr").html(""),e("#forgotPin_cardManage_ExpMonthErr").html(""),e("#newPin_cardManage_ExpYearErr").html(""),e("#newPin_cardManage_ExpMonthErr").html(""),e("#forgotPin_cardNumError").html(""),e("#changePin_cardNumError").html(""),e("#generatePin_cardNumError").html(""),e("#generatePin_cardpinError").html(""),e("#generatePin_newPinError").html(""),e("#genratePin_confirmPinError").html(""),e("#cardPinTemp_newPinError").html(""),e("#reasonunblkError").html(""),e("#usdPGT_FromDateErr").html(""),e("#usdPGT_FromTimeErr").html(""),e("#usdPGT_ToDateErr").html(""),e("#usdPGT_ToTimeErr").html(""),e("#usdPGT_cardPinError").html(""),e("#usdPGT_FromToDateTimeErr").html(""),e("#usdPGT_RemarksNullErr").html(""),e("#cardPinForeignTrans_Error").html("");var n=e("input[name='requestreason']:checked").val(),i=e("ul.card_type").find("li.active").attr("data"),d=e("#cardList option:selected").val();if(isNull(n)&&(t=!0,e("#requestReasonError").html("Please select a reason for request")),isNull(i)&&(t=!0,e("#cardTypeError").html("Please select card type")),isNull(d)&&(t=!0,e("#cardNumberError").html("Please select a card")),"CHANGE_EXISTING_PIN"==n){var o=e("#changePin_CardNumber").val(),l=e("#changePin_cardpin").val(),c=e("#changePin_oldpin").val(),P=e("#changePin_newpin").val(),_=e("#changePin_confirmpin").val(),m=e("#changePin_cardManage_ExpYear option:selected").val(),u=e("#changePin_cardManage_ExpMonth option:selected").val();isNull(m)&&(t=!0,e("#changePin_cardManage_ExpYearErr").html("Please select the year")),isNull(u)&&(t=!0,e("#changePin_cardManage_ExpMonthErr").html("Please select the month")),isNull(o)&&(t=!0,e("#changePin_cardNumError").html("Please enter the third 4 digits of the selected card")),isNull(l)&&(t=!0,e("#changePin_cardpinError").html("Please input a valid CVV Number")),l.length<3&&(t=!0,e("#changePin_cardpinError").html("Please input a valid CVV Number")),isNull(c)&&(t=!0,e("#changePin_oldPinError").html("Please enter the old pin")),c.length<4&&(t=!0,e("#changePin_oldPinError").html("Please enter the old pin")),isNull(P)&&(t=!0,e("#changePin_newPinError").html("Please enter the new pin")),P.length<4&&(t=!0,e("#changePin_newPinError").html("Please enter the new pin")),isNull(_)&&(t=!0,e("#changePin_confirmPinError").html("Please confirm the new pin")),_.length<4&&(t=!0,e("#changePin_confirmPinError").html("Please confirm the new pin")),isNull(c)||isNull(P)||c!=P||(t=!0,e("#changePin_confirmPinError").html("New pin cannot be same as old pin")),isNull(_)||isNull(P)||P===_||(t=!0,e("#changePin_confirmPinError").html("New pin and Confirm Pin are not same"))}if("FORGOT_PIN"==n){var o=e("#forgotPin_CardNumber").val(),l=e("#forgotPin_cardpin").val(),P=e("#forgotPin_newpin").val(),_=e("#forgotPin_confirmpin").val(),m=e("#forgotPin_cardManage_ExpYear option:selected").val(),u=e("#forgotPin_cardManage_ExpMonth option:selected").val();isNull(m)&&(t=!0,e("#forgotPin_cardManage_ExpYearErr").html("Please select the year")),isNull(u)&&(t=!0,e("#forgotPin_cardManage_ExpMonthErr").html("Please select the month")),isNull(o)&&(t=!0,e("#forgotPin_cardNumError").html("Please enter the third 4 digits of the selected card")),isNull(l)&&(t=!0,e("#forgotPin_cardpinError").html("Please input a valid CVV Number")),l.length<3&&(t=!0,e("#forgotPin_cardpinError").html("Please input a valid CVV Number")),isNull(P)&&(t=!0,e("#forgotPin_newPinError").html("Please enter the new pin")),P.length<4&&(t=!0,e("#forgotPin_newPinError").html("Please enter the new pin")),isNull(_)&&(t=!0,e("#forgotPin_confirmPinError").html("Please confirm the new pin")),_.length<4&&(t=!0,e("#forgotPin_confirmPinError").html("Please confirm the new pin")),isNull(_)||isNull(P)||P===_||(t=!0,e("#forgotPin_confirmPinError").html("The entered New PIN and the Confirm New PIN value does not match"))}if("GENERATE_NEW_PIN"==n){var o=e("#generatePin_CardNumber").val(),l=e("#generatePin_cardpin").val(),P=e("#generatePin_newpin").val(),_=e("#generatePin_confirmpin").val(),m=e("#newPin_cardManage_ExpYear option:selected").val(),u=e("#newPin_cardManage_ExpMonth option:selected").val();isNull(m)&&(t=!0,e("#newPin_cardManage_ExpYearErr").html("Please select the year")),isNull(u)&&(t=!0,e("#newPin_cardManage_ExpMonthErr").html("Please select the month")),isNull(o)&&(t=!0,e("#generatePin_cardNumError").html("Please enter the third 4 digits of the selected card")),isNull(l)&&(t=!0,e("#generatePin_cardpinError").html("Please input a valid CVV Number")),l.length<3&&(t=!0,e("#generatePin_cardpinError").html("Please input a valid CVV Number")),isNull(P)&&(t=!0,e("#generatePin_newPinError").html("Please enter the new pin")),P.length<4&&(t=!0,e("#generatePin_newPinError").html("Please enter the new pin")),isNull(_)&&(t=!0,e("#genratePin_confirmPinError").html("Please confirm the new pin")),_.length<4&&(t=!0,e("#genratePin_confirmPinError").html("Please confirm the new pin")),isNull(_)||isNull(P)||P===_||(t=!0,e("#genratePin_confirmPinError").html("The entered New PIN and the Confirm New PIN value does not match"))}if("BLOCK_TEMP"==n){var h=e("#cardPinTEMPBlk").val();e("#resonList option:selected").val();isNull(h)&&(t=!0,e("#cardPinTemp_newPinError").html("Please input a valid Card PIN")),h.length<4&&(t=!0,e("#cardPinTemp_newPinError").html("Please input a valid Card PIN"))}if("UNBLOCK_TEMP"==n){var g=e("#reasonforreqTeMPUNBLCK option:selected").val();isNull(g)&&(t=!0,e("#reasonunblkError").html("Please select a Remark"))}if("BLOCK_REPLACE"==n){var h=e("#cardPinBkckndREPLC").val(),n=e("input[name='replcReq']:checked").val();isNull(h)&&(t=!0,e("#cardPinTempBLRP_newPinError").html("Please input a valid Card PIN")),h.length<4&&(t=!0,e("#cardPinTempBLRP_newPinError").html("Please input a valid Card PIN"))}if("ACTV_NCRD"==n){var o=e("#generatePin_CardNumber").val(),l=e("#AcrNcrd_cardpin").val(),P=e("#AcrNcrd_newpin").val(),_=e("#AcrNcrd_confirmpin").val(),m=e("#AcrNcrd_cardManage_ExpYear option:selected").val(),u=e("#AcrNcrd_cardManage_ExpMonth option:selected").val();isNull(m)&&(t=!0,e("#AcrNcrd_cardManage_ExpYearErr").html("Please select the year")),isNull(u)&&(t=!0,e("#AcrNcrd_cardManage_ExpMonthErr").html("Please select the month")),isNull(l)&&(t=!0,e("#AcrNcrd_cardpinError").html("Please input a valid CVV Number")),l.length<3&&(t=!0,e("#AcrNcrd_cardpinError").html("Please input a valid CVV Number")),isNull(P)&&(t=!0,e("#crNcrd_newPinError").html("Please enter the new pin")),P.length<4&&(t=!0,e("#crNcrd_newPinError").html("Please enter the new pin")),isNull(_)&&(t=!0,e("#crNcrd_confirmPinError").html("Please confirm the new pin")),_.length<4&&(t=!0,e("#crNcrd_confirmPinError").html("Please confirm the new pin")),isNull(_)||isNull(P)||P===_||(t=!0,e("#crNcrd_confirmPinError").html("The entered New PIN and the Confirm New PIN value does not match"))}if("USD_PAYMENT_GATEWAY"==n){var T=e("#usdPGT_FromDate").val(),v=e("#usdPGT_FromTime").val(),E=e("#usdPGT_ToDate").val(),f=e("#usdPGT_ToTime").val(),b=e("#usdPGT_cardPin").val(),N=e("#usdPGT_remarksList option:selected").val(),D=e("input[name='usdPGT_CurrentStatus']:checked").val();if(isNull(b)&&(t=!0,e("#usdPGT_cardPinError").html("Please enter Card Pin")),b.length<4&&(t=!0,e("#usdPGT_cardPinError").html("Please enter Card Pin")),"Enabled"==D&&(isNull(T)&&(t=!0,e("#usdPGT_FromDateErr").html("Please select a From Date")),isNull(v)&&(t=!0,e("#usdPGT_FromTimeErr").html("Please select a From Time")),isNull(E)&&(t=!0,e("#usdPGT_ToDateErr").html("Please select a To Date")),isNull(f)&&(t=!0,e("#usdPGT_ToTimeErr").html("Please select a To Time")),isNull(N)&&(t=!0,e("#usdPGT_RemarksNullErr").html("Please select remarks")),!(isNull(T)||isNull(E)||isNull(v)||isNull(f)))){var T=e("#usdPGT_FromDate").val(),G=T.split("-"),C=G[2],w=G[1],I=G[0],E=e("#usdPGT_ToDate").val(),M=E.split("-"),k=M[2],S=M[1],y=M[0],v=e("#usdPGT_FromTime").val(),R=v.split(":"),A=R[0],F=R[1],f=e("#usdPGT_ToTime").val(),L=f.split(":"),B=L[0],O=L[1],q=new Date,x=(q.getDate(),q.getMonth()+1,q.getFullYear(),q.getHours(),q.getMinutes(),new Date(I,w-1,C,A,F)),Y=new Date(y,S-1,k,B,O);if(x.getTime()<q.getTime())return e("#usdPGT_FromDateErr").html("From Date and Time should be greater than Current Date and Time"),!1;if(Y.getTime()<q.getTime())return e("#usdPGT_ToDateErr").html("To Date and Time should be greater than Current Date and Time"),!1;if(x.getTime()==Y.getTime())return e("#usdPGT_FromToDateTimeErr").html("From and To date and time cannot be the same"),!1;if(Y.getTime()<x.getTime())return e("#usdPGT_FromToDateTimeErr").html("To date and time cannot be less than From Date and time"),!1}}if("FOREIGN_TRANS_TQ"==n){var U=e("#cardPinForeignTrans").val();isNull(U)&&(t=!0,e("#cardPinForeignTrans_Error").html("Please enter Card Pin")),U.length<4&&(t=!0,e("#cardPinForeignTrans_Error").html("Please enter Card Pin"));var K=e("#termsand").prop("checked");e("#tandcErr").html(""),K||(e("#tandcErr").html("Please check the Terms and Conditions"),t=!0);var W=e("input[name='TQStatus_options']:checked").val();p.set("changeStatus",W)}if(!t){var V=e("input[name='requestreason']:checked").val();if("CHANGE_EXISTING_PIN"==V){p.set("reqType","CHANGE_EXISTING_PIN"),p.set("changeRequest","Change Existig PIN"),p.set("requestType","");var Q=e("#changePin_card_first").html(),j=e("#changePin_CardNumber").val(),H=e("#changePin_card_last").html(),X=Q+"****"+j+H;p.set("cardManage_maskedCardNumber",X);var J=e("#changePin_cardManage_ExpYear option:selected").val();p.set("cardMangae_ExpYear",J);var z=e("#changePin_cardManage_ExpMonth option:selected").val();p.set("cardMangae_ExpMonth",z);var $=e("#changePin_cardpin").val();p.set("cardManage_cardPin",$);var c=e("#changePin_oldpin").val();p.set("cardManage_oldpin",c);var P=e("#changePin_newpin").val();p.set("cardManage_pin",P)}else if("FORGOT_PIN"==V){p.set("reqType","FORGOT_PIN"),p.set("changeRequest","Forgot PIN"),p.set("requestType","");var Q=e("#forgotPin_card_first").html(),j=e("#forgotPin_CardNumber").val(),H=e("#forgotPin_card_last").html(),X=Q+"****"+j+H;p.set("cardManage_maskedCardNumber",X);var J=e("#forgotPin_cardManage_ExpYear option:selected").val();p.set("cardMangae_ExpYear",J);var z=e("#forgotPin_cardManage_ExpMonth option:selected").val();p.set("cardMangae_ExpMonth",z);var $=e("#forgotPin_cardpin").val();p.set("cardManage_cardPin",$);var P=e("#forgotPin_newpin").val();p.set("cardManage_pin",P),p.set("cardManage_oldpin","")}else if("GENERATE_NEW_PIN"==V){p.set("reqType","GENERATE_NEW_PIN"),p.set("changeRequest","Generate New PIN/Activate New Card"),p.set("requestType","");var Q=e("#generatePin_card_first").html(),j=e("#generatePin_CardNumber").val(),H=e("#generatePin_card_last").html(),X=Q+"****"+j+H;p.set("cardManage_maskedCardNumber",X);var J=e("#newPin_cardManage_ExpYear option:selected").val();p.set("cardMangae_ExpYear",J);var z=e("#newPin_cardManage_ExpMonth option:selected").val();p.set("cardMangae_ExpMonth",z);var $=e("#generatePin_cardpin").val();p.set("cardManage_cardPin",$);var P=e("#generatePin_newpin").val();p.set("cardManage_pin",P),p.set("cardManage_oldpin","")}else if("BLOCK_TEMP"==V)p.set("reqType","BLOCK_TEMP"),p.set("changeRequest","Temporary Card Block"),p.set("requestType","");else if("UNBLOCK_TEMP"==V)p.set("reqType","UNBLOCK_TEMP"),p.set("changeRequest","Unblock Temporarily Blocked Card"),p.set("requestType","");else if("BLOCK_REPLACE"==V)p.set("reqType","BLOCK_REPLACE"),p.set("changeRequest","Block and Replace of Card "),p.set("requestType","");else if("USD_PAYMENT_GATEWAY"==V){p.set("reqType","USD_PAYMENT_GATEWAY"),p.set("changeRequest","Foreign E-commerce"),p.set("requestType","");var Z=e("input[name='usdPGT_CurrentStatus']:checked").val();if(p.set("usdPGT_CurrentStatus",Z),"Enabled"==Z){var N=e("#usdPGT_remarksList option:selected").val();p.set("usdPGTRemarks",N);var T=e("#usdPGT_FromDate").val(),G=T.split("-"),C=G[2],w=G[1],I=G[0],ee=I+w+C;p.set("selectedFromDate",ee);var ae=C+"-"+w+"-"+I;p.set("usdPGTFromDate",ae);var E=e("#usdPGT_ToDate").val(),M=E.split("-"),k=M[2],S=M[1],y=M[0],re=y+S+k;p.set("selectedToDate",re);var te=k+"-"+S+"-"+y;p.set("usdPGTToDate",te);var v=e("#usdPGT_FromTime").val(),R=v.split(":"),A=R[0],F=R[1],ne=A+F;p.set("selectedFromTime",ne);var ie=A+":"+F;p.set("usdPGTFromTime",ie);var f=e("#usdPGT_ToTime").val(),L=f.split(":"),B=L[0],O=L[1],de=B+O;p.set("selectedToTime",de);var oe=B+":"+O;p.set("usdPGTToTime",oe)}else"Disabled"==Z&&(p.set("usdPGTRemarks",null),p.set("usdPGTFromDate",null),p.set("usdPGTToDate",null),p.set("usdPGTFromTime",null),p.set("usdPGTToTime",null),p.set("selectedFromDate",null),p.set("selectedToDate",null),p.set("selectedFromTime",null),p.set("selectedToTime",null));
}else if("FOREIGN_TRANS_TQ"==n){p.set("reqType","FOREIGN_TRANS_TQ"),p.set("requestType","Foreign Transaction TQ"),p.set("changeRequest","");var $=e("#cardPinForeignTrans").val();p.set("forgeignCardPin",$)}var i=e("ul.card_type").find("li.active").attr("data");if("debitCard"==i)p.set("cardManage_cardType","Debit Card"),p.set("cardType","DC");else if("creditCard"==i)p.set("cardManage_cardType","Credit Card"),p.set("cardType","CC");else if("prepaidCard"==i)p.set("cardManage_cardType","Prepaid Card"),p.set("cardType","PC");else if("ACTV_NCRD"==V){p.set("reqType","ACTV_NCRD"),p.set("changeRequest","Activate New Card");var J=e("#AcrNcrd_cardManage_ExpYear option:selected").val();p.set("cardMangae_ExpYear",J);var z=e("#AcrNcrd_cardManage_ExpMonth option:selected").val();p.set("cardMangae_ExpMonth",z);var $=e("#AcrNcrd_cardpin").val();p.set("cardManage_cardPin",$);var P=e("#AcrNcrd_newpin").val();p.set("cardManage_pin",P),p.set("cardManage_oldpin","")}var d=e("#cardList option:selected").val();p.set("cardManage_shadowcardno",d);var X=e("#cardList option:selected").html(),le=X.split("-"),se=le[1].slice(0,2),ce=le[0]+se+"******"+le[3];p.set("cardManage_CardNumber",ce);var Pe=le[0]+"-"+se+"XX-XXXX-"+le[3];p.set("cardManage_MaskedX_CardNumber",Pe);var pe=e("input[name='cardmanage_authmode']:checked").val();p.set("cardManage_authMode",pe),r.validateRequest(a)}}},validateRequest:function(a){var t="";a.stopImmediatePropagation();var i=(new Date).getTime();p.set("TempBlck",null);var t=p.get("cardMangae_ExpYear")+p.get("cardMangae_ExpMonth"),d=p.get("cardManage_cardPin"),o=p.get("cardManage_shadowcardno"),l=p.get("cardManage_CardNumber"),s=p.get("cardManage_maskedCardNumber");if("CHANGE_EXISTING_PIN"==p.get("reqType"))var _=p.get("cardManage_oldpin");if("BLOCK_TEMP"==p.get("reqType")){var m=e("#cardPinTEMPBlk").val();p.set("cardPinTemp",m);var u=e("#resonList option:selected").text();p.set("reasonTempBlck",u)}if("UNBLOCK_TEMP"==p.get("reqType")){var u=e("#reasonforreqTeMPUNBLCK option:selected").text();p.set("reasonTempBlck",u)}if("BLOCK_REPLACE"==p.get("reqType")){var m=e("#cardPinBkckndREPLC").val();p.set("cardPinTemp",m);var h=e("input[name='authReq']:checked").val();p.set("authRequest",h);var g=e("input[name='replcReq']:checked").val();p.set("requestreason",g)}if("USD_PAYMENT_GATEWAY"==p.get("reqType")){var T=e("#usdPGT_cardPin").val();p.set("usdCardPIN",T)}if("FOREIGN_TRANS_TQ"==p.get("reqType")){var v=e("#cardPinForeignTrans").val();p.set("foreignCardPin",v)}var E,f=e("input[name='requestreason']:checked").val();"CHANGE_EXISTING_PIN"==f||"FORGOT_PIN"==f||"GENERATE_NEW_PIN"==f?E=p.get("cardManage_pin"):"BLOCK_TEMP"==f||"BLOCK_REPLACE"==f?E=p.get("cardPinTemp"):"USD_PAYMENT_GATEWAY"==f?E=p.get("usdCardPIN"):"FOREIGN_TRANS_TQ"==p.get("reqType")&&(E=p.get("foreignCardPin"));var b=EncryptWithDynamicSalt(t,i),N=EncryptWithDynamicSalt(d,i),D=EncryptWithDynamicSalt(E,i),G=EncryptWithDynamicSalt(o,i);if("CHANGE_EXISTING_PIN"==f||"FORGOT_PIN"==f||"GENERATE_NEW_PIN"==f)var C=EncryptWithDynamicSalt(s,i);else if("BLOCK_TEMP"==f||"UNBLOCK_TEMP"==f||"BLOCK_REPLACE"==f||"USD_PAYMENT_GATEWAY"==f||"FOREIGN_TRANS_TQ"==f)var C=EncryptWithDynamicSalt(l,i);if("CHANGE_EXISTING_PIN"==p.get("reqType"))var w=EncryptWithDynamicSalt(_,i);var I=(DEcryptWithDynamicSalt(C,i),DEcryptWithDynamicSalt(D,i),this);if(showSpinner(),"UNBLOCK_TEMP"!=p.get("reqType")){var M=function(e){hideSpinner(),c="",P="",r.history.navigate("#/cardmanageverify")},k=function(a){I.errorresponse(),"CHANGE_EXISTING_PIN"==p.get("reqType")?(e("#changePin_cardpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#changePin_oldpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#changePin_newpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#changePin_confirmpin").pincodeInput().data("plugin_pincodeInput").clear()):"FORGOT_PIN"==p.get("reqType")?(e("#forgotPin_cardpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#forgotPin_newpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#forgotPin_confirmpin").pincodeInput().data("plugin_pincodeInput").clear()):"GENERATE_NEW_PIN"==p.get("reqType")?(e("#generatePin_cardpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#generatePin_newpin").pincodeInput().data("plugin_pincodeInput").clear(),e("#generatePin_confirmpin").pincodeInput().data("plugin_pincodeInput").clear()):"BLOCK_TEMP"==p.get("reqType")?e("#cardPinTEMPBlk").pincodeInput().data("plugin_pincodeInput").clear():"UNBLOCK_TEMP"==p.get("reqType")||("USD_PAYMENT_GATEWAY"==p.get("reqType")?e("#usdPGT_cardPin").pincodeInput().data("plugin_pincodeInput").clear():"FOREIGN_TRANS_TQ"==p.get("reqType")&&e("#cardPinForeignTrans").pincodeInput().data("plugin_pincodeInput").clear())},S=p.get("changeStatus");"ON"==S?S="Enabled":(S="OFF")&&(S="Disabled"),I.collection=new n,I.collection.fetch({data:e.param({access_token:p.get("access_token"),cardType:p.get("cardType"),expdate:b,pinno:D,cvv:N,shadowno:G,maskedno:C,oldpinno:w,salt:i,acctId:p.get("forgotPinFromAccId"),requestType:p.get("reqType"),memo:"",authMode:p.get("cardManage_authMode"),fromDate:p.get("selectedFromDate"),toDate:p.get("selectedToDate"),fromTime:p.get("selectedFromTime"),toTime:p.get("selectedToTime"),currentStatus:p.get("usdPGT_CurrentStatus"),remarks:p.get("usdPGTRemarks"),changeStatus:S}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?M(e):k(e)},error:k})}else hideSpinner(),r.history.navigate("#/cardmanageverify")},gotoServiceRequestPage:function(e){e.stopImmediatePropagation(),r.history.navigate("#/servicerequest")},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(e){return r.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return _});