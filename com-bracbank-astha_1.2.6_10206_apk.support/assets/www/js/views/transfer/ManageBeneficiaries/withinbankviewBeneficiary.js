define(["jquery","underscore","Backbone","text!views/transfer/ManageBeneficiaries/withinbankviewBeneficiary.tpl","collections/manageBeneficiaries/getBeneficiariesCollection"],function(e,t,n,i,a){var s=new EncryptedLocalStorage("secret"),r=n.View.extend({el:"#container",events:{"click #add_bene":"loadaddBeneUI","click #selectbene_btn":"loadselectbene"},initialize:function(){},update:function(){var t=this,n=(s.get("Rval"),s.get("isGetBeneficiaryList"));if("false"==n){var i=function(n){hideSpinner(),s.set("isGetBeneficiaryList","true"),e("html").removeClass().addClass("app"),t.loadtemplete()},r=function(e){t.errorresponse()};showSpinner(),t.collection=new a,t.collection.fetch({data:e.param({access_token:s.get("access_token"),trSubTypeId:"BRAC"}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?i(e):r(e)},error:r})}else e("html").removeClass().addClass("app"),t.loadtemplete()},loadtemplete:function(){e("#container").html(t.template(i))},loadselectbene:function(t){t.stopImmediatePropagation();var i=e("input[name='beneId']:checked").val();s.set("selectid",i);var a=e("input[name='beneId']:checked").attr("shortName");s.set("deleteBene",a);var r=e("input[name='beneId']:checked").attr("accNum");s.set("deletebeneaccnum",r),n.history.navigate("#/withinselectbene")},loadaddBeneUI:function(e){e.stopImmediatePropagation(),s.set("isTransfer","false"),s.set("isGetBeneficiaryList","true"),n.history.navigate("#/withinbankaddbene")},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return r});