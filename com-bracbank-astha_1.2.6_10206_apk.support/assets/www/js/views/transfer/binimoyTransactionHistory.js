define(["jquery","underscore","Backbone","collections/transfer/getDirectPayTransHistoryCollections","collections/transfer/getRTPSentListCollections","collections/transfer/getRTPReceiveListCollections","text!views/transfer/directPayTransactionHistory.tpl","text!views/transfer/sentRTPListHistory.tpl","text!views/transfer/receiveRTPListHistory.tpl","text!views/transfer/binimoyTransactionHistory.tpl"],function(t,e,i,o,n,r,a,s,c,l){var y=new EncryptedLocalStorage("secret"),p=i.View.extend({el:"#container",events:{"click #directPayTransHistory":"loadDirectPayTransactionHistory","click #sentRTPTransHistory":"loadSentRTPTransactionHistory","click #receiveRTPTransHistory":"loadReceiveRTPTransactionHistory","click #binimoyTransHistory_SearchBox":"filterBinimoyTransactionHistoryList","click #binimoyTransHistory_Filter":"openBinimoyTransactionHistoryFilterPopup","click #binimoyTransHistory_FilterBtn":"filterBinimoyTransactionHistory"},initialize:function(){},render:function(){this.$el.html(e.template(l)),t("html").removeClass().addClass("app"),t("#directPayTransHistory").attr("checked",!0);var i=this;i.getDirectPayTransactionHistory();var o=t("#binimoyTransHistoryFilterDiv").find("span").attr("id");enableScroll(o)},loadDirectPayTransactionHistory:function(e){e.stopImmediatePropagation(),t("#directPayTransHistory").attr("checked",!0);var i=this;i.getDirectPayTransactionHistory(e)},getDirectPayTransactionHistory:function(i){"object"==typeof i&&i.stopImmediatePropagation();var n=this;y.set("IsAuthMode","false"),t("#binimoyRegAuthModeDiv").html("");var r=function(i){hideSpinner(),t("#transHistoryTemplateDiv").html(e.template(a))},s=function(t){hideSpinner(),n.errorresponse()};showSpinner(),n.collection=new o,n.collection.fetch({data:t.param({access_token:y.get("access_token"),from_date:"",to_date:"",page_no:"1"}),dataType:"json",type:"POST",cache:!1,success:function(t){"0000"==ackStatus?r(t):s(t)},error:s})},loadSentRTPTransactionHistory:function(e){e.stopImmediatePropagation(),t("#sentRTPTransHistory").attr("checked",!0);var i=this;i.getSentRTPListHistory(e)},getSentRTPListHistory:function(i){"object"==typeof i&&i.stopImmediatePropagation();var o=this,r=function(i){hideSpinner(),t("#transHistoryTemplateDiv").html(e.template(s))},a=function(t){hideSpinner(),o.errorresponse()};showSpinner(),o.collection=new n,o.collection.fetch({data:t.param({access_token:y.get("access_token"),page_no:"1",from_date:"",to_date:""}),dataType:"json",type:"POST",cache:!1,success:function(t){"0000"==ackStatus?r(t):a(t)},error:a})},loadReceiveRTPTransactionHistory:function(e){e.stopImmediatePropagation(),t("#receiveRTPTransHistory").attr("checked",!0);var i=this;i.getReceivedRTPListHistory(e)},getReceivedRTPListHistory:function(i){"object"==typeof i&&i.stopImmediatePropagation(),showSpinner();var o=this,n=function(i){hideSpinner(),t("#transHistoryTemplateDiv").html(e.template(c))},a=function(t){hideSpinner(),o.errorresponse()};showSpinner(),o.collection=new r,o.collection.fetch({data:t.param({access_token:y.get("access_token"),page_no:"1",from_date:"",to_date:""}),dataType:"json",type:"POST",cache:!1,success:function(t){"0000"==ackStatus?n(t):a(t)},error:a})},filterBinimoyTransactionHistoryList:function(e){e.stopImmediatePropagation();jQuery.expr[":"].contains=function(t,e,i){return jQuery(t).text().toUpperCase().indexOf(i[3].toUpperCase())>=0};var i=e.target.value;i.length>0?(t(".search_clear").is(":visible")||(t(".search_clear").show(),t(".search_clear").on("click",function(){t("#binimoyTransHistory_SearchBox").val(""),t(".binimoyTransactionList").show(),t("#binimoyTransHistory_SearchBox").focus(),t(".search_clear").hide(),t(".nodata").hide()})),t(".binimoyTransactionList").hide(),t('.binimoyTransactionList:contains("'+i+'")').length>0?(t(".nodata").hide(),t('.binimoyTransactionList:contains("'+i+'")').show()):t(".nodata").show()):(t(".search_clear").hide(),t(".nodata").hide(),t(".binimoyTransactionList").show())},openBinimoyTransactionHistoryFilterPopup:function(e){e.stopImmediatePropagation(),t("#filterPopup").modal("open")},filterBinimoyTransactionHistory:function(e){e.stopImmediatePropagation(),t("#fromDateErr").html(""),t("#toDateErr").html("");var i=this,o=t("#binimoytranshistory_fromDate").val(),n=t("#binimoytranshistory_toDate").val();return isNull(o)?void t("#fromDateErr").html("Please select a From Date"):isNull(n)?void t("#toDateErr").html("Please select a To Date"):void i.gotoFilterBinimoyTransactionHistoryCall(e)},gotoFilterBinimoyTransactionHistoryCall:function(t){t.stopImmediatePropagation()},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(t){return i.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=t,this.currentView.delegateEvents(),this.currentView}});return p});