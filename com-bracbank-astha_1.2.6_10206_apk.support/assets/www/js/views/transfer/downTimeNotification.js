define(["jquery","underscore","Backbone","text!views/transfer/downTimeNotification.tpl"],function(e,i,t,n){var o=new EncryptedLocalStorage("secret"),s=t.View.extend({el:"#container",events:{},initialize:function(){},update:function(){this.$el.html(i.template(n)),e("html").removeClass().addClass("app");var t;if(t="bKashPullMoney"==o.get("downtimeTransType")?o.get("bKashPullMoneydowntimeNotification"):o.get("downtimeNotification"),!isNull(t)&&t.length>0){var s=(t[0].downtimeNotificationDetail,"");e.each(t,function(e,i){if("BOTH"==i.subTransactionType||"ONE-OFF"==i.subTransactionType||"REGISTERED"==i.subTransactionType){var t=i.downtimeNotificationDetail,n=t[e].messageMobile;isNull(n)||(s+="<p>"+n+"</p>")}else if("OTHERBANK"==o.get("downtimeTransType"))if("ONE-OFF"==i.subTransactionType){if("N"==o.get("isBeneAllDown")&&"Y"==o.get("isOneOffAllDown")){var t=i.downtimeNotificationDetail,n=t[e].messageMobile;isNull(n)||(s+="<p>"+n+"</p>")}}else if("REGISTERED"==i.subTransactionType)if("Y"==o.get("isBeneAllDown")&&"N"==o.get("isOneOffAllDown")){var t=i.downtimeNotificationDetail,n=t[e].messageMobile;isNull(n)||(s+='<p id="opendataurl">'+n+"</p>")}else if("Y"==o.get("isNPSBOnlyDown")){var t=i.downtimeNotificationDetail,n=t[e].messageMobile;isNull(n)||(s+='<p id="opendataurl">'+n+"</p>")}}),e("#notificationMessage").html(e.parseHTML(s))}},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(e){return t.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});