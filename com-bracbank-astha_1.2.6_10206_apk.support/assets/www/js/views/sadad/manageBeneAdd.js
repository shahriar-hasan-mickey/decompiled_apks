define(["jquery","underscore","Backbone","collections/creditcard/manageBeneAddCollections","routers/creditcardrouter","text!views/creditcard/manageBeneAdd.tpl","models/validation/activateCreditCardValidationModel"],function(e,n,t,i,r,o,a){var c=t.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #validateCardPin":"validateCardandPin"},initialize:function(){},update:function(){els.set("currentPage","");var n=this;e("#spinner").show();var t=function(e){n.listcompile()},r=function(e){n.errorresponse()};n.collection=new i([],{}),n.collection.fetch({dataType:"json",type:"POST",cache:!1,success:function(e){"00000"==ackStatus?t(e):r(e)},error:r})},listcompile:function(){this.$("#mobcontent").html(n.template(o)),e("#spinner").hide()},errorresponse:function(){t.history.navigate("#/exception")},validateCardandPin:function(){showSpinner(),this.model=new a({url:"json/"}),this.$(".alert").hide(),t.Validation.bind(this);var n=this.$("form").serializeObject();if(this.model.set(n,{validate:!0})){this.model.clear(),t.Validation.unbind(this),e("#spinner").hide();var r=this,o=function(e){r.showOTP()},c=function(e){r.errorresponse()};r.collection=new i([],{}),timestamp=(new Date).getTime(),r.collection.fetch({dataType:"json",type:"POST",cache:!1,success:function(e){"00000"==ackStatus?o(e):c(e)},error:c})}else this.$(".alert-error").fadeIn()},showOTP:function(){var n=e("#nickname").val(),i=e("#shbcardno").val();t.history.navigate("#/manageBeneAddConfirm/"+n+"/"+i),hideSpinner()},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")},disposeView:function(e){return t.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return c});