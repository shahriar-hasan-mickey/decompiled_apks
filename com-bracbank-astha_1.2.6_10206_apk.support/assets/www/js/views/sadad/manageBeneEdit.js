define(["jquery","underscore","Backbone","collections/creditcard/manageBeneEditCollections","routers/creditcardrouter","text!views/creditcard/manageBeneEdit.tpl","models/validation/activateCreditCardValidationModel"],function(e,t,i,n,r,o,a){var c=i.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #validateCardPin":"validateCardandPin"},initialize:function(){},update:function(e){var t=this;els.set("currentPage","");var i=function(i){t.listcompile(e)},r=function(e){t.errorresponse()};t.collection=new n([],{}),showSpinner(),t.collection.fetch({dataType:"json",type:"POST",cache:!1,success:function(e){"00000"==ackStatus?i(e):r(e)},error:r})},listcompile:function(e){hideSpinner(),this.$("#mobcontent").html(t.template(o,{card:e})).i18n()},errorresponse:function(){hideSpinner(),i.history.navigate("#/exception")},validateCardandPin:function(){this.model=new a({url:"json/"}),this.$(".alert").hide(),i.Validation.bind(this);var e=this.$("form").serializeObject();if(this.model.set(e,{validate:!0})){this.model.clear(),i.Validation.unbind(this),showSpinner();var t=this,r=function(e){t.showOTP()},o=function(e){t.errorresponse()};t.collection=new n([],{}),timestamp=(new Date).getTime(),t.collection.fetch({dataType:"json",type:"POST",cache:!1,success:function(e){"00000"==ackStatus?r(e):o(e)},error:o})}else this.$(".alert-error").fadeIn(),hideSpinner()},showOTP:function(){var t=e("#nickname").val(),n=e("#card").text();hideSpinner(),i.history.navigate("#/manageBeneEditOtp/"+t+"/"+n)},errorresponse:function(){hideSpinner(),i.history.navigate("#/exception")},disposeView:function(e){return i.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return c});