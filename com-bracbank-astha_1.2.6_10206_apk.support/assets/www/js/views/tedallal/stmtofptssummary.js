define(["jquery","underscore","Backbone","collections/tedallal/statementOfPointsCollections","collections/tedallal/statementOfPointsPdfCollections","text!views/tedallal/stmtofptssummary.tpl"],function(e,a,t,n,r,l){var o=new EncryptedLocalStorage("secret"),s=t.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #pdf":"pdfDownload"},render:function(){var a=this;showSpinner();var t=o.get("Month"),r=o.get("Year"),l=o.get("lmsreqid");a.collection=new n([],{});var s=function(e){a.stmtofptssummary()},d=function(e){a.errorresponse()};a.collection.fetch({data:e.param({channelcode:"MOBILE",monthcode:t,yearcode:r,requestusername:l}),dataType:"json",type:"POST",timeout:parseInt(o.get("calltimeout")),cache:!1,success:function(e){"0000"==ackStatus?s(e):d(e)},error:d})},Month:function(){var a=o.get("Month"),t="";switch(a){case"JAN":t=e.i18n.t("app.tedallalrewards.jan");break;case"FEB":t=e.i18n.t("app.tedallalrewards.feb");break;case"MAR":t=e.i18n.t("app.tedallalrewards.mar");break;case"APR":t=e.i18n.t("app.tedallalrewards.apr");break;case"MAY":t=e.i18n.t("app.tedallalrewards.may");break;case"JUN":t=e.i18n.t("app.tedallalrewards.jun");break;case"JUL":t=e.i18n.t("app.tedallalrewards.jul");break;case"AUG":t=e.i18n.t("app.tedallalrewards.aug");break;case"SEP":t=e.i18n.t("app.tedallalrewards.sep");break;case"OCT":t=e.i18n.t("app.tedallalrewards.oct");break;case"NOV":t=e.i18n.t("app.tedallalrewards.nov");break;case"DEC":t=e.i18n.t("app.tedallalrewards.dec")}return o.set("dtMonth",t),t},pdfDownload:function(){showSpinner();var e=o.get("appSessionId"),a=o.get("app.context.path");appurl=a+"user/lmsstatement/download.pdf";var t=o.get("lang_id"),n="PDF",r=o.get("Month"),l=o.get("Year"),s="download="+n+"&lang_id="+t+"&moncode="+r+"&yrcode="+l,d=encodeURI(s);fileDownLoadAndViewer(appurl,d,1,e)},stmtofptssummary:function(){this.Month(),hideSpinner(),this.$("#mobcontent").html(a.template(l))},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")}});return s});