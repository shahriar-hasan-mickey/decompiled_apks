define(["jquery","underscore","Backbone","routers/tedallalrouter","collections/tedallal/redeemPointsCollections","text!views/tedallal/redemptionconfirm.tpl"],function(e,t,n,o,r,c){var i=new EncryptedLocalStorage("secret"),s=n.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #submit":"submit","click #cancel":"cancel"},update:function(){showSpinner();var t=this;t.collection=new r([],{});var n=function(e){t.showConfirmTemplate()},o=function(e){t.errorresponse()},c=i.get("lmsrewards"),s=i.get("custno"),a=c[0],p=c[1],u=i.get("avilPoints"),l=i.get("otpModule");i.set("otpModule","");var d=getDeviceId(),m=p+""+a+d,h=CryptoJS.MD5(m);m=h+"",t.collection.fetch({data:e.param({appchecksum:m,channelcode:"MOBILE",requestname:"",requestdatetime:"",outletcode:"",description:"message",redemptiontypecode:"VCRDM",vouchertypecode:"M",partnercode:"ALL",partnermembershipnumber:"123123",productcode:"CRDR",pointsvalue:p,pointsInVoucher:i.get("tot_Rew_Points"),quantity:a,servicecode:"Voucher Redemption",customernumber:s,servicerequesttype:"014",avilPoints:u,isOtpUsed:i.get("isOtpUsed"),opttype:l}),dataType:"json",type:"POST",timeout:parseInt(i.get("calltimeout")),cache:!1,success:function(e){"0000"==ackStatus?n(e):o(e)},error:o})},showConfirmTemplate:function(){hideSpinner(),this.$("#mobcontent").html(t.template(c))},submit:function(){i.set("currentPage",""),n.history.navigate("#/wealth")},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")}});return s});