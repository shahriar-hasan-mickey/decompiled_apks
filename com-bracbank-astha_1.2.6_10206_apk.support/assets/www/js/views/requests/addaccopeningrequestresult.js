define(["jquery","underscore","Backbone","collections/requests/saveAdditionalAccountCollections","text!views/requests/addaccopeningrequestresult.tpl"],function(e,t,a,c,n){var r=new EncryptedLocalStorage("secret"),o=a.View.extend({el:"#mobcontent",events:{"click #postingrequest":"doanotherrequest","click #addopenlocatusurl":"addopenlocatusurl"},initialize:function(){},render:function(){r.set("promoid",""),hideSpinner(),r.set("currentPage","transferConfirm");var t=this;timestamp=(new Date).getTime();var a=function(e){t.requestcompile()},n=function(e){t.errorresponse()};t.collection=new c([],{}),timestamp=(new Date).getTime(),showSpinner();var o="",i=r.get("lang_id");"en-US"==i?o="EN":"en-AR"==i&&(o="AR");var s=r.get("myaccounts"),u=(r.get("accountNumber"),getDeviceId()),d=r.get("aacaccountTypeDesc");d=d.replace(/\s+/g,"+");var l;r.get("aacpurposeofAccountDesc"),r.get("shamd5flagreqcheck");l=s[0].accountNumber+""+u;var p=CryptoJS.MD5(l);l=p+"";var g=r.get("birthdate");g=g.split("/"),g=g[0]+""+g[1]+g[2];var m=r.get("aacdeliveryType"),h=r.get("accDebitCardUsed");h="YES"==h&&"Post"!=m?"1":"0";var v,y=r.get("custname");return y.length<=24?v=y:(y=y.replace(/([a-z]+) .* ([a-z]+)/i,"$1 $2"),v=y),t.collection.fetch({data:e.param({requestid:timestamp,language:o,hidcurrency:r.get("aaccurrencyType"),hidcategory:r.get("aacaccountTypeVal"),hidcategoryval:r.get("aacaccountTypeDesc"),modeofdelv:r.get("aacmodeOfDelivery"),hiddebitrequired:h,hidpurpose:r.get("aacpurposeofAccountDesc"),hidaccountno:s[0].accountNumber,nin_iqama:r.get("iqama_number"),hidnameoncard:v,hidcustomername:r.get("custname"),hiddob:g,appchecksum:l}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(r.get("calltimeout")),success:function(e){"0000"==ackStatus?a(e):n(e)},error:n}),this},requestcompile:function(){hideSpinner();var e=r.get("myaccounts");r.set("myaccountslength",e.length+1),this.$el.html(t.template(n)).i18n()},errorresponse:function(){hideSpinner(),a.history.navigate("#/exception")},addopenlocatusurl:function(){r.get("lang_id")}});return o});