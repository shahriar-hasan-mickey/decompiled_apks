define(["jquery","underscore","Backbone","collections/creditcard/creditCardLimitOtpResultCollections","text!views/requests/debitcardlimitcontrolconfirmrequest.tpl","views/requests/applyhomefinancerequestresult"],function(e,t,i,n,r,o){var s=new EncryptedLocalStorage("secret"),a=i.View.extend({el:"#mobcontent",events:{"click #applyhomefinancerequestposting":"applyhomefinancerequestposting"},initialize:function(){},render:function(){showSpinner(),this.requestcompile()},requestcompile:function(){return hideSpinner(),e(this.el).html(t.template(r,{})).i18n(),this.$el.trigger("create"),this},applyhomefinancerequestposting:function(){var t=s.get("custno"),i=s.get("acceptcampaign"),r=s.get("promoid"),o=new Array;o[0]=e("#fintype").val(),o[1]=e("#name").val(),o[2]=e("#mobno").val(),o[3]=e("#dob").val(),o[4]=e("#city").val(),o[5]=e("#employername").val(),o[6]=e("#lengthofservice").val(),o[7]=e("#grosssalary").val(),o[8]=e("#reqamt").val(),"Y"==i&&(o[9]="Origin");var a=JSON.stringify(o),c=new Array;c[0]=s.get("hffintype"),c[1]=s.get("hfename"),c[2]=s.get("hfmobno"),c[3]=s.get("hfdob"),c[4]=s.get("hfcity"),c[5]=s.get("hfemployername"),c[6]=s.get("hflength"),c[7]=s.get("hfsal"),c[8]=s.get("hfamt"),"Y"==i&&(c[9]="Crossselling");var l=JSON.stringify(c),p=this;showSpinner();var u=function(e){p.postingcompile()},h=function(e){p.errorresponse()};p.collection=new n([],{id:t});e("form").serialize();p.collection.fetch({data:e.param({requestid:timestamp,servicerequestname:"RequestALoan",customernumber:t,servicerequesttype:"007",actionFlag:i,campainId:r,name:a,value:l}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(s.get("calltimeout")),success:function(e){"0000"==ackStatus?u(e):h(e)},error:h})},postingcompile:function(){s.set("cidforhf",""),s.set("acceptcampaign",""),hideSpinner(),this.undelegateEvents(),i.history.navigate("#/debitcardlimitcontrolOTP")},errorresponse:function(){hideSpinner(),i.history.navigate("#/exception")},disposeView:function(e){return i.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return a});