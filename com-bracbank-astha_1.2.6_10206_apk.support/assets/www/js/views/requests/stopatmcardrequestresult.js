define(["jquery","underscore","Backbone","collections/requests/blockDebitCardRequestPostingCollections","text!views/requests/stopatmcardrequestresult.tpl"],function(e,t,r,n,c){var o=new EncryptedLocalStorage("secret"),s=r.View.extend({el:"#mobcontent",events:{"click #postingrequest":"doanotherrequest"},initialize:function(){},render:function(){var t=this;timestamp=(new Date).getTime();var r=function(e){t.stopatmcardrequestres()},c=function(e){t.errorresponse()};t.collection=new n([],{}),showSpinner(),timestamp=(new Date).getTime();var s="DC",a="BLK_DEBITCARD",i=(o.get("stopCardNo"),o.get("stopCardMaskNo"),o.get("repreason")),u=o.get("rplacecard"),p=o.get("primaryAccount"),l=o.get("cardtypeDesc"),d=i+s+l+a;d=null==d?"":d,checkSumEncrypt(d);var m=localStorage.getItem("FINALCHECKSUM"),g=l+o.get("appdynamicToken");g=CryptoJS.SHA512(g)+"",t.collection.fetch({data:e.param({appDynamicValue:g,appchecksum:m,access_token:o.get("access_token"),code:a,cardtype:s,accountNo:l,reason:i,shadowAccountNumber:p,reissue:u}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(o.get("calltimeout")),success:function(e){"0000"==ackStatus?r(e):c(e)},error:c})},stopatmcardrequestres:function(){return hideSpinner(),this.$el.html(t.template(c)).i18n(),this},errorresponse:function(){hideSpinner(),r.history.navigate("#/exception")},doanotherrequest:function(t){t.preventDefault(),e("#spinner").show(),e("#servicerequestMnu").trigger("click")}});return s});