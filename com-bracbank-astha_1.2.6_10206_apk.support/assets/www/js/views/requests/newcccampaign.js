define(["jquery","underscore","Backbone","models/requests/requestMetaFormModel","backbonevalidation","models/validation/requestValidationModel","collections/requests/applyFinanceRequestPostingCollections","collections/requests/requestVerificationCollections","text!views/requests/newcccampaignconfirm.tpl","text!views/requests/newcccampaign.tpl","views/requests/applynewcreditcardrequestresult"],function(e,t,i,n,a,r,s,o,l,c,d){var u=new EncryptedLocalStorage("secret"),p=i.View.extend({el:"#mobcontent",events:{"click #applynewcreditcardrequest":"gotoconfirmrequest","click #applynewcreditcardrequestposting":"applynewcreditcardrequestposting"},initialize:function(){},update:function(){u.set("currentPage","");var t=this;timestamp=(new Date).getTime();var i=function(e){t.requestcompile()},n=function(e){t.errorresponse()};t.collection=new s([],{}),"en-US"==e.i18n.lng()?language="EN":"en-AR"==e.i18n.lng()&&(language="AR"),showSpinner(),timestamp=(new Date).getTime(),t.collection.fetch({data:e.param({requestid:timestamp,service:"01",language:language,paramcode:"SRVNEWCC",status:"ACTIVE"}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(u.get("calltimeout")),success:function(e){"0000"==ackStatus?i(e):n(e)},error:n})},requestcompile:function(){return hideSpinner(),this.$el.html(t.template(c,{})).i18n(),this.$el.trigger("create"),this},applynewcreditcardrequestposting:function(){this.subview=this.disposeView(new d),this.subview.render(),this.undelegateEvents()},gotoconfirmrequest:function(t){e("#errorCheckBox").hide(),this.model=new r({url:"json/"}),this.$(".alert").hide(),i.Validation.bind(this);var a=this.$("form").serializeObject();if(this.model.set(a,{validate:!0})){this.model.clear(),i.Validation.unbind(this),t.preventDefault(),showSpinner(),this.model=new n({url:"json/"});u.get("userlogin"),u.get("lastName"),e("#embossname").val(),e("#noofdep").val(),u.get("mobileno"),e("#addr1").val(),e("#addr2").val(),e("#buildno").val(),e("#mailaddr").val(),e("#selectcity option:selected").val(),e("#zipcode").val(),e("#state").val(),e("#payopt").val(),e("#relmobno").val(),e("#empname").val(),e("#los").val(),e("#sal").val();if(!e("#iagreee").prop("checked"))return hideSpinner(),e("#errorCheckBox").show(),!1;this.verificationcompile()}},verificationcompile:function(){var t=u.get("userlogin"),n=u.get("lastName"),a=e("#embossname").val(),r=e("#noofdep").val(),s=u.get("usermobile"),o=e("#addr1").val(),l=e("#addr2").val(),c=e("#buildno").val(),d=e("#mailaddr").val(),p=e("#selectcity option:selected").val(),v=e("#zipcode").val(),m=e("#state").val(),h=e("#payopt").val(),g=e("#relmobno").val(),w=e("#empname").val(),f=e("#los").val(),q=e("#sal").val(),y=new Array;y[0]=t,y[1]=n,y[2]=a,y[3]=r,y[4]=s,y[5]=o,y[6]=l,y[7]=c,y[8]=d,y[9]=p,y[10]=v,y[11]=m,y[12]=h,y[13]=w,y[14]=g,y[15]=f,y[16]=q,hideSpinner(),u.set("applynewcc",y),i.history.navigate("#/applynewcccampaignconfirm")},errorresponse:function(){hideSpinner(),i.history.navigate("#/exception")},disposeView:function(e){return i.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return p});