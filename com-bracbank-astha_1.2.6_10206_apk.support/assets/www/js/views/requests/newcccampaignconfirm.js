define(["jquery","underscore","Backbone","collections/creditcard/creditCardLimitOtpResultCollections","text!views/requests/newcccampaignconfirm.tpl","routers/creditcardrouter"],function(e,t,r,n,i,a){var o=new EncryptedLocalStorage("secret"),s=r.View.extend({el:"#mobcontent",events:{"click #applynewcreditcardrequestposting":"applynewcreditcardrequestposting"},initialize:function(){new a},render:function(){this.requestcompile()},requestcompile:function(){return hideSpinner(),e(this.el).html(t.template(i,{})).i18n(),this.$el.trigger("create"),this},applynewcreditcardrequestposting:function(){var t=o.get("custno"),r=new Array;r[0]=e("#firstname").val(),r[1]=e("#lastname").val(),r[2]=e("#embossname").val(),r[3]=e("#noofdep").val(),r[4]=e("#mobno").val(),r[5]=e("#addr1").val(),r[6]=e("#addr2").val(),r[7]=e("#buildno").val(),r[8]=e("#mailaddr").val(),r[9]=e("#selectcity").val(),r[10]=e("#zipcode").val(),r[11]=e("#state").val(),r[12]=e("#payopt").val(),r[13]=e("#empname").val(),r[14]=e("#relmobno").val(),r[15]=e("#los").val(),r[16]=e("#sal").val(),r[16]="Origin";var i=JSON.stringify(r),a=o.get("applynewcc");firstname=a[0],lastname=a[1],embossname=a[2],noofdep=a[3],mobno=a[4],addr1=a[5],addr2=a[6],buildno=a[7],mailaddr=a[8],addrcity=a[9],zipcode=a[10],state=a[11],payoption=a[12],employername=a[13],relmobno=a[14],los=a[15],sal=a[16];var s=(o.get("salaryreceivingdate"),new Array);s[0]=firstname,s[1]=lastname,s[2]=embossname,s[3]=noofdep,s[4]=mobno,s[5]=addr1,s[6]=addr2,s[7]=buildno,s[8]=mailaddr,s[9]=addrcity,s[10]=zipcode,s[11]=state,s[12]=payoption,s[13]=employername,s[14]=relmobno,s[15]=los,s[16]=sal,s[16]="Crossselling";var c=JSON.stringify(s),l="Y",d=o.get("promoid"),p=this;showSpinner();var m=function(e){p.postingcompile()},u=function(e){p.errorresponse()};p.collection=new n([],{id:t});e("form").serialize();p.collection.fetch({data:e.param({requestid:timestamp,servicerequestname:"NewCreditCardRequest",customernumber:t,servicerequesttype:"006",name:i,value:c,actionFlag:l,campainId:d}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(o.get("calltimeout")),success:function(e){"0000"==ackStatus?m(e):u(e)},error:u})},postingcompile:function(){o.set("promoid",""),r.history.navigate("#/applynewcreditcardrequestresult")},errorresponse:function(){hideSpinner(),r.history.navigate("#/exception")},disposeView:function(e){return r.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});