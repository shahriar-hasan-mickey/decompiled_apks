define(["jquery","underscore","Backbone","collections/creditcard/creditCardLimitOtpResultCollections","text!views/requests/applyhomefinanceconfirmrequest.tpl","text!views/requests/applyhomefinancerequestresult.tpl","views/requests/applyhomefinancerequestresult"],function(e,t,n,i,r,s,a){var o=new EncryptedLocalStorage("secret"),c=n.View.extend({el:"#mobcontent",events:{"click #applyhomefinancerequestposting":"applyhomefinancerequestposting"},initialize:function(){},render:function(){showSpinner(),this.requestcompile()},requestcompile:function(){return hideSpinner(),e(this.el).html(t.template(r,{fintype:fintype,ename:ename,mobno:mobno,dob:dob,city:city,employername:employername,length:length,sal:sal,amt:amt})).i18n(),this.$el.trigger("create"),this},applyhomefinancerequestposting:function(){var t=o.get("custno"),n=o.get("acceptcampaign"),r=o.get("promoid"),s=new Array;s[0]=e("#fintype").val(),s[1]=e("#name").val(),s[2]=e("#mobno").val(),s[3]=e("#dob").val(),s[4]=e("#city").val(),s[5]=e("#employername").val(),s[6]=e("#lengthofservice").val(),s[7]=e("#grosssalary").val(),s[8]=e("#reqamt").val(),"Y"==n&&(s[9]="Origin");var a=JSON.stringify(s),c=new Array;c[0]=o.get("hffintype"),c[1]=o.get("hfename"),c[2]=o.get("hfmobno"),c[3]=o.get("hfdob"),c[4]=o.get("hfcity"),c[5]=o.get("hfemployername"),c[6]=o.get("hflength"),c[7]=o.get("hfsal"),c[8]=o.get("hfamt"),"Y"==n&&(c[9]="Crossselling");var l=JSON.stringify(c),p=this;showSpinner();var u=function(e){p.postingcompile()},m=function(e){p.errorresponse()},h="RequestALoan",f="007",g=getDeviceId(),y=h+""+f+g,d=CryptoJS.MD5(y);y=d+"",p.collection=new i([],{id:t});e("form").serialize();p.collection.fetch({data:e.param({appchecksum:y,requestid:timestamp,servicerequestname:"RequestALoan",customernumber:t,servicerequesttype:"007",actionFlag:n,campainId:r,name:a,value:l}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(o.get("calltimeout")),success:function(e){"0000"==ackStatus?u(e):m(e)},error:m})},postingcompile:function(){o.set("cidforhf",""),o.set("acceptcampaign",""),hideSpinner(),this.undelegateEvents(),n.history.navigate("#/applyhomefinancerequestresult")},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return c});