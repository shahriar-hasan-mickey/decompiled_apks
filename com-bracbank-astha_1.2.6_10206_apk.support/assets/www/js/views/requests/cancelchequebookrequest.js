define(["jquery","underscore","Backbone","backbonevalidation","collections/requests/applyFinanceRequestPostingCollections","text!views/requests/cancelchequebookrequest.tpl"],function(e,t,n,i,o,c){var r=new EncryptedLocalStorage("secret"),a=n.View.extend({el:"#mobcontent",events:{"click #cancheqbookrequest":"verificationcompile"},initialize:function(){},update:function(){var t=this;timestamp=(new Date).getTime();var n=function(e){t.loadtemplate()},i=function(e){t.errorresponse()};t.collection=new o([],{}),timestamp=(new Date).getTime(),showSpinner();var c="",a=r.get("lang_id");"en-US"==a?c="EN":"en-AR"==a&&(c="AR"),t.collection.fetch({data:e.param({access_token:r.get("access_token"),language:c}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(r.get("calltimeout")),success:function(e){"0000"==ackStatus?(hideSpinner(),n(e)):i(e)},error:i})},loadtemplate:function(){return hideSpinner(),this.$el.html(t.template(c,{})).i18n(),this.$el.trigger("create"),this},verificationcompile:function(){e("#chequeBookSelection").hide();var t=e("input[type=radio]:checked").length;0==t?e("#chequeBookSelection").show():(e("input[type=radio]:checked").each(function(t,n){var i=e(n).attr("accountNo"),o=e(n).attr("referenceNo"),c=e(n).attr("branchName"),a=e(n).attr("noOfLeaves"),s=e(n).attr("noOfChequeBook");r.set("acc",i),r.set("ref",o),r.set("colbranch",c),r.set("leavesno",a),r.set("cheqbookno",s)}),n.history.navigate("#/cancelchequebookconfirmrequest"))},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return a});