define(["jquery","underscore","Backbone","text!views/dateline/showAssetGraph.tpl"],function(e,a,t,r){var n=new EncryptedLocalStorage("secret"),s=t.View.extend({el:"#mobcontent",events:{},update:function(){var t=this;e("#stmtchartdiv").empty(),this.$el.html(a.template(r,{})).i18n(),t.showGraph()},showGraph:function(){var a=new Array;e("#stmtchartdiv").show();var t,r=n.get("netWorth"),s="KWD</br>"+checkAmount(e.formatNumber(r,{format:"#,###.000",locale:"us"})),o=function(){var t=new Array,r=new Array,s=n.get("Assets_acctBalance"),o=n.get("Assets_mubasBalance"),i=n.get("Assets_tmeDpstBalance"),l=n.get("Liabilities_ccBalance"),d=n.get("Liabilities_homeBalance"),p=n.get("Liabilities_perBalance"),c=0;parseFloat(s)>0&&(t[c]=e.i18n.t("app.dateline.accounts")+" - "+parseFloat(s),r[c]=parseFloat(s),a[c]="#29A349",c++),parseFloat(o)>0&&(t[c]=e.i18n.t("app.dateline.investaccounts")+" - "+parseFloat(o),r[c]=parseFloat(o),a[c]="#2FBD55",c++),parseFloat(i)>0&&(t[c]=e.i18n.t("app.dateline.timedepst")+" - "+parseFloat(i),r[c]=parseFloat(i),a[c]="#47D16C",c++),parseFloat(l)>0&&(t[c]=e.i18n.t("app.dateline.ccard")+" - "+parseFloat(l),r[c]=parseFloat(l),a[c]="#F3510C",c++),parseFloat(d)>0&&(t[c]=e.i18n.t("app.dateline.homeloan")+" - "+parseFloat(d),r[c]=parseFloat(d),a[c]="#F56A2F",c++),parseFloat(p)>0&&(t[c]=e.i18n.t("app.dateline.personalloan")+" - "+parseFloat(p),r[c]=parseFloat(p),a[c]="#F78555",c++);var u=r,h=[[]];for(k=0;k<t.length;k++)h[0].push([t[k],u[k]]);return h},i=function(){t=jQuery.jqplot("stmtchartdiv",[],{seriesColors:a,title:s,dataRenderer:o,grid:{drawBorder:!1,drawGridlines:!1,background:"#ffffff",shadow:!1},axesDefaults:{},seriesDefaults:{shadow:!1,renderer:jQuery.jqplot.DonutRenderer,rendererOptions:{showDataLabels:!0,dataLabels:"percent",dataLabelFormatString:"%.2f%%",dataLabelPositionFactor:1.35,shadow:!1,dataLabelThreshold:0,sliceMargin:0,startAngle:-90,dataLabelCenterOn:!1,padding:0,innerDiameter:120,diameter:230}},legend:{rendererOptions:{numberRows:2,marginTop:10},show:!1,location:"s",placement:"outside"}})},l=function(){t=jQuery.jqplot("stmtchartdiv",[],{seriesColors:a,title:s,dataRenderer:o,grid:{drawBorder:!1,drawGridlines:!1,background:"#f2f2f2",shadow:!1},axesDefaults:{},seriesDefaults:{shadow:!1,renderer:jQuery.jqplot.DonutRenderer,rendererOptions:{showDataLabels:!0,dataLabels:"percent",dataLabelFormatString:"%.2f%%",dataLabelPositionFactor:1.35,shadow:!1,dataLabelThreshold:0,sliceMargin:0,startAngle:-90,dataLabelCenterOn:!1,padding:0,innerDiameter:120,diameter:230}},legend:{rendererOptions:{numberRows:2,marginTop:10},show:!1,location:"s",placement:"outside"}})},d=function(){t=jQuery.jqplot("stmtchartdiv",[],{seriesColors:a,title:s,dataRenderer:o,grid:{drawBorder:!1,drawGridlines:!1,background:"#00ab96",shadow:!1},axesDefaults:{},seriesDefaults:{shadow:!1,renderer:jQuery.jqplot.DonutRenderer,rendererOptions:{showDataLabels:!0,dataLabels:"percent",dataLabelFormatString:"%.2f%%",dataLabelPositionFactor:1.35,shadow:!1,color:"#ffffff",dataLabelThreshold:0,sliceMargin:0,startAngle:-90,dataLabelCenterOn:!1,padding:0,innerDiameter:120,diameter:230}},legend:{rendererOptions:{numberRows:2,marginTop:10},show:!1,location:"s",placement:"outside"}})},p=function(){t&&t.destroy();var e=getfromStorage("current_theme");"DEF"==e||null==e?i():"LIT"==e?l():"DRK"==e&&d()};setTimeout(function(){p()},500)},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")},disposeView:function(e){return t.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});