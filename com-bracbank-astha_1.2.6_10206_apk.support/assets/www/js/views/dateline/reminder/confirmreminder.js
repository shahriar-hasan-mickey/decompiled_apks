define(["jquery","underscore","Backbone","text!views/dateline/reminder/confirmreminder.tpl","collections/reminders/addReminderCollections"],function(e,n,t,r,i){var o=new EncryptedLocalStorage("secret"),a=t.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #addMoreReminder":"addMoreReminder","click #home":"home"},initialize:function(){},update:function(){showSpinner();var n=this;n.collection=new i([],{});var t=function(e){n.ReminderConfirmSuccess()},r=function(e){n.errorresponse()},a=o.get("reminderDescription"),c=o.get("reminderDate");n.collection.fetch({data:e.param({requestid:timestamp,remindertext:a,reminderdate:c}),dataType:"json",type:"POST",timeout:parseInt(o.get("calltimeout")),cache:!1,success:function(e){"0000"==ackStatus?t(e):r(e)},error:r})},ReminderConfirmSuccess:function(){hideSpinner(),o.set("currentPage","transferConfirm");var e=o.get("reminderDescription"),t=o.get("reminderDate"),i=t.split(" ");i=i[0].split("/");var a=t.split(" ");a=a[1],a=a.split(":");var c="",s=new Date(i[2],i[1]-1,i[0],a[0],a[1],a[2],0,0),d=new Date(i[2],i[1]-1,i[0],Number(a[0])+1,a[1],a[2],0,0);try{var m=function(e){},u=function(e){},l=window.plugins.calendar.getCalendarOptions();l.firstReminderMinutes=10,l.secondReminderMinutes=0,window.plugins.calendar.createEventWithOptions(e,c,e,s,d,l,m,u)}catch(p){}this.$("#mobcontent").html(n.template(r))},addMoreReminder:function(){showSpinner(),o.set("currentPage",""),t.history.navigate("#/reminderlist")},home:function(){o.set("currentPage",""),t.history.navigate("#/dateline")},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")}});return a});