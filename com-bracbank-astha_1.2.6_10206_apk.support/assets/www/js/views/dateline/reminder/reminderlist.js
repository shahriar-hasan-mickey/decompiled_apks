define(["jquery","underscore","Backbone","text!views/dateline/reminder/reminderlist.tpl","collections/reminders/reminderSummaryCollections","collections/reminders/deleteReminderCollections"],function(e,n,t,r,i,a){var c=new EncryptedLocalStorage("secret"),o=t.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #addReminder":"addReminder","click #delete":"DeleteApp"},initialize:function(){},update:function(){showSpinner(),c.set("currentPage","transferConfirm"),showSpinner();var n=this;n.collection=new i([],{});var t=function(e){n.showReminderList()},r=function(e){n.errorresponse()},a=c.get("customernumber"),o=c.get("lang_id");if("en-US"==o)var s="EN";else var s="AR";var d=getDeviceId(),l=a+""+d,m=CryptoJS.MD5(l);l=m+"",n.collection.fetch({data:e.param({language:s}),dataType:"json",type:"POST",timeout:parseInt(c.get("calltimeout")),cache:!1,success:function(e){"0000"==ackStatus?t(e):r(e)},error:r})},DeleteApp:function(n){var t=/iPad|iPhone|iPod|Android/.test(navigator.userAgent),r=this;if(t)navigator.notification.confirm(e.i18n.t("app.reminders.delete"),function(e){1==e&&r.deletereminder()},"",[e.i18n.t("app.mpin.yes"),e.i18n.t("app.mpin.no")]);else{if(!confirm(e.i18n.t("app.reminders.delete")))return;r.deletereminder()}},deletereminder:function(n){var t=this;t.collection=new a([],{});var r=e("#Reminders").val(),i=e("#RemindersDate").val(),o=e("#RemindersText").val(),s=function(e){t.update()},d=function(e){t.errorresponse()};showSpinner(),t.collection.fetch({data:e.param({requestid:timestamp,reminderid:r,remindertext:o,reminderdate:i}),dataType:"json",type:"POST",timeout:parseInt(c.get("calltimeout")),cache:!1,success:function(n){if("0000"==ackStatus){var t=c.get("remindersListDTO"),i="",a="";e.each(t,function(e){return t[e].reminderID==r?(i=t[e].reminderText,a=t[e].reminderDate,!1):void 0});var o=a.split(" ");o=o[0].split("/");var l=a.split(" ");l=l[1],l=l.split(":");var m=Number(o[1])-1;switch(o[1]){case"JAN":m="00";case"FEB":m="01";case"MAR":m="02";case"APR":m="03";case"MAY":m="04";case"JUN":m="05";case"JUL":m="06";case"AUG":m="07";case"SEP":m="08";case"OCT":m="09";case"NOV":m="10";case"DEC":m="11"}var p=o[2];try{var u=new Date(p,m,o[0],l[0],l[1],l[2],0,0),f=new Date(p,m,o[0],Number(l[0])+1,l[1],l[2],0,0),v=function(e){},h=function(e){};window.plugins.calendar.deleteEvent(i,"",i,u,f,v,h)}catch(g){}s(n)}else d(n)},error:d})},showReminderList:function(){hideSpinner(),this.$("#mobcontent").html(n.template(r))},addReminder:function(){showSpinner(),t.history.navigate("#/addreminder")},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")}});return o});