define(["jquery","underscore","Backbone","text!views/login/mpin.tpl","collections/login/securelogintokenCollections","collections/login/MPINLoginCollections","collections/login/forcepassCollections"],function(n,i,r,e,o,t,l){var a=0,p=new EncryptedLocalStorage("secret"),v=r.View.extend({el:"#container",events:{"click #mpin_tab":"loadMpinUI","click #login_tab":"loadLoginUI","click #log_inbtn":"loadDashbordUI"},initialize:function(){},render:function(r){this.$el.html(i.template(e)),n("div").removeClass("modal-backdrop fade in")},loadDashbordUI:function(){if(a>0)return!1;a=1;var i=n("#mpin1").val(),e=n("#mpin2").val(),o=n("#mpin3").val(),t=n("#mpin4").val(),l=n("#mpin5").val(),v=n("#mpin6").val();if(""==i||""==e||""==o||""==t||""==l||""==v)return void n("#mpinError").html(n.i18n.t("validation.login.mpinnullerror"));if(i.length>=1&&e.length>=1&&o.length>=1&&t.length>=1&&l.length>=1&&v.length>=1){var m=i+e+o+t+l+v;p.set("sumryInterfaceReq","N");var c=0,s=m;if(""!=s&&"undefined"!=s){for(var d=0;d<s.length-1;d++){var g=parseInt(s[d])+1;s[d+1]==g&&s[d]!=s[d+1]&&c++}if(5==c)return void n("#mpinError").html(n.i18n.t("validation.login.newmpinseqerror"))}var c=0,s=m;if(s.match(/(.)\1\1/))return void n("#mpinError").html(n.i18n.t("validation.login.newmpinduperr"));r.history.navigate("#/wealth",{trigger:!0,replace:!0})}else a=0},mpinLogin:function(){var i=n("#mpin1").val(),r=n("#mpin2").val(),e=n("#mpin3").val(),o=n("#mpin4").val(),t=n("#mpin5").val(),l=n("#mpin6").val();if(""==i||""==r||""==e||""==o||""==t||""==l)return void n("#mpinError").html(n.i18n.t("validation.login.mpinnullerror"));var a=i+r+e+o+t+l;p.set("sumryInterfaceReq","N");var v=0,m=a;if(""!=m&&"undefined"!=m){for(var c=0;c<m.length-1;c++){var s=parseInt(m[c])+1;m[c+1]==s&&m[c]!=m[c+1]&&v++}if(5==v)return void n("#mpinError").html(n.i18n.t("validation.login.newmpinseqerror"))}var v=0,m=a;return m.match(/(.)\1\1/)?void n("#mpinError").html(n.i18n.t("validation.login.newmpinduperr")):void showSpinner()},forcePassMPIN:function(n){},authotplogin:function(n){hideSpinner(),r.history.fragment=null,r.history.navigate("#/secureques",{trigger:!0,replace:!0})},loadLoginUI:function(){r.history.navigate("#/login")},errorresponse:function(n){hideSpinner(),openErrorPopup()}});return v});