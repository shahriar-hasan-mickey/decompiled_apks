define(["jquery","underscore","Backbone","text!views/login/firstLogin.tpl","text!views/login/mpin.tpl","models/validation/login/loginValidationModel"],function(o,i,e,n,t,r){var a=(new EncryptedLocalStorage("secret"),e.View.extend({el:"#container",events:{"click #mpin_tab":"loadFirstLoginMpinUI","click #login_tab":"loadLoginUI","click #login":"gotoSecureQuestion","click #newReg":"gotoNewRegistration","click #forgot_Mpin":"loadForgotMpinUI","click #forgot_username":"loadForgotUsernameUI","click #forgot_password":"loadForgotPasswordUI"},initialize:function(){o("div").removeClass("modal-backdrop fade in")},render:function(e){this.$el.html(i.template(n)),this.$el.trigger("create"),o("html").removeClass(),o("html").addClass("loginbg"),o("div").removeClass("modal-backdrop  in")},loadLoginUI:function(){e.history.navigate("#/firstlogin")},loadFirstLoginMpinUI:function(){e.history.navigate("#/loginask")},gotoSecureQuestion:function(){o("#usernameError").html(""),o("#passwordError").html("");o("#username").val(),o("#password").val();this.model=new r({url:"json/"}),e.Validation.bind(this);var i=this.$("form").serializeObject();this.model.set(i,{validate:!0})?(this.model.clear(),e.Validation.unbind(this),e.history.navigate("#/setsecureques")):(this.$(".has-error").fadeIn(),event.preventDefault())},loadForgotUsernameUI:function(){e.history.navigate("#/forgotusername")},loadForgotPasswordUI:function(){e.history.navigate("#/forgotpasswordnew")},loadForgotMpinUI:function(){e.history.navigate("#/forgotMpin")},gotoNewRegistration:function(){hideSpinner(),e.history.navigate("#/reginfo")},errorresponse:function(o){hideSpinner(),openErrorPopup()}}));return a});