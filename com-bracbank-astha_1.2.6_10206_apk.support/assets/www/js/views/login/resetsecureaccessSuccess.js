define(["jquery","underscore","Backbone","text!views/login/resetsecureaccessSuccess.tpl","collections/logout/logoutCollections","collections/login/secureaccessquestionsuccessCollections","models/validation/forgotPasswordValidationModel"],function(e,t,n,s,i,o,c){var r=new EncryptedLocalStorage("secret"),a=n.View.extend({el:"#container",events:{"click #gotologin":"gotoLogin"},initialize:function(){this.on("error",function(e,t){alert(t)})},update:function(){showSpinner();var t=this,n=function(e){t.successPassword()},s=function(e){t.errorresponse()};t.collection=new o([],{}),timestamp=(new Date).getTime();var i=CryptoJS.SHA512(r.get("loginuser_id")+r.get("appdynamicToken"))+"",c=getDeviceId();t.collection.fetch({data:e.param({deviceid:c,device_id:c,userId:r.get("loginuser_id"),appDynamicValue:i,flag:"Y",ulpId:r.get("ulpID"),qnsans:r.get("quesansget")}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?n(e):s(e)},error:s})},successPassword:function(){return hideSpinner(),e(this.el).html(t.template(s)).i18n(),e(this.el).trigger("create"),this},gotoLogin:function(){showSpinner();var t=this,n=function(e){t.msgsuccesscompile()},s=function(e){t.errorresponse()};t.collection=new i([],{});var o=(new Date).getTime();t.collection.fetch({data:e.param({usersession:r.get("access_token"),access_token:r.get("access_token"),requestid:o}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?n(e):s(e)},error:s})},msgsuccesscompile:function(){return hideSpinner(),n.history.fragment=null,n.history.navigate("#/login",{trigger:!0,replace:!0}),this},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return a});