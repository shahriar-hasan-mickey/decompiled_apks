define(["jquery","underscore","Backbone","collections/wealth/accSummaryCollections","text!views/common/emailAdviceSuccessPage.tpl","text!views/wealth/wealth.tpl","collections/common/emailAdviceCollections"],function(e,t,n,c,i,o,a){var r=new EncryptedLocalStorage("secret"),l=n.View.extend({el:"#mobcontent",events:{"click   #backbut":"BackButton"},initialize:function(){},update:function(){showSpinner();var t=this,n=r.get("FTRefNoVal");if(""!=n||"undefined"!=n||null!=n)n=n;else{var n=r.get("ftreff");n=n}var c=function(e){t.emailadvicecompile(n)},i=function(e){t.errorresponse()};t.collection=new a([],{});var o,l=(new Date).getTime(),s=r.get("accountNumber"),u="TRANSFER";"ACCOUNT"==u?o="ACCOUNT":"CARD"==u?o="CARD":"TRANSFER"==u&&(o="TRANSFER");var h=r.get("emailid"),m=(r.get("loginid"),r.get("custno")),p=(r.get("lang_id"),getDeviceId()),f=(r.get("accountNumber"),s+""+p),d=CryptoJS.MD5(f);f=d+"",t.collection.fetch({data:e.param({appchecksum:f,ftrefno:n,transfertype:o,accountNumber:s,custmailid:h,custuserid:m,requestid:l}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?c(e):i(e)},error:i})},render:function(){return hideSpinner(),this.$el.html(t.template(i,{})),this},BackButton:function(){r.set("currentPage","");r.get("getstatmentback");n.history.navigate("#/wealth",{trigger:!0})},emailadvicecompile:function(){return r.set("backReqFromEmail","1"),this.$el.html(t.template(i)).i18n(),this.$el.trigger("create"),hideSpinner(),this},BackToWealth:function(){showSpinner();var e=this,t=function(t){e.whealthcompile()},n=function(t){e.errorresponse()};e.collection=new c([],{}),e.collection.fetch({dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?t(e):n(e)},error:n})},whealthcompile:function(){var e=t.template(o);this.$el.html(e).trigger("create"),hideSpinner()},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")}});return l});