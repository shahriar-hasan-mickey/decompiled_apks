define(["jquery","underscore","Backbone","text!views/pushnotification/pushnotificationsList.tpl","collections/pushnotification/pushnotificationsCollection","collections/pushnotification/pushNotificationDetailsCollections"],function(e,t,i,n,o,c){var s=new EncryptedLocalStorage("secret"),a=i.View.extend({el:"#container",events:{"click #backBtn":"gotoPreviousPage","click #selectAll":"notifySelectAll","click #notifyDelete":"pushNotifyDeletePage","click .notificationlist":"getNotificationList"},render:function(){var e=this;e.getPushNotifications()},getNotificationList:function(t){t.stopImmediatePropagation();var n=e(t.currentTarget).attr("id"),o=e(t.currentTarget).attr("mesageId"),a=this,r=function(e){hideSpinner(),i.history.navigate("#/pushNotificationsDetails/"+n)},l=function(e){a.errorresponse()};showSpinner(),a.collection=new c([],{}),a.collection.fetch({data:e.param({access_token:s.get("access_token"),message_id:o}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(s.get("calltimeout")),success:function(e){"0000"==ackStatus?r(e):l(e)},error:l})},getPushNotifications:function(){var i=this,c=function(o){hideSpinner(),e("html").removeClass().addClass("app fntzoom"),i.$el.html(t.template(n)),e(".selectAll").hide(),e("#notifyDelete").hide()},a=function(e){i.errorresponse()};showSpinner(),i.collection=new o([],{}),i.collection.fetch({data:e.param({access_token:s.get("access_token")}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(s.get("calltimeout")),success:function(e){"0000"==ackStatus?c(e):a(e)},error:a})},notifySelectAll:function(t){t.preventDefault(),e("#selectAll").prop("checked")?e(".notifyAlert_new .checkBoxClass").prop("checked",!0):e(".notifyAlert_new .checkBoxClass").prop("checked",!1)},pushNotifyDeletePage:function(t){t.preventDefault(),e(".notifyAlert_new li").has("input:checkbox:checked").remove()},pushNotifyDetailsPage:function(e){e.preventDefault();var t=this.attr("id");i.history.navigate("#/pushNotificationsDetails"/t)},gotoPreviousPage:function(e){e.preventDefault(),i.history.navigate("#/wealth")},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(e){return i.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return a});