define(["jquery","underscore","Backbone","collections/wealth/investmentDetailStatementCollections","text!views/wealth/investmentdetailstatement.tpl","views/errors/exception"],function(e,t,n,i,o,r){var a=n.View.extend({el:"#investdetailedstatementid",update:function(t,n,o){showSpinner();var r=this,a=function(e){r.detailstatementcompile()},s=function(e){r.errorresponse()};r.collection=new i([],{id:t}),timestamp=(new Date).getTime(),r.collection.fetch({data:e.param({accountNumber:t,fromDate:n,toDate:o,numRecordsRequested:10,sortBy:"debitAmount",lastNTransactionFilter:10,requestid:timestamp}),dataType:"json",type:"POST",cache:!1,success:function(e){"00000"==ackStatus?a(e):s(e)},error:s})},detailstatementcompile:function(){return this.$el.html(t.template(o,{collection:this.collection.models})).i18n(),this.$el.trigger("create"),e(".amtformatter").formatamount(),hideSpinner(),this},errorresponse:function(){hideSpinner(),openErrorPopup()}});return a});