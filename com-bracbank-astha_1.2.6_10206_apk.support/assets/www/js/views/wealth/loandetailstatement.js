define(["jquery","underscore","Backbone","collections/wealth/loanDetailStatementCollections","text!views/wealth/loandetailstatement.tpl","views/common/exception"],function(e,t,n,o,i,a){var r=n.View.extend({el:"#loandetailedstatementid",update:function(t,n,i,a){showSpinner();var r=this,c=function(e){r.detailstatementcompile()},l=function(e){r.errorresponse()};r.collection=new o([],{id:n}),timestamp=(new Date).getTime(),r.collection.fetch({data:e.param({loanNumber:t,accountId:n,fromDate:i,toDate:a,numRecordsRequested:10,sortBy:"debitAmount",lastNTransactionFilter:10,requestid:timestamp}),dataType:"json",type:"POST",cache:!1,success:function(e){"00000"==ackStatus?c(e):l(e)},error:l})},detailstatementcompile:function(){return this.$el.html(t.template(i,{collection:this.collection.models})).i18n(),this.$el.trigger("create"),e(".amtformatter").formatamount(),hideSpinner(),this},errorresponse:function(){hideSpinner(),openErrorPopup()}});return r});