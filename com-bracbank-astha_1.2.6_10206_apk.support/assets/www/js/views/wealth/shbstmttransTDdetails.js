define(["jquery","underscore","Backbone","collections/wealth/accTransDetailedCollections","collections/common/emailAdviceCollections","routers/wealthrouter","text!views/wealth/shbstmttransTDdetails.tpl","text!views/common/emailAdviceSuccessPage.tpl","views/errors/exception"],function(e,t,i,n,a,r,c,o,s){var l=new EncryptedLocalStorage("secret"),m=i.View.extend({el:"#mobcontent",events:{"click #fttransdetails":"transdetails","click #emailadvice":"EmailAdvice","click #backbut":"BackButton"},update:function(e){showSpinner();var t=this,i=e;l.set("shbstmttransdet",i),t.whealthcompile(e)},transdetails:function(){hideSpinner();var i=t.template(c);this.$el.html(i).trigger("create"),e(".amtformatter").formatamount()},whealthcompile:function(e){hideSpinner();var i=t.template(c,{id:e});return this.$el.html(i).trigger("create"),this},BackButton:function(){var e=l.get("getstatmentback");l.set("tranback","9"),i.history.navigate("#/getstatementdetail/"+e,{trigger:!0})},EmailAdvice:function(){showSpinner();var t=this,i=function(e){t.emailadvicecompile()},n=function(e){t.errorresponse()};t.collection=new a([],{});var r=(new Date).getTime(),c=l.get("shbstmttransdet"),o="ACCOUNT";t.collection.fetch({data:e.param({ftrefno:c,transfertype:o,requestid:r}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?i(e):n(e)},error:n})},emailadvicecompile:function(){return l.set("backReqFromEmail","5"),this.$el.html(t.template(o)).i18n(),this.$el.trigger("create"),hideSpinner(),this},errorresponse:function(){hideSpinner(),i.history.navigate("#/exception")}});return m});