define(["jquery","underscore","Backbone","collections/wealth/ccDetailStatementCollections","text!views/wealth/ccdetailstatement.tpl","views/errors/exception"],function(e,t,n,o,r,i){var c=new EncryptedLocalStorage("secret"),a=n.View.extend({el:"#mobcontent",update:function(t,n,r){var i=this,a=function(e){i.detailstatementcompile()},s=function(e){i.errorresponse()};i.collection=new o([],{id:t}),timestamp=(new Date).getTime();var l=getDeviceId(),m=t+""+l,u=CryptoJS.MD5(m);m=u+"",i.collection.fetch({data:e.param({appchecksum:m,accountNumber:t,fromDate:n,toDate:r,numRecordsRequested:10,sortBy:"debitAmount",lastNTransactionFilter:10,requestid:timestamp}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(c.get("calltimeout")),success:function(e){"0000"==ackStatus?a(e):s(e)},error:s})},detailstatementcompile:function(){return e(this.el).html(t.template(r,{collection:this.collection.models})).i18n(),e(this.el).trigger("create"),e(".amtformatter").formatamount(),hideSpinner(),this.undelegateEvents(),this},errorresponse:function(){hideSpinner(),openErrorPopup()}});return a});