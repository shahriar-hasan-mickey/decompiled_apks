define(["jquery","underscore","Backbone","text!views/wealth/showCampaign.tpl","routers/estatementrouter","collections/wealth/CampaignDetailCollections"],function(e,a,t,i,n,c){var r=new EncryptedLocalStorage("secret"),s=t.View.extend({el:"#mobcontent",events:{"click #accept":"AcceptCampaign","click #decline":"DeclineCampaign","click #remindmelater":"RemindMeLater","click #dismiss":"DeclineCampaign"},initialize:function(){new n},update:function(a){r.set("datailIndex",a);var t=this,i=(getDeviceId(),r.get("totalCampign"));if(1!=parseInt(i)){var n=r.get("crossSellingList");r.set("promoid",n[a].campaignid)}var s=function(e){t.campaignDetailCompile()},o=function(e){t.errorresponse()};showSpinner(),t.collection=new c([],{}),timestamp=(new Date).getTime(),"en-US"==e.i18n.lng()?language="EN":"en-AR"==e.i18n.lng()&&(language="AR"),t.collection.fetch({data:e.param({paramcode:"CAMPDTL",language:language,campaignid:r.get("promoid")}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(r.get("calltimeout")),success:function(e){"0000"==ackStatus?s(e):o(e)},error:o})},campaignDetailCompile:function(){var e=r.get("datailIndex");this.$el.html(a.template(i,{index:e})).i18n(),hideSpinner()},AcceptCampaign:function(){var e=r.get("campaigntype");if(r.set("acceptcampaign","Y"),"NEWCC"==e)r.set("cancelfromcampaign","1"),t.history.navigate("#/applynewcc");else if("NEWPL"==e)r.set("cancelfromcampaign","2"),t.history.navigate("#/applypf");else if("NEWHF"==e)r.set("cancelfromcampaign","3"),t.history.navigate("#/applyhf");else if("CCLTINC"==e)r.set("cancelfromcampaign","4"),t.history.navigate("#/ccLimit");else if("TOPUPPL"==e)r.set("cancelfromcampaign","5"),t.history.navigate("#/personalfinancesummary");else if("ESTATMNT"==e){var a=r.get("menuVisibilityList"),i=a.MTC9010.menu_status,n=r.get("stopmailflag");r.set("cancelfromcampaign","6");r.get("emailid");"Y"==i&&("NO"==n&&(r.set("actionFlgMore","Y"),t.history.navigate("#/estatementsubscription")),"YES"==n&&(r.set("actionFlgMore","Y"),t.history.navigate("#/estatementsummary")))}},DeclineCampaign:function(){var e=r.get("totalCampign");1==e?(r.set("campaignflag","N"),t.history.navigate("#/campaignredirect")):(r.set("campaignflag","N"),t.history.navigate("#/campaignsummary"))},RemindMeLater:function(){var e=r.get("totalCampign");1==e?(r.set("campaignflag","L"),t.history.navigate("#/campaignredirect")):(r.set("campaignflag","L"),t.history.navigate("#/campaignsummary"))},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")},disposeView:function(e){return t.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});