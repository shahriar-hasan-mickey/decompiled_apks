define(["jquery","underscore","Backbone","collections/wealth/PersonalfinanceProcessCollections","text!views/wealth/personalfinanceprocess.tpl","views/errors/exception"],function(e,t,n,o,i,a){var r=new EncryptedLocalStorage("secret"),c=n.View.extend({el:"#mobcontent",events:{},update:function(){showSpinner(),r.set("currentPage","");var t=this,n=function(e){t.personalfinanceprocesscompile()},i=function(e){t.errorresponse()};t.collection=new o([],{}),timestamp=(new Date).getTime();var a=(r.get("finamtval"),r.get("purposeoffinval"),r.get("fincontractperiodval")),c=(r.get("custno"),r.get("loanAccountNumber")),s=r.get("topUpAmount"),p=r.get("finstatus"),l=r.get("purposetype"),u=r.get("purposetype");u=u.replace(/\s+/g,"+");var f=(r.get("loanBookingProcessDTO"),getDeviceId()),g=c+""+u+s+f,d=CryptoJS.MD5(g);g=d+"",t.collection.fetch({data:e.param({appchecksum:g,actionFlag:"Y",campainId:r.get("promoid"),hideapplicationid:c,purposeoffin:l,hidestatus:p,hidfinancedamount:s,hidtenureinmonths:a,requestid:timestamp}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?n(e):i(null==ackStatus||""==ackStatus?e:e)},error:i})},personalfinanceprocesscompile:function(){this.$el.html(t.template(i,{})).i18n(),this.$el.trigger("create"),hideSpinner()},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")}});return c});