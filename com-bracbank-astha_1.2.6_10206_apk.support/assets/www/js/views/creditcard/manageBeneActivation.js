define(["jquery","underscore","Backbone","collections/transfer/manageBeneficiaryCollections","collections/creditcard/manageBeneEditCollections","text!views/creditcard/manageBeneActivation.tpl"],function(e,n,t,i,a,r){var c=new EncryptedLocalStorage("secret"),s=t.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #maketransfer":"maketransfer"},initialize:function(){},update:function(e,n,t,i){showSpinner(),this.SuccessPage(e,n,t,i)},maketransfer:function(){c.set("transferBene","true");var n=e("#beneAaccNo").val();c.set("benNo",n),t.history.navigate("#/creditCardPayments")},SuccessPage:function(n,t,i,r){var s=this,o=function(e){s.manageBeneficiarySuccess()},m=function(n){hideSpinner(),navigator.notification.confirm(e.i18n.t("app.transfer.managebeneficiary.activatemsg"),function(e){1==e&&(document.location.href="tel:920013323")},"",[e.i18n.t("app.mpin.yes"),e.i18n.t("app.mpin.no")])},u=function(e){s.errorresponse()};s.collection=new a([],{}),timestamp=(new Date).getTime();var d,r,l,p,b,f,g,y,v,h,N,k,S,A,w,B,C,V,E,T,I,P,x,R,j,q,M,z,D,F,L,O,U,Y,$,_,G,H,J,K,Q=c.get("custno"),W="",X=c.get("lang_id");"en-US"==X?W="EN":"en-AR"==X&&(W="AR"),d=e("#name").text(),r="",l="",p="",b="",f="",g="",y="",v="",h="",N="",k="",S="",A="",w="",B="",C="",V="",E=t,T="INACTIVE",I=Q,P=c.get("clracctNumber"),x=c.get("clearccNo");var Z=x;R="",j="02",q="",M="4",z="",D="",F="",L="",O="",U="",Y="",$="",_="",G="",H="",J=c.get("firstNamefirstName"),K="";var ee="",ne="",te="",ie=c.get("usermobile"),ae=c.get("nicknamenickname"),re=c.get("firstNamefirstName");showSpinner(),s.collection.fetch({data:e.param({ivrflag:"Y",ReportFlag:"A",shortName:ae,firstName:re,lastName:l,middleName:p,description:b,buildingNumber:f,streetAddress1:g,streetAddress2:y,streetAddress3:v,streetAddress4:h,primaryPhoneNumber:N,secondaryPhoneNumber:k,primaryMobileNumber:S,secondaryMobileNumber:A,cityId:w,primaryEmailAddress:B,secondaryEmailAddress:C,beneficiaryId:V,beneTypeCode:E,beneStatus:T,customerNumber:I,benAcctno:P,creditCardNumber:Z,ninikama:R,service:j,serviceType:q,benType:M,benIbanNumber:z,benBankName:D,sarieParticipateBankCode:F,benBankAdd1:L,benBankAdd2:O,benBankAdd3:U,benNationality:Y,benBankCountry:$,benBankBic:_,benCity:G,currency:H,benName:J,customerIdType:K,actvcode:ee,actvcodecreated:ne,actvcodeexpiry:te,mobilenumber1:ie,language:W,bennickname:re,benname:re,requestid:timestamp}),dataType:"json",type:"POST",timeout:parseInt(c.get("calltimeout")),cache:!1,success:function(e){"0000"==ackStatus&&"0"==ivrcallinitiationstatus?o(e):"0000"==ackStatus&&"1"==ivrcallinitiationstatus?m():"0000"==ackStatus?m():"0000"==ackStatus&&""==ivrcallinitiationstatus?m():(u(e),c.set("nickname",""))},error:u});hideSpinner()},manageBeneficiarySuccess:function(e,t,i,a){hideSpinner(),this.$("#mobcontent").html(n.template(r))},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")},disposeView:function(e){return t.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});