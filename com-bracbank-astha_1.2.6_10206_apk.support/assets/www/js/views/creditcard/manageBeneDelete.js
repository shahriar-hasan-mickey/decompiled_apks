define(["jquery","underscore","Backbone","collections/creditcard/manageBeneDeleteCollections","routers/creditcardrouter","text!views/creditcard/manageBeneDelete.tpl","models/validation/activateCreditCardValidationModel"],function(e,t,n,i,c,a,r){var o=new EncryptedLocalStorage("secret"),s=n.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #validateCardPin":"validateCardandPin"},initialize:function(){},update:function(){var e=(o.get("ccmbdacno"),o.get("ccmbdname")),t=o.get("ccmbdbenecode"),n=o.get("ccmbdnomask"),i=this;showSpinner(),o.set("CCDeleteBeneCode",t),o.set("currentPage",""),i.listcompile(e,n,t)},listcompile:function(e,n,i){hideSpinner(),this.$("#mobcontent").html(t.template(a,{name:e,no:n,benecode:i}))},validateCardandPin:function(){var t=this,n=function(e){t.showOTP()},c=function(e){t.errorresponse()};t.collection=new i([],{}),timestamp=(new Date).getTime();var a=o.get("CCDeleteBeneCode"),r="02",s=e("#cardno").text(),d="",l=e("#nickname").text(),u=o.get("lang_id");"en-US"==u?d="EN":"en-AR"==u&&(d="AR"),showSpinner(),t.collection.fetch({data:e.param({beneTypeCode:a,service:r,benAcctno:s,serviceType:"CC",benname:l,language:d,requestid:timestamp}),dataType:"json",type:"POST",timeout:parseInt(o.get("calltimeout")),cache:!1,success:function(e){"0000"==ackStatus?n(e):c(e)},error:c})},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")},showOTP:function(){hideSpinner(),n.history.navigate("#/manageBeneDeleteOtpResult")},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});