define(["jquery","underscore","Backbone","text!views/creditcard/cclimitcampaign.tpl","collections/creditcard/creditCardLimitOtpResultCollections","views/errors/exception"],function(e,t,n,i,r,o){var c=new EncryptedLocalStorage("secret"),a=n.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #ok":"OkButton"},initialize:function(){},update:function(){c.set("currentPage","");var t=c.get("custno"),n=c.get("acceptcampaign"),i=c.get("promoid"),o=this,a=c.get("campaigntype"),s="",u="";if("CCLTINC"==a){u="IncreaseCreditCardLimit",s="003";var p=new Array;p[0]="CreditCardNumber",p[1]="LimitIncreaseType",p[2]="CurrentCardLimit",p[3]="NewCreditLimit",p[4]="Origin";var l=JSON.stringify(p),m=new Array;m[0]=c.get("ccnumber"),m[1]="Temporary",m[2]="",m[3]=c.get("cclimitincrease"),m[4]="Crossselling"}else{var g=c.get("LoginProfile"),d=g[0];u="RequestATopup",s="008";var p=new Array;p[0]="TypeOfLoan",p[1]="Apply For",p[2]="Loan Account Number",p[3]="Top Up Amount",p[4]="Origin",p[5]="Name",p[6]="Mobile",p[7]="DateOfBirth";var l=JSON.stringify(p),m=new Array;m[0]="Personal Loan",m[1]="Top Up",m[2]=c.get("loanAccountNumber"),m[3]=c.get("topUpAmount"),m[4]="Crossselling",m[5]=d,m[6]=c.get("usermobile"),m[7]=c.get("birthdate")}var w=JSON.stringify(m),y=function(e){o.resultPageSuccess()},f=function(e){o.errorresponse()};o.collection=new r([],{}),timestamp=(new Date).getTime(),showSpinner(),o.collection.fetch({data:e.param({servicerequestname:u,customernumber:t,servicerequesttype:s,actionFlag:n,campainId:i,name:l,value:w}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(c.get("calltimeout")),success:function(e){"0000"==ackStatus?y(e):f(e)},error:f})},resultPageSuccess:function(){hideSpinner(),c.set("promoid",""),e("#mobcontent").empty(),this.$("#mobcontent").html(t.template(i)).i18n()},OkButton:function(){n.history.navigate("#/wealth")},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return a});