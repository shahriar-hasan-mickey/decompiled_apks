define(["jquery","underscore","Backbone","collections/creditcard/blockCreditCardCollections","text!views/creditcard/blockCreditCardOtpResult.tpl"],function(e,t,n,c,r){var i=new EncryptedLocalStorage("secret"),o=n.View.extend({el:"#mobcontent",events:{},initialize:function(){this.on("error",function(e,t){alert(t)})},update:function(){i.set("currentPage","transferConfirm");var t=i.get("ccbccacno"),n=(i.get("custno"),this),r=function(e){n.resultPageSuccess()},o=function(e){n.errorresponse()};n.collection=new c([],{}),timestamp=(new Date).getTime();var s=i.get("date"),a=i.get("type"),u=i.get("name"),d=getDeviceId(),l=t+""+d,p=CryptoJS.MD5(l);l=p+"",showSpinner(),n.collection.fetch({data:e.param({appchecksum:l,cardType:a,cardHolderName:u,expdate:s,creditCardNumber:t}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(i.get("calltimeout")),success:function(e){"0000"==ackStatus?r(e):o(e)},error:o})},resultPageSuccess:function(){hideSpinner();i.get("ccbccacno");e(this.el).html(t.template(r)).i18n()},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return o});