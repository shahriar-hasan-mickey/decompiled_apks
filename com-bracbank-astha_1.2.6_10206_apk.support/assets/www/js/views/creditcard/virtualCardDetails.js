define(["jquery","underscore","Backbone","collections/creditcard/creditCardSummaryCollections","collections/wealth/ccNicknameCollections","routers/creditcardrouter","routers/requestrouter","collections/creditcard/creditCardDetailsCollections","text!views/creditcard/virtualCardDetails.tpl","models/validation/nickNameValidationModel","libs/swiper/swiper.jquery.umd","views/errors/exception"],function(e,t,n,i,r,c,a,o,s,l,u,d){var m=new EncryptedLocalStorage("secret"),p=n.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{"click #fromactno":"details","click #addfund":"AddFund","click #virtualunamsked":"virtualunamsked"},initialize:function(){new a},update:function(){m.set("currentPage",""),m.set("virtualmaskflag",""),showSpinner();var t=this,n=function(e){t.listcompile()},r=function(e){t.listcompile()},c=function(e){t.errorresponse()};t.collection=new i([],{});var a=(new Date).getTime();t.collection.fetch({data:e.param({vccCardType:"VCC",status:"",requestid:a}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(m.get("calltimeout")),success:function(e){var t=m.get("errorcode");"0000"==ackStatus?"0000"==t?n(e):r(e):null!=t&&"MSI-ES-1001"!=t?n(e):c(e)},error:c})},details:function(){hideSpinner();var t=this,n=function(e){t.listcompile()},i=function(e){t.errorresponse()};t.collection=new o([],{});var r,c=e("input[name=fromactno]:checked").val();if(alert("frmacntvall"+c),void 0!=c){var a=c.split("~"),s=a[0];r=a[1];var l=a[2]}if(""!=l&&void 0!=l&&null!=l)m.set("shortnamesum",l);else{var l=m.get("shortNamesummary");m.set("shortnamesum",l)}if(""!=r&&void 0!=r&&null!=r)m.set("ccMask",r);else{var u=m.get("acctno");m.set("ccMask",u)}var d=m.get("cccardacctno"),p=m.get("acctno");("undefined"==s||void 0==s||null==s||""==s)&&(s=d,r=p),m.set("setccdetailsaccno",s),showSpinner();var v=getDeviceId(),f=s+""+v,h=CryptoJS.MD5(f);f=h+"",t.collection.fetch({data:e.param({appchecksum:f,ccMaskedno:s,accountId:s,moduletype:""}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(m.get("calltimeout")),success:function(e){var t=m.get("errorcode");"0000"==ackStatus?(n(e),hideSpinner()):null!=t&&"MTC-RT-0003"!=t?n(e):i(e)},error:i})},listcompile:function(){hideSpinner(),this.$("#mobcontent").html(t.template(s)),e(".amtformatter").formatamount()},AddFund:function(){showSpinner();e("#ccnum").val();n.history.navigate("#/ccPayments")},virtualunamsked:function(){showSpinner();e("#ccnum").val();m.set("virtualmaskflag","Y"),n.history.navigate("#/virtualCardUnmaskedOtp/0")},errorresponse:function(){hideSpinner(),n.history.navigate("#/exception")},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return p});