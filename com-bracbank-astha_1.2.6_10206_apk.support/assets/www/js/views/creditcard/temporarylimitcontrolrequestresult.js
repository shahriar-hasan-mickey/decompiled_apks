define(["jquery","underscore","Backbone","collections/creditcard/temporaryLimitCtrlModifyCollections","text!views/creditcard/temporarylimitcontrolrequestresult.tpl"],function(e,t,i,n,c){var r=new EncryptedLocalStorage("secret"),a=i.View.extend({el:"#mobcontent",events:{},initialize:function(){this.on("error",function(e,t){alert(t)})},update:function(){var t=(r.get("custno"),r.get("acceptcampaign")),i=(r.get("promoid"),this),c=r.get("newlimnam"),a=r.get("frmnam"),s=r.get("inclimnam"),o=r.get("curlimnam"),l=r.get("resonnam"),m=r.get("selectlim"),g=r.get("inclimit"),u=r.get("limit"),d=r.get("newlimit"),p=r.get("reason"),h=(r.get("ccode"),new Array);h[0]=a,h[1]=s,h[2]=o,h[3]=c,h[4]=l,"Y"==t&&(h[5]="Origin");var w=(JSON.stringify(h),new Array);w[0]=m,w[1]=g,w[2]=u,w[3]=d,w[4]=p,"Y"==t&&(w[5]="Crossselling");var f=(JSON.stringify(w),function(e){i.resultPageSuccess()}),v=function(e){i.errorresponse()};i.collection=new n([],{}),timestamp=(new Date).getTime();var y=r.get("creditCardActNo"),u=r.get("limit"),d=r.get("newlimit"),S=r.get("cc_ovlmpersentage"),b=r.get("cc_increaseperse"),x=r.get("cc_temexpmonth"),V=r.get("ccmaxlimit"),C=(r.get("ccavaillimit"),r.get("frmacntval")),D=new Date;D.setMonth(D.getMonth()+2);var M,k,O,q=D.getDate(),A=D.getMonth()+1,E=D.getFullYear(),J=""+(9>=q?"0"+q:q)+"/"+(9>=A?"0"+A:A)+"/"+E,L=J.replace(/\//g,""),M=L.substring(0,2),k=L.substring(2,4),O=L.substring(4,8),N=O+""+k+M,P=getDeviceId(),T=y+""+d+V+u+S+b+x+P,Y=CryptoJS.MD5(T);T=Y+"",showSpinner(),i.collection.fetch({data:e.param({appchecksum:T,creditcardnumber:y,hidmaskcardnumber:C,hidcclimit:d,hidccmaxlimit:V,hidccavaillimit:u,hidtemplimit:d,hidccexpdate:N,hidovlmpercent:S,hidincrprecent:b,hidtempexpmonth:x,requestid:timestamp}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(r.get("calltimeout")),success:function(e){"0000"==ackStatus?f(e):v(e)},error:v})},resultPageSuccess:function(){r.set("cidforcclim",""),r.set("acceptcampaign",""),hideSpinner();var i=r.get("selectlim"),n=(r.get("inclimit"),r.get("limit")),a=r.get("newlimit"),s=(r.get("reason"),r.get("ccode"));e(this.el).html(t.template(c,{frmcc:i,limits:n,newLimit:a,ccode:s})).i18n()},errorresponse:function(){hideSpinner(),i.history.navigate("#/exception")},disposeView:function(e){return i.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return a});