define(["jquery","underscore","Backbone","collections/creditcard/eppCreditCardOtpResultCollections","routers/creditcardrouter","routers/requestrouter","text!views/creditcard/convertPaymentinstallCreditCardconfirm.tpl","views/errors/exception"],function(e,t,r,n,i,c,o,a){var s=new EncryptedLocalStorage("secret"),d=r.View.extend({el:"#container",e1:"#menuwrapper",e2:"#mobcontent",events:{},initialize:function(){new c},update:function(){var t=this,r=function(e){t.listcompile()},i=function(e){t.errorresponse()};t.collection=new n([],{}),timestamp=(new Date).getTime();s.get("otpModule");s.set("otpModule","");var c=s.get("frmacntval"),o=s.get("creditCardActNo"),a=s.get("eamount"),d=getDeviceId(),u=o+""+c+a+d,m=CryptoJS.MD5(u)+"";u=m+"";var p=s.get("transactionDate");p=p.replace(/\s+/g,"+");var h,g,l;h=p.substring(0,2),g=p.substring(3,5),l=p.substring(6,10);var b=l+""+g+h,f=s.get("valueDate");f=f.replace(/\s+/g,"+");var v,w,y;v=f.substring(0,2),w=f.substring(3,5),y=f.substring(6,10);var k=y+""+w+v;showSpinner(),t.collection.fetch({data:e.param({appchecksum:u,hidaccountnumber:o,creditcardnumber:c,hidcardseq:s.get("cardseqnbr"),hidtransactionamount:a,hidplannumber:s.get("plannbr"),hideppplannumber:s.get("tenoreplan"),hideppterm:s.get("tenorEpp"),hidinterestrate:s.get("tenoreprofitt"),hidusercode1:"",hidusercode2:"",hidusercode3:"",hidusercode4:"",hidamslkey:s.get("transactionkey"),hidamsltxnidcode:s.get("txnidcode"),hidamslrecordtype:s.get("recordtype"),hidamslrecordnumber:s.get("recnbr"),hidmttxncode:s.get("transcode"),hidmteffdate:b,hidmtpostingdate:k,hidmtauthcode:s.get("authcode"),hidmtreferencenumber:s.get("refnbr"),hidmtsinumber:s.get("mtsinbr"),hidmtmerchantorg:s.get("mtmrchntorg"),mtmerchantstore:s.get("mtmrchntstore"),hidmtdescription:s.get("mtdesc"),hidmtlogicmod:s.get("mtlogicmod"),hidmteppconvind:s.get("epp_flag"),hidmaskcardnumber:s.get("acctnomaskk"),hidmtplan:s.get("mtplan")}),dataType:"json",type:"POST",timeout:parseInt(s.get("calltimeout")),cache:!1,success:function(e){"0000"==ackStatus?r(e):i(e)},error:i})},listcompile:function(){hideSpinner(),s.set("currentPage","transferConfirm"),this.$("#mobcontent").html(t.template(o))},errorresponse:function(){hideSpinner(),r.history.navigate("#/exception")},disposeView:function(e){return r.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return d});