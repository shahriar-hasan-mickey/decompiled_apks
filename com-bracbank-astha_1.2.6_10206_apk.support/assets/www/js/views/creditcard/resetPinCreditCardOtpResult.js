define(["jquery","underscore","Backbone","collections/creditcard/resetPinCreditCardOtpResultCollections","text!views/creditcard/resetPinCreditCardOtpResult.tpl"],function(e,t,n,i,c){var r=new EncryptedLocalStorage("secret"),o=n.View.extend({el:"#mobcontent",events:{},initialize:function(){this.on("error",function(e,t){})},update:function(t,n){showSpinner();var c=r.get("custno"),o=this,s=function(e){o.resultPageSuccess(u,t,n)},a=function(e){o.errorresponse()};o.collection=new i([],{}),timestamp=(new Date).getTime();var p=timestamp.toString();p=Encrypt(p);var u=r.get("cc-rpcc-acno"),t=r.get("cc-rpcc-cardpin"),d=Encryptusertime(t,p),n=r.get("pinflag"),l=u.split("~"),h=l[0],m=Encrypt(h),g=getDeviceId(),f=h+""+g,w=CryptoJS.MD5(f);f=w+"",o.collection.fetch({data:e.param({appchecksum:f,customerno:c,ccMaskedno:m,hidcardno:h,hidcardpin:d,enctimephrase:p,pintype:n}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(r.get("calltimeout")),success:function(e){"0000"==ackStatus?s(e):a(e)},error:a})},resultPageSuccess:function(n,i,r){hideSpinner(),e("#mobcontent").empty(),e(this.el).html(t.template(c,{acno:n,cardpin:i,pinflag:r})).i18n()},errorresponse:function(){n.history.navigate("#/exception"),hideSpinner()},disposeView:function(e){return n.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return o});