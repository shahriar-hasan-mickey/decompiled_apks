define(["jquery","underscore","Backbone","collections/creditcard/activateCreditCardOtpResultCollections","text!views/creditcard/activateCreditCardOtpResult.tpl"],function(e,t,c,n,r){var i=new EncryptedLocalStorage("secret"),o=c.View.extend({el:"#mobcontent",events:{},initialize:function(){this.on("error",function(e,t){})},update:function(){var t=(i.get("custno"),i.get("encryptedAcctno")),c=this,r=function(e){c.resultPageSuccess()},o=function(e){c.errorresponse()};c.collection=new n([],{}),timestamp=(new Date).getTime();var a=(i.get("cc-acc-frmacno"),i.get("acctno"),i.get("cc-acc-mm"),i.get("cc-acc-yy"),i.get("frmname")),s=i.get("expiryddmmyy"),u=getDeviceId(),d=t+""+u,p=CryptoJS.MD5(d);d=p+"",showSpinner(),c.collection.fetch({data:e.param({appchecksum:d,creditCardNumber:t,svctyp:"",cardHolderName:a,expdate:s}),dataType:"json",type:"POST",cache:!1,timeout:parseInt(i.get("calltimeout")),success:function(e){"0000"==ackStatus?r(e):o(e)},error:o})},resultPageSuccess:function(){i.set("currentPage","transferConfirm"),hideSpinner(),e(this.el).html(t.template(r)).i18n()},errorresponse:function(){hideSpinner(),c.history.navigate("#/exception")},disposeView:function(e){return c.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return o});