define(["jquery","underscore","Backbone","text!views/migrateduser/authorizationMode.tpl"],function(e,t,a,i){var r=null,l=new EncryptedLocalStorage("secret"),n=a.View.extend({el:"#container",events:{"click #migrate_auth_edit":"editEmailID","click #migrate_auth_save":"updateEmailID","click #migrate_auth_next_btn":"saveAuthorizationMode","click #migrate_auth_cancel_btn":"backToLogin"},initialize:function(){},update:function(e){r=null,this.$el.html(t.template(i))},backToLogin:function(){a.history.navigate("#/login")},editEmailID:function(){e("#migrate_auth_edit").hide(),e("#migrate_auth_save").show(),e("#email_auth").removeAttr("readonly")},updateEmailID:function(){e("#emailNullError").html("");var t=e("#email_auth").val(),a=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return null==t||""==t?void e("#emailNullError").html(e.i18n.t("validation.login.emailnullerror")):a.test(t)?(l.set("migratedEmailID",t),e("#migrate_auth_save").hide(),e("#migrate_auth_edit").show(),void e("#email_auth").attr("readonly","readonly")):void e("#emailNullError").html(e.i18n.t("validation.login.validemailerror"))},saveAuthorizationMode:function(){e("#emailNullError").html("");var t=(e("input[name='authmode']:checked").val(),e("#email_auth").text());l.set("migratedEmailID",t),a.history.navigate("#/migratedsetques")},errorresponse:function(e){hideSpinner(),openErrorPopup()}});return n});