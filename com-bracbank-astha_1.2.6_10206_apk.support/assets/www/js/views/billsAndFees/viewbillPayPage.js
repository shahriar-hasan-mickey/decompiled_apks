define(["jquery","underscore","Backbone","collections/bills/getBillerCollections","text!views/billsAndFees/viewbillPayPage.tpl"],function(e,t,r,l,i){var n=new EncryptedLocalStorage("secret"),s=r.View.extend({el:"#container",events:{"click #addBillerBtn_BillPay":"gotoAddBillerPage","click .markSelect":"loadselectbene"},initialize:function(){n.set("thisInputId",null),n.set("formDatasInEls",null)},render:function(){var t=this;showSpinner();var r=function(e){hideSpinner(),t.loadViewBillerTemplate()},i=function(e){t.errorresponse()};t.collection=new l,t.collection.fetch({data:e.param({access_token:n.get("access_token"),categoryId:n.get("selectedBillerListId"),billerType:n.get("selectedBillerListName")}),dataType:"json",type:"POST",cache:!1,success:function(e){"0000"==ackStatus?r(e):i(e)},error:i})},loadViewBillerTemplate:function(){e("html").removeClass().addClass("app"),this.$el.html(t.template(i))},loadselectbene:function(t){t.stopImmediatePropagation();var l=e(t.currentTarget).val();n.set("selectBillID",l);var i=e(t.currentTarget).attr("data");if(n.set("selectBillIndex",i),"BRAC University"==n.get("selectedBillerListName"))var s=e(t.currentTarget).attr("payslipNum");else var s=e(t.currentTarget).attr("billNum");n.set("selectBillNumber",s);var a=e(t.currentTarget).attr("id");n.set("selectBillerId",a);var c=e(t.currentTarget).attr("billServId");n.set("selectBillServiceId",c);var o=e(t.currentTarget).attr("billServName");n.set("selectBillServiceName",o);var d=e(t.currentTarget).attr("billServInfo");n.set("selectBillConnectionType",d),r.history.navigate("#/selectbillpayPage")},gotoAddBillerPage:function(e){e.stopImmediatePropagation(),n.set("isTransfer","true"),n.set("selectedBillerListId",n.get("selectedBillerListId")),n.set("isBillPayOneOffSuccess","false"),r.history.navigate("#/addbiller")},errorresponse:function(){hideSpinner(),openErrorPopup()},disposeView:function(e){return r.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return s});