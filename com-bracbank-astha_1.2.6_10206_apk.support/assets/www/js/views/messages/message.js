define(["jquery","underscore","Backbone","text!views/messages/message.tpl","text!views/messages/inboxmessagedeletesuccess.tpl","collections/messages/messageCollections","collections/messages/deleteItemsCollections"],function(e,s,t,n,o,i,c){var a=new EncryptedLocalStorage("secret"),r=t.View.extend({el:"#mobcontent",events:{"click #delete":"msgDel","click #reply":"replyCompose","click #back":"BacktoInbox"},render:function(s){a.set("delid",s);var t=a.get("messages"),n=t[s].id,o=this,c=function(e){o.messagesCompile(s)},r=function(e){o.errorresponse()};showSpinner(),o.collection=new i([],{});(new Date).getTime();o.collection.fetch({data:e.param({access_token:a.get("access_token"),messageactionname:"inbox",messageid:n}),dataType:"json",type:"POST",success:function(e){"0000"==ackStatus?(hideSpinner(),c(e)):r(e)},error:r})},messagesCompile:function(e){var t=a.get("messages"),o=t[e].messageSubject,i=t[e].messageText,c=t[e].messageDate;return a.set("msgSub",o),a.set("messageInbox","messageInbox"),this.$el.html(s.template(n),{msgSub:o,msgDate:c,msgText:i}).i18n(),this.$el.trigger("create"),this},msgDel:function(){var s=a.get("delid"),t=a.get("messages"),n=t[s].id,o=this,i=function(e){o.itemsDeleteSuccess()},r=function(e){o.errorresponse()};showSpinner(),o.collection=new c([],{});(new Date).getTime();o.collection.fetch({data:e.param({access_token:a.get("access_token"),messageactionname:"inbox",messageids:n}),dataType:"json",type:"POST",success:function(e){"0000"==ackStatus?(hideSpinner(),i(e)):r(e)},error:r})},itemsDeleteSuccess:function(){return this.$el.html(s.template(o)).i18n(),this.$el.trigger("create"),this},BacktoInbox:function(){t.history.navigate("#/inbox")},replyCompose:function(){t.history.navigate("#/compose")},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")}});return r});