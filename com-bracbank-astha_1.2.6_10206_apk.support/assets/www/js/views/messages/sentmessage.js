define(["jquery","underscore","Backbone","text!views/messages/sentmessage.tpl","text!views/messages/sentmessagedeletesuccess.tpl","collections/messages/messageCollections","collections/messages/deleteItemsCollections"],function(e,s,t,n,i,c,o){var a=new EncryptedLocalStorage("secret"),r=t.View.extend({el:"#mobcontent",events:{"click #compose":"replyCompose","click #msgdel":"msgDel","click #submit":"Home","click #bckBtn":"backtoSent"},initialize:function(){},render:function(s){a.set("delid",s);var t=a.get("messages"),n=t[s].id,i=this,o=function(e){i.sentmessagesCompile(s)},r=function(e){i.errorresponse()};showSpinner(),i.collection=new c([],{});(new Date).getTime();i.collection.fetch({data:e.param({access_token:a.get("access_token"),messageactionname:"sentItems",messageid:n}),dataType:"json",type:"POST",success:function(e){"0000"==ackStatus?(hideSpinner(),o(e)):r(e)},error:r})},sentmessagesCompile:function(t){var i=a.get("messages"),c=i[t].messageSubject,o=i[t].messageDate;return this.$el.html(s.template(n,{msgSub:c,msgDate:o})).i18n(),this.$el.trigger("create"),e("#spinner").hide(),this},msgDel:function(){var s=a.get("delid"),t=a.get("messages"),n=t[s].id,i=this,c=function(e){i.itemsDeleteSuccess()},r=function(e){i.errorresponse()};i.collection=new o([],{});(new Date).getTime();showSpinner(),i.collection.fetch({data:e.param({access_token:a.get("access_token"),messageactionname:"sentItems",messageids:n}),dataType:"json",type:"POST",success:function(e){"0000"==ackStatus?(hideSpinner(),c(e)):r(e)},error:r})},itemsDeleteSuccess:function(){return this.$el.html(s.template(i)).i18n(),this.$el.trigger("create"),this},Home:function(){return t.history.navigate("#/messageCenter"),this},backtoSent:function(){return t.history.navigate("#/sent"),this},replyCompose:function(){t.history.navigate("#/compose")},errorresponse:function(){hideSpinner(),t.history.navigate("#/exception")}});return r});