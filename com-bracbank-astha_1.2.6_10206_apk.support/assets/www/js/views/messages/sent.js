define(["jquery","underscore","Backbone","text!views/messages/sent.tpl","text!views/messages/sentmessagedeletesuccess.tpl","collections/messages/sentItemsCollections","collections/messages/deleteItemsCollections"],function(e,t,s,n,c,a,o){var r=!1,l=new EncryptedLocalStorage("secret"),h=s.View.extend({el:"#mobcontent",events:{"click #msgdelete":"deleteMessage","click #selectAll":"selectAllCheckBox","change .checkinput":"changeCheckBox","click #submit":"Home"},initialize:function(){},render:function(){var t=this,s=function(e){t.sentItemsCompile()},n=function(e){t.errorresponse()};t.collection=new a([],{});(new Date).getTime();showSpinner(),t.collection.fetch({data:e.param({access_token:l.get("access_token")}),dataType:"json",type:"POST",success:function(e){"0000"==ackStatus?(hideSpinner(),s(e)):n(e)},error:n})},sentItemsCompile:function(){return this.$el.html(t.template(n)).i18n(),this.$el.trigger("create"),this},selectAllCheckBox:function(){r?(r=!1,e(".checkinput").removeClass("active"),e("#msgdelete").attr("disabled","disabled")):(r=!0,e(".checkinput").addClass("active"),e("#msgdelete").removeAttr("disabled"))},changeCheckBox:function(){var t=!1;e(this).hasClass("active")?e(this).removeClass("active"):e(this).addClass("active"),e(".checkinput").each(function(s,n){e(n).hasClass("active")&&(t=!0)}),t?(e("#msgdelete").removeAttr("disabled"),r=!1):e("#msgdelete").attr("disabled","disabled")},deleteMessage:function(){var t=[];e(".checkinput").each(function(s,n){if(e(n).hasClass("active")){var i=e(n).find("> input[type=checkbox]").val();t.push(i)}});var s="";for(i=0;i<t.length;i++)i>0&&(s+="~"),s+=t[i];var n=this,c=function(e){n.itemsDeleteSuccess()},a=function(e){n.errorresponse()};n.collection=new o([],{});(new Date).getTime();showSpinner(),n.collection.fetch({data:e.param({access_token:l.get("access_token"),messageactionname:"sentItems",messageids:s,appchecksum:""}),dataType:"json",type:"POST",success:function(e){"0000"==ackStatus?(hideSpinner(),c(e)):a(e)},error:a})},itemsDeleteSuccess:function(){return this.$el.html(t.template(c)).i18n(),this.$el.trigger("create"),this},Home:function(){return s.history.navigate("#/messageCenter"),this},errorresponse:function(){hideSpinner(),s.history.navigate("#/exception")},disposeView:function(e){return s.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return h});