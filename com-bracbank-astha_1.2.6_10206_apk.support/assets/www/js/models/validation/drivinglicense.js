define(["jquery","underscore","Backbone","text!views/transfer/moi/drivinglicense.tpl","models/validation/moiFormValidationModel","views/transfer/moi/drivinglicenseconfirm"],function(e,i,t,n,r,s){var o=t.View.extend({el:"#content",events:{"submit #drivinflicenseissueform":"goTodrivingLicense"},update:function(t,r){var s=i.template(n);return this.$el.html(s).trigger("create"),e.mobile.loading("hide"),this},goTodrivingLicense:function(i,n){this.model=new r({url:"json/"}),this.$(".alert").hide(),t.Validation.bind(this);var o=this.$("form").serializeObject();this.model.set(o,{validate:!0})?(e.mobile.loading("show"),this.subview=this.disposeView(new s),this.subview.render().$el.trigger("create"),e.mobile.loading("hide"),this.undelegateEvents()):(this.$(".alert-error").fadeIn(),i.preventDefault())},disposeView:function(e){return t.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return o});