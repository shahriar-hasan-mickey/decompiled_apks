define(["jquery","underscore","Backbone","text!views/transfer/moi/issueiqama.tpl","models/validation/moiFormValidationModel","views/transfer/moi/issueiqamaconfirm"],function(e,i,t,s,n,r){var o=t.View.extend({el:"#content",events:{"submit #issueiqamaform":"goToIssueIqamado"},update:function(t,n){var r=i.template(s);return this.$el.html(r).trigger("create"),e.mobile.loading("hide"),this},goToIssueIqamado:function(i){this.model=new n({url:"json/"}),this.$(".alert").hide(),t.Validation.bind(this);var s=this.$("form").serializeObject();this.model.set(s,{validate:!0})?(e.mobile.loading("show"),this.subview=this.disposeView(new r),this.subview.render().$el.trigger("create"),e.mobile.loading("hide"),this.undelegateEvents()):(this.$(".alert-error").fadeIn(),i.preventDefault())},disposeView:function(e){return t.View.prototype.close=function(){this.unbind(),this.undelegateEvents()},void 0!==this.currentView&&this.currentView.close(),this.currentView=e,this.currentView.delegateEvents(),this.currentView}});return o});